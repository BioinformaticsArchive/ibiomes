(function(fa,P,K,G,va,wa,xa,ya,za,Aa,Ba,E,Ca,Da,Ea,ja,Fa,C,Ga,x,L,ga,c,Ha,X,Ia,Ja,z,Y,Ka,r,$,e,La,Ma,ka,D,n,m,y,u,s,q,S,w,k,v,H,B,la,A,M,I,O,F,Q,R,U,ma,na,oa,pa,V,Na,aa,T,Oa,ha,ba,ca,qa,da,W,ea,Pa,Qa,Z,ra,sa,Ra,ta,Sa,Ta,Ua,Va,Wa,Xa,Ya,ua,ia){___JmolDate="$Date: 2013-12-04 12:39:13 -0600 (Wed, 04 Dec 2013) $";___fullJmolProperties="src/org/jmol/viewer/Jmol.properties";___JmolVersion="14.0.1_2013.12.04";Math.log10||(Math.log10=function(a){return Math.log(a)/2.302585092994046});fa=Number.prototype.toString;
java.lang.Number=Number;if(da)for(K=0;K<W.length;K++)G=W[K],Number.prototype[G]=JavaObject.prototype[G];Number.prototype.toString=fa;Number.__CLASS_NAME__="Number";ba(Number,java.io.Serializable);Number.equals=Z.equals;Number.getName=Z.getName;c(Number,"shortValue",function(){var a=Math.round(this)&65535;return 0>this&&0<a?a-65536:a});c(Number,"byteValue",function(){var a=Math.round(this)&255;return 0>this&&0<a?a-256:a});c(Number,"intValue",function(){return Math.round(this)&4294967295});c(Number,
"longValue",function(){return Math.round(this)});c(Number,"floatValue",function(){return this.valueOf()});c(Number,"doubleValue",function(){return parseFloat(this.valueOf())});e(Number,"hashCode",function(){return this.valueOf()});java.lang.Integer=Integer=function(){s(this,arguments)};T(Integer,"Integer",Number,Comparable,null,!0);Integer.prototype.valueOf=function(){return 0};Integer.toString=Integer.prototype.toString=function(){return 0!=arguments.length?""+arguments[0]:this===Integer?"class java.lang.Integer":
""+this.valueOf()};L(Integer,function(a){null==a&&(a=0);"number"!=typeof a&&(a=Integer.parseIntRadix(a,10));this.valueOf=function(){return a}});Integer.MIN_VALUE=Integer.prototype.MIN_VALUE=-2147483648;Integer.MAX_VALUE=Integer.prototype.MAX_VALUE=2147483647;Integer.TYPE=Integer.prototype.TYPE=Integer;c(Integer,"bitCount",function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);a=a+(a>>>4)&252645135;a+=a>>>8;return a+(a>>>16)&63},"Number");Integer.bitCount=Integer.prototype.bitCount;c(Integer,
"numberOfLeadingZeros",function(a){if(0==a)return 32;var b=1;0==a>>>16&&(b+=16,a<<=16);0==a>>>24&&(b+=8,a<<=8);0==a>>>28&&(b+=4,a<<=4);0==a>>>30&&(b+=2,a<<=2);return b-(a>>>31)},"Number");Integer.numberOfLeadingZeros=Integer.prototype.numberOfLeadingZeros;c(Integer,"numberOfTrailingZeros",function(a){if(0==a)return 32;var b=31,d=a<<16;0!=d&&(b-=16,a=d);d=a<<8;0!=d&&(b-=8,a=d);d=a<<4;0!=d&&(b-=4,a=d);d=a<<2;0!=d&&(b-=2,a=d);return b-(a<<1>>>31)},"Number");Integer.numberOfTrailingZeros=Integer.prototype.numberOfTrailingZeros;
c(Integer,"parseIntRadix",function(a,b){if(null==a)throw new NumberFormatException("null");if(2>b)throw new NumberFormatException("radix "+b+" less than Character.MIN_RADIX");if(36<b)throw new NumberFormatException("radix "+b+" greater than Character.MAX_RADIX");if(10==b)for(var d=a.length;0<=--d;){var g=a.charCodeAt(d);if(!(48<=g&&57>=g)&&(0<d||43!=g&&45!=g))throw new NumberFormatException("Not a Number : "+a);}d=parseInt(a,b);if(isNaN(d))throw new NumberFormatException("Not a Number : "+a);return d},
"String, Number");Integer.parseIntRadix=Integer.prototype.parseIntRadix;c(Integer,"parseInt",function(a){return Integer.parseIntRadix(a,10)},"String");Integer.parseInt=Integer.prototype.parseInt;e(Integer,"$valueOf",function(a){return new Integer(a)});Integer.$valueOf=Integer.prototype.$valueOf;e(Integer,"equals",function(a){return null==a||!y(a,Integer)?!1:a.valueOf()==this.valueOf()},"Object");Integer.toHexString=Integer.prototype.toHexString=function(a){a.valueOf&&(a=a.valueOf());if(0>a){var b=
a&16777215;return(a>>24&255)._numberToString(16)+(b=b._numberToString(16)).substring(b.length-6)}return a._numberToString(16)};Integer.toOctalString=Integer.prototype.toOctalString=function(a){a.valueOf&&(a=a.valueOf());return a._numberToString(8)};Integer.toBinaryString=Integer.prototype.toBinaryString=function(a){a.valueOf&&(a=a.valueOf());return a._numberToString(2)};Integer.decodeRaw=c(Integer,"decodeRaw",function(a){0<=a.indexOf(".")&&(a="");var b=a.startsWith("-")?1:0;a=a.replace(/\#/,"0x").toLowerCase();
b=a.startsWith("0x",b)?16:a.startsWith("0",b)?8:10;a=Number(a);return 8==b?parseInt(a,8):a},"~S");Integer.decode=c(Integer,"decode",function(a){a=Integer.decodeRaw(a);if(isNaN(a)||a<Integer.MIN_VALUE||a>Integer.MAX_VALUE)throw new NumberFormatException("Invalid Integer");return new Integer(a)},"~S");e(Integer,"hashCode",function(){return this.valueOf()});java.lang.Long=Long=function(){s(this,arguments)};T(Long,"Long",Number,Comparable,null,!0);Long.prototype.valueOf=function(){return 0};Long.toString=
Long.prototype.toString=function(){return 0!=arguments.length?""+arguments[0]:this===Long?"class java.lang.Long":""+this.valueOf()};L(Long,function(a){null==a&&(a=0);a="number"==typeof a?Math.round(a):Integer.parseIntRadix(a,10);this.valueOf=function(){return a}});Long.TYPE=Long.prototype.TYPE=Long;c(Long,"parseLong",function(a,b){return Integer.parseInteger(a,b||10)});Long.parseLong=Long.prototype.parseLong;e(Long,"$valueOf",function(a){return new Long(a)});Long.$valueOf=Long.prototype.$valueOf;
e(Long,"equals",function(a){return null==a||!y(a,Long)?!1:a.valueOf()==this.valueOf()},"Object");Long.toHexString=Long.prototype.toHexString=function(a){return a.toString(16)};Long.toOctalString=Long.prototype.toOctalString=function(a){return a.toString(8)};Long.toBinaryString=Long.prototype.toBinaryString=function(a){return a.toString(2)};Long.decode=c(Long,"decode",function(a){a=Integer.decodeRaw(a);if(isNaN(a))throw new NumberFormatException("Invalid Long");return new Long(a)},"~S");java.lang.Short=
Short=function(){s(this,arguments)};T(Short,"Short",Number,Comparable,null,!0);Short.prototype.valueOf=function(){return 0};Short.toString=Short.prototype.toString=function(){return 0!=arguments.length?""+arguments[0]:this===Short?"class java.lang.Short":""+this.valueOf()};L(Short,function(a){null==a&&(a=0);"number"!=typeof a&&(a=Integer.parseIntRadix(a,10));a=a.shortValue();this.valueOf=function(){return a}});Short.MIN_VALUE=Short.prototype.MIN_VALUE=-32768;Short.MAX_VALUE=Short.prototype.MAX_VALUE=
32767;Short.TYPE=Short.prototype.TYPE=Short;c(Short,"parseShortRadix",function(a,b){return Integer.parseIntRadix(a,b).shortValue()},"String, Number");Short.parseShortRadix=Short.prototype.parseShortRadix;c(Short,"parseShort",function(a){return Short.parseShortRadix(a,10)},"String");Short.parseShort=Short.prototype.parseShort;e(Short,"$valueOf",function(a){return new Short(a)});Short.$valueOf=Short.prototype.$valueOf;e(Short,"equals",function(a){return null==a||!y(a,Short)?!1:a.valueOf()==this.valueOf()},
"Object");Short.toHexString=Short.prototype.toHexString=function(a){return a.toString(16)};Short.toOctalString=Short.prototype.toOctalString=function(a){return a.toString(8)};Short.toBinaryString=Short.prototype.toBinaryString=function(a){return a.toString(2)};Short.decode=c(Short,"decode",function(a){a=Integer.decodeRaw(a);if(isNaN(a)||-32768>a||32767<a)throw new NumberFormatException("Invalid Short");return new Short(a)},"~S");java.lang.Byte=Byte=function(){s(this,arguments)};T(Byte,"Byte",Number,
Comparable,null,!0);Byte.prototype.valueOf=function(){return 0};Byte.toString=Byte.prototype.toString=function(){return 0!=arguments.length?""+arguments[0]:this===Byte?"class java.lang.Byte":""+this.valueOf()};w(Byte,function(a){"number"!=typeof a&&(a=Integer.parseIntRadix(a,10));a=a.byteValue();this.valueOf=function(){return a}});Byte.serialVersionUID=Byte.prototype.serialVersionUID=-0x63b19f7b11af0c00;Byte.MIN_VALUE=Byte.prototype.MIN_VALUE=-128;Byte.MAX_VALUE=Byte.prototype.MAX_VALUE=127;Byte.SIZE=
Byte.prototype.SIZE=8;Byte.TYPE=Byte.prototype.TYPE=Byte;c(Byte,"parseByteRadix",function(a,b){return Integer.parseIntRadix(a,b).byteValue()},"String, Number");Byte.parseByteRadix=Byte.prototype.parseByteRadix;c(Byte,"parseByte",function(a){return Byte.parseByte(a,10)},"String");Byte.parseByte=Byte.prototype.parseByte;e(Byte,"$valueOf",function(a){return new Byte(a)});Byte.$valueOf=Byte.prototype.$valueOf;e(Byte,"equals",function(a){return null==a||!y(a,Byte)?!1:a.valueOf()==this.valueOf()},"Object");
Byte.toHexString=Byte.prototype.toHexString=function(a){return a.toString(16)};Byte.toOctalString=Byte.prototype.toOctalString=function(a){return a.toString(8)};Byte.toBinaryString=Byte.prototype.toBinaryString=function(a){return a.toString(2)};Byte.decode=c(Byte,"decode",function(a){a=Integer.decodeRaw(a);if(isNaN(a)||-128>a||127<a)throw new NumberFormatException("Invalid Byte");return new Byte(a)},"~S");java.lang.Float=Float=function(){s(this,arguments)};T(Float,"Float",Number,Comparable,null,!0);
Float.prototype.valueOf=function(){return 0};Float.toString=Float.prototype.toString=function(){return 0!=arguments.length?""+arguments[0]:this===Float?"class java.lang.Float":""+this.valueOf()};L(Float,function(a){null==a&&(a=0);"number"!=typeof a&&(a=Number(a));this.valueOf=function(){return a}});Float.serialVersionUID=Float.prototype.serialVersionUID=-0x2512365d24c31000;Float.MIN_VALUE=Float.prototype.MIN_VALUE=3.4028235E38;Float.MAX_VALUE=Float.prototype.MAX_VALUE=1.4E-45;Float.NEGATIVE_INFINITY=
Number.NEGATIVE_INFINITY;Float.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Float.NaN=Number.NaN;Float.TYPE=Float.prototype.TYPE=Float;c(Float,"parseFloat",function(a){if(null==a)throw new NumberFormatException("null");if("number"==typeof a)return a;var b=Number(a);if(isNaN(b))throw new NumberFormatException("Not a Number : "+a);return b},"String");Float.parseFloat=Float.prototype.parseFloat;e(Float,"$valueOf",function(a){return new Float(a)});Float.$valueOf=Float.prototype.$valueOf;c(Float,"isNaN",
function(a){return isNaN(a)},"Number");Float.isNaN=Float.prototype.isNaN;c(Float,"isInfinite",function(a){return!isFinite(a)},"Number");Float.isInfinite=Float.prototype.isInfinite;e(Float,"equals",function(a){return null==a||!y(a,Float)?!1:a.valueOf()==this.valueOf()},"Object");java.lang.Double=Double=function(){s(this,arguments)};T(Double,"Double",Number,Comparable,null,!0);Double.prototype.valueOf=function(){return 0};Double.toString=Double.prototype.toString=function(){return 0!=arguments.length?
""+arguments[0]:this===Double?"class java.lang.Double":""+this.valueOf()};L(Double,function(a){null==a&&(a=0);"number"!=typeof a&&(a=Double.parseDouble(a));this.valueOf=function(){return a}});Double.serialVersionUID=Double.prototype.serialVersionUID=-0x7f4c3db5d6940400;Double.MIN_VALUE=Double.prototype.MIN_VALUE=4.9E-324;Double.MAX_VALUE=Double.prototype.MAX_VALUE=1.7976931348623157E308;Double.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Double.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Double.NaN=
Number.NaN;Double.TYPE=Double.prototype.TYPE=Double;c(Double,"isNaN",function(a){return isNaN(a)},"Number");Double.isNaN=Double.prototype.isNaN;c(Double,"isInfinite",function(a){return!isFinite(a)},"Number");Double.isInfinite=Double.prototype.isInfinite;c(Double,"parseDouble",function(a){if(null==a)throw new NumberFormatException("null");if("number"==typeof a)return a;var b=Number(a);if(isNaN(b))throw new NumberFormatException("Not a Number : "+a);return b},"String");Double.parseDouble=Double.prototype.parseDouble;
c(Double,"$valueOf",function(a){return new Double(a)},"Number");Double.$valueOf=Double.prototype.$valueOf;e(Double,"equals",function(a){return null==a||!y(a,Double)?!1:a.valueOf()==this.valueOf()},"Object");java.lang.B00lean=Boolean;Boolean=java.lang.Boolean=Boolean||function(){s(this,arguments)};if(da)for(K=0;K<W.length;K++)G=W[K],Boolean.prototype[G]=JavaObject.prototype[G];Boolean.__CLASS_NAME__="Boolean";ba(Boolean,[java.io.Serializable,java.lang.Comparable]);Boolean.equals=Z.equals;Boolean.getName=
Z.getName;Boolean.serialVersionUID=Boolean.prototype.serialVersionUID=-0x32df8d7f2a630600;qa(Boolean,function(a){var b=("string"==typeof a?Boolean.toBoolean(a):a)?!0:!1;this.valueOf=function(){return b}},"~O");Boolean.parseBoolean=c(Boolean,"parseBoolean",function(a){return Boolean.toBoolean(a)},"~S");c(Boolean,"booleanValue",function(){return this.valueOf()});Boolean.$valueOf=e(Boolean,"$valueOf",function(a){return a?Boolean.TRUE:Boolean.FALSE});e(Boolean,"toString",function(){return this.valueOf()?
"true":"false"});e(Boolean,"hashCode",function(){return this.valueOf()?1231:1237});e(Boolean,"equals",function(a){return y(a,Boolean)?this.booleanValue()==a.booleanValue():!1},"~O");Boolean.getBoolean=c(Boolean,"getBoolean",function(a){var b=!1;try{b=Boolean.toBoolean(System.getProperty(a))}catch(d){if(!y(d,IllegalArgumentException)&&!y(d,NullPointerException))throw d;}return b},"~S");e(Boolean,"compareTo",function(a){return a.value==this.value?0:this.value?1:-1},"Boolean");Boolean.toBoolean=c(Boolean,
"toBoolean",($fz=function(a){return null!=a&&a.equalsIgnoreCase("true")},$fz.isPrivate=!0,$fz),"~S");Boolean.TRUE=Boolean.prototype.TRUE=new Boolean(!0);Boolean.FALSE=Boolean.prototype.FALSE=new Boolean(!1);Boolean.TYPE=Boolean.prototype.TYPE=Boolean;Encoding={UTF8:"utf-8",UTF16:"utf-16",ASCII:"ascii",guessEncoding:function(a){return 239==a.charCodeAt(0)&&187==a.charCodeAt(1)&&191==a.charCodeAt(2)?Encoding.UTF8:255==a.charCodeAt(0)&&254==a.charCodeAt(1)?Encoding.UTF16:Encoding.ASCII},readUTF8:function(a){var b=
this.guessEncoding(a),d=0;b==Encoding.UTF8?d=3:b==Encoding.UTF16&&(d=2);for(b=[];d<a.length;d++){var g=a.charCodeAt(d);if(128>g)b[b.length]=a.charAt(d);else if(192<g&&224>g){g&=31;d++;var c=a.charCodeAt(d)&63,g=(g<<6)+c;b[b.length]=String.fromCharCode(g)}else if(224<=g){g&=15;d++;c=a.charCodeAt(d)&63;d++;var h=a.charCodeAt(d)&63,g=(g<<12)+(c<<6)+h;b[b.length]=String.fromCharCode(g)}}return b.join("")},convert2UTF8:function(a){var b=this.guessEncoding(a),d=0;if(b==Encoding.UTF8)return a;b==Encoding.UTF16&&
(d=2);for(var b=Array(0+a.length-d),g=d;g<a.length;g++){var c=a.charCodeAt(g);if(128>c)b[0+g-d]=a.charAt(g);else if(2047>=c){var h=192+((c&1984)>>6),j=128+(c&63);b[0+g-d]=String.fromCharCode(h)+String.fromCharCode(j)}else h=224+((c&61440)>>12),j=128+((c&4032)>>6),c=128+(c&63),b[0+g-d]=String.fromCharCode(h)+String.fromCharCode(j)+String.fromCharCode(c)}return b.join("")},base64Chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),encodeBase64:function(a){if(null==a||0==
a.length)return a;for(var b=Encoding.base64Chars,d=a.length,g=0,c=[],h,j;g<d;)h=a.charCodeAt(g++),c[c.length]=b[h>>2],g<d?(j=a.charCodeAt(g++),c[c.length]=b[h<<4&48|j>>4],g<d?(h=a.charCodeAt(g++),c[c.length]=b[j<<2&60|h>>6],c[c.length]=b[h&63]):(c[c.length]=b[j<<2&60],c[c.length]="=")):(c[c.length]=b[h<<4&48],c[c.length]="=",c[c.length]="=");return c.join("")},decodeBase64:function(a){if(null==a||0==a.length)return a;var b=Encoding.base64Chars,d=Encoding.xBase64Chars;if(null==Encoding.xBase64Chars){for(var d=
{},g=0;g<b.length;g++)d[b[g]]=g;Encoding.xBase64Chars=d}for(var b=a.length,g=0,c=[],h,j,e,l,N=0;g<b&&6E4>N++;)h=d[a.charAt(g++)],j=d[a.charAt(g++)],e=d[a.charAt(g++)],l=d[a.charAt(g++)],c[c.length]=String.fromCharCode(h<<2&255|j>>4),null!=e&&(c[c.length]=String.fromCharCode(j<<4&255|e>>2),null!=l&&(c[c.length]=String.fromCharCode(e<<6&255|l)));return c.join("")}};if(null==String.prototype.$replace){java.lang.String=String;if(da)for(K=0;K<W.length;K++)G=W[K],"to$tring"==G||("toString"==G||"equals"==
G||"hashCode"==G)||(String.prototype[G]=JavaObject.prototype[G]);ba(String,[java.io.Serializable,CharSequence,Comparable]);String.getName=Z.getName;String.serialVersionUID=String.prototype.serialVersionUID=-0x5f0f5bc785c44c00;String.prototype.$replace=function(a,b){if(a==b||0>this.indexOf(a))return""+this;1==a.length?0<="\\$.*+|?^{}()[]".indexOf(a)&&(a="\\"+a):a=a.replace(/([\\\$\.\*\+\|\?\^\{\}\(\)\[\]])/g,function(a,b){return"\\"+b});return this.replace(RegExp(a,"gm"),b)};String.prototype.$generateExpFunction=
function(a){var b=[],d=[],g=0;b[0]="";for(var c=0;c<a.length;c++){var h=a.charAt(c);c!=a.length-1&&"\\"==h?(c++,h=a.charAt(c),"\\"==h&&(b[g]+="\\"),b[g]+=h):c!=a.length-1&&"$"==h?(c++,d[g]=parseInt(a.charAt(c)),g++,b[g]=""):b[g]="\r"==h?b[g]+"\\r":"\n"==h?b[g]+"\\n":"\t"==h?b[g]+"\\t":'"'==h?b[g]+'\\"':b[g]+h}a="f = function (";g=Math.max.apply({},d);for(c=0;c<=g;c++)a+="$"+c,c!=g&&(a+=", ");a+=") { return ";for(c=0;c<b.length-1;c++)a+='"'+b[c]+'" + $'+d[c]+" + ";a+='"'+b[c]+'"; }';eval(a);return null};
String.prototype.replaceAll=function(a,b){return this.replace(RegExp(a,"gm"),this.$generateExpFunction(b))};String.prototype.replaceFirst=function(a,b){return this.replace(RegExp(a,"m"),this.$generateExpFunction(b))};String.prototype.matches=function(a){null!=a&&(a="^("+a+")$");a=this.match(RegExp(a,"gm"));return null!=a&&0!=a.length};String.prototype.regionMatches=function(a,b,d,g,c){if("number"==typeof a||!0!=a&&!1!=a)c=g,g=d,d=b,b=a,a=!1;if(0>g||0>b||b>this.length-c||g>d.length-c)return!1;b=this.substring(b,
b+c);d=d.substring(g,g+c);a&&(b=b.toLowerCase(),d=d.toLowerCase());return b==d};String.prototype.$plit=function(a,b){if(null!=b&&0<b){if(1==b)return this;var d=RegExp("("+a+")","gm"),g=1,c=this.replace(d,function(a){g++;return g==b?"@@_@@":a}),d=RegExp(a,"gm"),d=this.split(d);d.length>b&&(d[b-1]=c.substring(c.indexOf("@@_@@")+5),d.length=b);return d}d=RegExp(a,"gm");return this.split(d)};String.prototype.trim=function(){for(var a=this.length,b=0;b<a&&" ">=this.charAt(b);)b++;for(;b<a&&" ">=this.charAt(a-
1);)a--;return 0<b?this.substring(b,a):this};String.prototype.trim=function(){return this.replace(/^\s+/g,"").replace(/\s+$/g,"")};String.prototype.startsWith_string_number=function(a,b){var d=b,g=0,c=a.length;if(0>b||b>this.length-c)return!1;for(;0<=--c;)if(this.charAt(d++)!=a.charAt(g++))return!1;return!0};String.prototype.startsWith=function(a){return 1==arguments.length?this.startsWith_string_number(arguments[0],0):2==arguments.length?this.startsWith_string_number(arguments[0],arguments[1]):!1};
String.prototype.endsWith=function(a){return this.startsWith(a,this.length-a.length)};String.prototype.equals=function(a){return this.valueOf()==a};String.prototype.equalsIgnoreCase=function(a){return null==a?!1:this==a||this.toLowerCase()==a.toLowerCase()};String.prototype.hash=0;String.prototype.hashCode=function(){var a=this.hash;if(0==a){for(var b=0,d=this.length,g=0;g<d;g++)a=31*a+this.charCodeAt(b++),a&=4294967295;this.hash=a}return a};String.prototype.getBytes=function(){if(4==arguments.length)return this.getChars(arguments[0],
arguments[1],arguments[2],arguments[3]);var a=this;if(1==arguments.length){for(var b=arguments[0].toString().toLowerCase(),d="utf-8 UTF8 us-ascii iso-8859-1 8859_1 gb2312 gb18030 gbk".split(" "),g=!1,c=0;c<d.length;c++)if(d[c]==b){g=!0;break}if(!g)throw new java.io.UnsupportedEncodingException;if("utf-8"==b||"utf8"==b)a=Encoding.convert2UTF8(this)}b=Array(a.length);for(c=g=d=0;c<a.length;c++)d=a.charCodeAt(c),255<d?(b[g]=26,b[g+1]=d&255,b[g+2]=(d&65280)>>8,g+=2):b[g]=d,g++;return b};String.prototype.contains=
function(a){return 0<=this.indexOf(a)};String.prototype.compareTo=function(a){return this>a?1:this<a?-1:0};String.prototype.toCharArray=function(){for(var a=Array(this.length),b=0;b<this.length;b++)a[b]=this.charAt(b);return a};String.value0f=String.valueOf;String.valueOf=function(a){if("undefined"==a)return String.value0f();if(a instanceof Array){if(1==arguments.length)return a.join("");for(var b=arguments[1],d=arguments[2],g=Array(d),c=0;c<d;c++)g[c]=a[b+c];return g.join("")}return""+a};String.prototype.subSequence=
function(a,b){return this.substring(a,b)};String.prototype.compareToIgnoreCase=function(a){if(null==a)throw new NullPointerException;var b=this.toUpperCase(),d=a.toUpperCase();if(b==d)return 0;b=this.toLowerCase();d=a.toLowerCase();return b==d?0:b>d?1:-1};String.prototype.contentEquals=function(a){if(this.length!=a.length())return!1;a=a.getValue();for(var b=0,d=0,g=this.length;0!=g--;)if(this.charCodeAt(b++)!=a[d++])return!1;return!0};String.prototype.getChars=function(a,b,d,g){if(0>a)throw new StringIndexOutOfBoundsException(a);
if(b>this.length)throw new StringIndexOutOfBoundsException(b);if(a>b)throw new StringIndexOutOfBoundsException(b-a);if(null==d)throw new NullPointerException;for(var c=0;c<b-a;c++)d[g+c]=this.charAt(a+c)};String.prototype.$concat=String.prototype.concat;String.prototype.concat=function(a){if(null==a)throw new NullPointerException;return this.$concat(a)};String.prototype.$lastIndexOf=String.prototype.lastIndexOf;String.prototype.lastIndexOf=function(a,b){return null!=b&&0>=b+this.length?-1:null!=b?
this.$lastIndexOf(a,b):this.$lastIndexOf(a)};String.prototype.intern=function(){return this.valueOf()};String.copyValueOf=String.prototype.copyValueOf=function(){return 1==arguments.length?String.instantialize(arguments[0]):String.instantialize(arguments[0],arguments[1],arguments[2])};String.indexOf=function(a,b,d,g,c,h,j){if(j>=d)return 0==h?d:-1;0>j&&(j=0);if(0==h)return j;var e=g[c];j=b+j;d=b+(d-h);a:for(;;){for(;j<=d&&a[j]!=e;)j++;if(j>d)return-1;for(var l=j+1,N=l+h-1,k=c+1;l<N;)if(a[l++]!=g[k++]){j++;
continue a}return j-b}};String.instantialize=function(){switch(arguments.length){case 0:return new String;case 1:var a=arguments[0];if("string"==typeof a||a instanceof String)return new String(a);if(a instanceof Array||a instanceof Int32Array){if(0<a.length&&"number"==typeof a[0]){for(var b=Array(a.length),d=0;d<a.length;d++)b[d]=String.fromCharCode(a[d]&255);return Encoding.readUTF8(b.join(""))}return a.join("")}if("StringBuffer"==a.__CLASS_NAME__||"java.lang.StringBuffer"==a.__CLASS_NAME__){for(var b=
a.shareValue(),g=a.length(),a=Array(g),d=0;d<g;d++)a[d]=b[d];return a.join("")}return""+a;case 2:return a=arguments[0],g=arguments[1],"string"==typeof g?String.instantialize(a,0,a.length,g):String.instantialize(a,g,0,a.length);case 3:var a=arguments[0],c=arguments[1],g=arguments[2];arguments[2]instanceof Array&&(a=arguments[2],c=arguments[0],g=arguments[1]);b=Array(g);if(0>c||g+c>a.length)throw new IndexOutOfBoundsException;if(0<g)if(null!=a[c].length)for(d=0;d<g;d++)b[d]=a[c+d];else for(d=0;d<g;d++)b[d]=
String.fromCharCode(a[c+d]);return b.join("");case 4:var a=arguments[0],h=arguments[3];if("string"==typeof h||h instanceof String){c=arguments[1];g=arguments[2];b=Array(g);for(d=0;d<g;d++)b[d]=a[c+d],"number"==typeof b[d]&&(b[d]=String.fromCharCode(b[d]&255));d=h.toLowerCase();return"utf-8"==d||"utf8"==d?Encoding.readUTF8(b.join("")):b.join("")}d=arguments[3];c=arguments[2];g=arguments[1];b=Array(d);if(0==g)for(;0<d--;)b[d]=String.fromCharCode(a[d+c]&255);else for(g<<=8;0<d--;)b[d]=String.fromCharCode(g|
a[d+c]&255);return b.join("");default:b="";for(d=0;d<arguments.length;d++)b+=arguments[d];return b}};-1!=navigator.userAgent.toLowerCase().indexOf("chrome")&&(String.prototype.toString=function(){return this})}c$=E(function(){this.value=0;D(this,arguments)},java.lang,"Character",null,[java.io.Serializable,Comparable]);x(c$,function(a){this.value=a},"~N");c(c$,"charValue",function(){return this.value});e(c$,"hashCode",function(){return this.value.charCodeAt(0)});e(c$,"equals",function(a){return X(a,
Character)?this.value.charCodeAt(0)==a.charValue().charCodeAt(0):!1},"~O");e(c$,"compareTo",function(a){return this.value.charCodeAt(0)-a.value.charCodeAt(0)},"Character");c$.toLowerCase=c(c$,"toLowerCase",function(a){return(""+a).toLowerCase().charAt(0)},"~N");c$.toUpperCase=c(c$,"toUpperCase",function(a){return(""+a).toUpperCase().charAt(0)},"~N");c$.isDigit=c(c$,"isDigit",function(a){if(48<=a.charCodeAt(0)&&57>=a.charCodeAt(0))return!0;a.charCodeAt(0);return!1},"~N");c$.isUpperCase=c(c$,"isUpperCase",
function(a){return 65<=a.charCodeAt(0)&&90>=a.charCodeAt(0)?!0:!1},"~N");c$.isLowerCase=c(c$,"isLowerCase",function(a){return 97<=a.charCodeAt(0)&&122>=a.charCodeAt(0)?!0:!1},"~N");c$.isWhitespace=c(c$,"isWhitespace",function(a){return 28<=a.charCodeAt(0)&&32>=a.charCodeAt(0)||9<=a.charCodeAt(0)&&13>=a.charCodeAt(0)||5760==a.charCodeAt(0)?!0:8192>a.charCodeAt(0)||8199==a.charCodeAt(0)?!1:8203>=a.charCodeAt(0)||8232==a.charCodeAt(0)||8233==a.charCodeAt(0)||12288==a.charCodeAt(0)},"~N");c$.isLetter=
c(c$,"isLetter",function(a){if(65<=a.charCodeAt(0)&&90>=a.charCodeAt(0)||97<=a.charCodeAt(0)&&122>=a.charCodeAt(0))return!0;a.charCodeAt(0);return!1},"~N");c$.isLetterOrDigit=c(c$,"isLetterOrDigit",function(a){return Character.isLetter(a)||Character.isDigit(a)},"~N");c$.isSpaceChar=c(c$,"isSpaceChar",function(a){return 32==a.charCodeAt(0)||160==a.charCodeAt(0)||5760==a.charCodeAt(0)?!0:8192>a.charCodeAt(0)?!1:8203>=a.charCodeAt(0)||8232==a.charCodeAt(0)||8233==a.charCodeAt(0)||8239==a.charCodeAt(0)||
12288==a.charCodeAt(0)},"~N");c$.digit=c(c$,"digit",function(a,b){if(2<=b&&36>=b&&128>a.charCodeAt(0)){var d=-1;48<=a.charCodeAt(0)&&57>=a.charCodeAt(0)?d=a.charCodeAt(0)-48:97<=a.charCodeAt(0)&&122>=a.charCodeAt(0)?d=a.charCodeAt(0)-87:65<=a.charCodeAt(0)&&90>=a.charCodeAt(0)&&(d=a.charCodeAt(0)-55);return d<b?d:-1}return-1},"~N,~N");e(c$,"toString",function(){return String.valueOf([this.value])});c$.toString=e(c$,"toString",function(a){return this===Character?"class java.lang.Character":String.valueOf(a)},
"~N");Y(c$,"MIN_VALUE","\x00","MAX_VALUE","\uffff","MIN_RADIX",2,"MAX_RADIX",36,"TYPE",null);java.lang.Character.TYPE=java.lang.Character.prototype.TYPE=java.lang.Character;Array.getComponentType=function(){return Object};c$=r(java.lang.reflect,"Array");c$.newInstance=c(c$,"newInstance",function(){return P(length)},"Class,~N");java.util.Date=Date;T(java.util.Date,"java.util.Date",null,[java.io.Serializable,Cloneable,Comparable]);c(java.util.Date,"clone",function(){return new Date(this.getTime())});
c(java.util.Date,"before",function(a){return this.getTime()<a.getTime()},"java.util.Date");c(java.util.Date,"after",function(a){return this.getTime()>a.getTime()},"java.util.Date");c(java.util.Date,"equals",function(a){return y(a,java.util.Date)&&this.getTime()==a.getTime()},"Object");c(java.util.Date,"compareTo",function(a){var b=this.getTime();a=a.getTime();return b<a?-1:b==a?0:1},"java.util.Date");c(java.util.Date,"compareTo",function(a){return this.compareTo(a)},"Object");e(java.util.Date,"hashCode",
function(){var a=this.getTime();return parseInt(a)^parseInt(a>>32)});c$=E(function(){this.source=null;D(this,arguments)},java.util,"EventObject",null,java.io.Serializable);x(c$,function(a){if(null!=a)this.source=a;else throw new IllegalArgumentException;},"~O");c(c$,"getSource",function(){return this.source});e(c$,"toString",function(){return this.getClass().getName()+"[source="+String.valueOf(this.source)+"]"});C(java.util,"EventListener");c$=E(function(){this.listener=null;D(this,arguments)},java.util,
"EventListenerProxy",null,java.util.EventListener);x(c$,function(a){this.listener=a},"java.util.EventListener");c(c$,"getListener",function(){return this.listener});C(java.util,"Iterator");C(java.util,"ListIterator",java.util.Iterator);C(java.util,"Enumeration");C(java.util,"Collection",Iterable);C(java.util,"Set",java.util.Collection);C(java.util,"Map");C(java.util.Map,"Entry");C(java.util,"List",java.util.Collection);C(java.util,"Queue",java.util.Collection);C(java.util,"RandomAccess");c$=E(function(){this.stackTrace=
this.cause=this.detailMessage=null;D(this,arguments)},java.lang,"Throwable",null,java.io.Serializable);ka(c$,function(){this.cause=this});x(c$,function(){this.fillInStackTrace()});x(c$,function(a){this.fillInStackTrace();this.detailMessage=a},"~S");x(c$,function(a,b){this.fillInStackTrace();this.detailMessage=a;this.cause=b},"~S,Throwable");x(c$,function(a){this.fillInStackTrace();this.detailMessage=null==a?null:a.toString();this.cause=a},"Throwable");c(c$,"getMessage",function(){return"undefined"!=
typeof this.message?this.message:this.detailMessage});c(c$,"getLocalizedMessage",function(){return this.getMessage()});c(c$,"getCause",function(){return this.cause===this?null:this.cause});c(c$,"initCause",function(a){if(this.cause!==this)throw new IllegalStateException("Can't overwrite cause");if(a===this)throw new IllegalArgumentException("Self-causation not permitted");this.cause=a;return this},"Throwable");e(c$,"toString",function(){var a=this.getClass().getName(),b=this.getLocalizedMessage();
return null!=b?a+": "+b:a});c(c$,"printStackTrace",function(){System.err.println(this);for(var a=0;a<this.stackTrace.length;a++){var b=this.stackTrace[a],d=b.methodName.indexOf("(");("construct"!=b.methodName.substring(0,d).replace(/\s+/g,"")||null==b.nativeClazz||0>ra(b.nativeClazz,Throwable))&&System.err.println(b)}});c(c$,"printStackTrace",function(){this.printStackTrace()},"java.io.PrintStream");c(c$,"printStackTrace",function(){this.printStackTrace()},"java.io.PrintWriter");c(c$,"fillInStackTrace",
function(){this.stackTrace=[];for(var a=arguments.callee.caller,b=null,d=[],g=ea.length-1,c=!0;-1<g||null!=a;){var h=null;if(!c||a==ua||a==$||null==a){if(0>g)break;c=!0;b=ea[g].caller;h=ea[g].owner;g--}else b=a,null!=b.claxxOwner?h=b.claxxOwner:null!=b.exClazz&&(h=b.exClazz);a=new StackTraceElement(null!=h&&0!=h.__CLASS_NAME__.length?h.__CLASS_NAME__:"anonymous",(null==b.exName?"anonymous":b.exName)+" ("+sa(b.arguments)+")",null,-1);a.nativeClazz=h;this.stackTrace[this.stackTrace.length]=a;for(h=
0;h<d.length;h++)d[h]==b&&(a=new StackTraceElement("lost","missing",null,-3),a.nativeClazz=null,this.stackTrace[this.stackTrace.length]=a,c=!1);null!=b&&(d[d.length]=b);a=b.arguments.callee.caller}Clazz_initializingException=!1;return this});c(c$,"setStackTrace",function(a){a=a.clone();for(var b=0;b<a.length;b++)if(null==a[b])throw new NullPointerException("stackTrace["+b+"]");this.stackTrace=a},"~A");c$=E(function(){this.fileName=this.methodName=this.declaringClass=null;this.lineNumber=0;D(this,
arguments)},java.lang,"StackTraceElement",null,java.io.Serializable);x(c$,function(a,b,d,g){if(null==a||null==b)throw new NullPointerException;this.declaringClass=a;this.methodName=b;this.fileName=d;this.lineNumber=g},"~S,~S,~S,~N");e(c$,"equals",function(a){if(!X(a,StackTraceElement)||(null==this.methodName||null==a.methodName)||!this.getMethodName().equals(a.getMethodName())||!this.getClassName().equals(a.getClassName()))return!1;var b=this.getFileName();if(null==b){if(null!=a.getFileName())return!1}else if(!b.equals(a.getFileName()))return!1;
return this.getLineNumber()!=a.getLineNumber()?!1:!0},"~O");c(c$,"getClassName",function(){return null==this.declaringClass?"<unknown class>":this.declaringClass});c(c$,"getFileName",function(){return this.fileName});c(c$,"getLineNumber",function(){return this.lineNumber});c(c$,"getMethodName",function(){return null==this.methodName?"<unknown method>":this.methodName});e(c$,"hashCode",function(){return null==this.methodName?0:this.methodName.hashCode()^this.declaringClass.hashCode()});c(c$,"isNativeMethod",
function(){return-2==this.lineNumber});e(c$,"toString",function(){var a=new StringBuilder(80);a.append(this.getClassName());a.append(".");a.append(this.getMethodName());if(this.isNativeMethod())a.append("(Native Method)");else{var b=this.getFileName();if(null==b)a.append("(Unknown Source)");else{var d=this.getLineNumber();a.append("(");a.append(b);0<=d&&(a.append(":"),a.append(d));a.append(")")}}return a.toString()});c$=r(java.lang,"Error",Throwable);c$=r(java.lang,"LinkageError",Error);c$=r(java.lang,
"IncompatibleClassChangeError",LinkageError);c$=r(java.lang,"AbstractMethodError",IncompatibleClassChangeError);c$=r(java.lang,"AssertionError",Error);x(c$,function(a){z(this,AssertionError,[String.valueOf(a),X(a,Throwable)?a:null])},"~O");x(c$,function(a){this.construct(String.valueOf(a))},"~B");x(c$,function(a){this.construct(String.valueOf(a))},"~N");x(c$,function(a){this.construct(Integer.toString(a))},"~N");x(c$,function(a){this.construct(Long.toString(a))},"~N");x(c$,function(a){this.construct(Float.toString(a))},
"~N");x(c$,function(a){this.construct(Double.toString(a))},"~N");c$=r(java.lang,"ClassCircularityError",LinkageError);c$=r(java.lang,"ClassFormatError",LinkageError);c$=E(function(){this.exception=null;D(this,arguments)},java.lang,"ExceptionInInitializerError",LinkageError);x(c$,function(){z(this,ExceptionInInitializerError);this.initCause(null)});x(c$,function(a){z(this,ExceptionInInitializerError,[a]);this.initCause(null)},"~S");x(c$,function(a){z(this,ExceptionInInitializerError);this.exception=
a;this.initCause(a)},"Throwable");c(c$,"getException",function(){return this.exception});e(c$,"getCause",function(){return this.exception});c$=r(java.lang,"IllegalAccessError",IncompatibleClassChangeError);c$=r(java.lang,"InstantiationError",IncompatibleClassChangeError);c$=r(java.lang,"VirtualMachineError",Error);c$=r(java.lang,"InternalError",VirtualMachineError);c$=r(java.lang,"NoClassDefFoundError",LinkageError);c$=r(java.lang,"NoSuchFieldError",IncompatibleClassChangeError);c$=r(java.lang,"NoSuchMethodError",
IncompatibleClassChangeError);c$=r(java.lang,"OutOfMemoryError",VirtualMachineError);c$=r(java.lang,"StackOverflowError",VirtualMachineError);c$=r(java.lang,"UnknownError",VirtualMachineError);c$=r(java.lang,"UnsatisfiedLinkError",LinkageError);c$=r(java.lang,"UnsupportedClassVersionError",ClassFormatError);c$=r(java.lang,"VerifyError",LinkageError);c$=r(java.lang,"ThreadDeath",Error);x(c$,function(){z(this,ThreadDeath,[])});c$=r(java.lang,"Exception",Throwable);c$=r(java.lang,"RuntimeException",
Exception);c$=r(java.lang,"ArithmeticException",RuntimeException);c$=r(java.lang,"IndexOutOfBoundsException",RuntimeException);c$=r(java.lang,"ArrayIndexOutOfBoundsException",IndexOutOfBoundsException);x(c$,function(a){z(this,ArrayIndexOutOfBoundsException,["Array index out of range: "+a])},"~N");c$=r(java.lang,"ArrayStoreException",RuntimeException);c$=r(java.lang,"ClassCastException",RuntimeException);c$=E(function(){this.ex=null;D(this,arguments)},java.lang,"ClassNotFoundException",Exception);
x(c$,function(){z(this,ClassNotFoundException,[V("Throwable")])});x(c$,function(a){z(this,ClassNotFoundException,[a,null])},"~S");x(c$,function(a,b){z(this,ClassNotFoundException,[a]);this.ex=b},"~S,Throwable");c(c$,"getException",function(){return this.ex});e(c$,"getCause",function(){return this.ex});c$=r(java.lang,"CloneNotSupportedException",Exception);c$=r(java.lang,"IllegalAccessException",Exception);c$=r(java.lang,"IllegalArgumentException",RuntimeException);x(c$,function(a){z(this,IllegalArgumentException,
[null==a?null:a.toString(),a])},"Throwable");c$=r(java.lang,"IllegalMonitorStateException",RuntimeException);c$=r(java.lang,"IllegalStateException",RuntimeException);x(c$,function(a){z(this,IllegalStateException,[null==a?null:a.toString(),a])},"Throwable");c$=r(java.lang,"IllegalThreadStateException",IllegalArgumentException);c$=r(java.lang,"InstantiationException",Exception);c$=r(java.lang,"InterruptedException",Exception);c$=r(java.lang,"NegativeArraySizeException",RuntimeException);c$=r(java.lang,
"NoSuchFieldException",Exception);c$=r(java.lang,"NoSuchMethodException",Exception);c$=r(java.lang,"NullPointerException",RuntimeException);c$=r(java.lang,"NumberFormatException",IllegalArgumentException);c$=r(java.lang,"SecurityException",RuntimeException);x(c$,function(a){z(this,SecurityException,[null==a?null:a.toString(),a])},"Throwable");c$=r(java.lang,"StringIndexOutOfBoundsException",IndexOutOfBoundsException);x(c$,function(a){z(this,StringIndexOutOfBoundsException,["String index out of range: "+
a])},"~N");c$=r(java.lang,"UnsupportedOperationException",RuntimeException);x(c$,function(){z(this,UnsupportedOperationException,[])});x(c$,function(a){z(this,UnsupportedOperationException,[null==a?null:a.toString(),a])},"Throwable");c$=E(function(){this.target=null;D(this,arguments)},java.lang.reflect,"InvocationTargetException",Exception);x(c$,function(){z(this,java.lang.reflect.InvocationTargetException,[V("Throwable")])});x(c$,function(a){z(this,java.lang.reflect.InvocationTargetException,[null,
a]);this.target=a},"Throwable");x(c$,function(a,b){z(this,java.lang.reflect.InvocationTargetException,[b,a]);this.target=a},"Throwable,~S");c(c$,"getTargetException",function(){return this.target});e(c$,"getCause",function(){return this.target});c$=E(function(){this.undeclaredThrowable=null;D(this,arguments)},java.lang.reflect,"UndeclaredThrowableException",RuntimeException);x(c$,function(a){z(this,java.lang.reflect.UndeclaredThrowableException);this.undeclaredThrowable=a;this.initCause(a)},"Throwable");
x(c$,function(a,b){z(this,java.lang.reflect.UndeclaredThrowableException,[b]);this.undeclaredThrowable=a;this.initCause(a)},"Throwable,~S");c(c$,"getUndeclaredThrowable",function(){return this.undeclaredThrowable});e(c$,"getCause",function(){return this.undeclaredThrowable});c$=r(java.io,"IOException",Exception);c$=r(java.io,"CharConversionException",java.io.IOException);c$=r(java.io,"EOFException",java.io.IOException);c$=r(java.io,"FileNotFoundException",java.io.IOException);c$=E(function(){this.bytesTransferred=
0;D(this,arguments)},java.io,"InterruptedIOException",java.io.IOException);c$=r(java.io,"ObjectStreamException",java.io.IOException);c$=E(function(){this.classname=null;D(this,arguments)},java.io,"InvalidClassException",java.io.ObjectStreamException);x(c$,function(a,b){z(this,java.io.InvalidClassException,[b]);this.classname=a},"~S,~S");c(c$,"getMessage",function(){var a=$(this,java.io.InvalidClassException,"getMessage",[]);null!=this.classname&&(a=this.classname+"; "+a);return a});c$=r(java.io,"InvalidObjectException",
java.io.ObjectStreamException);c$=r(java.io,"NotActiveException",java.io.ObjectStreamException);c$=r(java.io,"NotSerializableException",java.io.ObjectStreamException);c$=E(function(){this.eof=!1;this.length=0;D(this,arguments)},java.io,"OptionalDataException",java.io.ObjectStreamException);c$=r(java.io,"StreamCorruptedException",java.io.ObjectStreamException);c$=r(java.io,"SyncFailedException",java.io.IOException);c$=r(java.io,"UnsupportedEncodingException",java.io.IOException);c$=r(java.io,"UTFDataFormatException",
java.io.IOException);c$=E(function(){this.detail=null;D(this,arguments)},java.io,"WriteAbortedException",java.io.ObjectStreamException);x(c$,function(a,b){z(this,java.io.WriteAbortedException,[a]);this.detail=b;this.initCause(b)},"~S,Exception");c(c$,"getMessage",function(){var a=$(this,java.io.WriteAbortedException,"getMessage",[]);null!=this.detail&&(a=a+"; "+this.detail.toString());return a});e(c$,"getCause",function(){return this.detail});c$=r(java.util,"ConcurrentModificationException",RuntimeException);
x(c$,function(){z(this,java.util.ConcurrentModificationException,[])});c$=r(java.util,"EmptyStackException",RuntimeException);c$=E(function(){this.key=this.className=null;D(this,arguments)},java.util,"MissingResourceException",RuntimeException);x(c$,function(a,b,d){z(this,java.util.MissingResourceException,[a]);this.className=b;this.key=d},"~S,~S,~S");c(c$,"getClassName",function(){return this.className});c(c$,"getKey",function(){return this.key});c$=r(java.util,"NoSuchElementException",RuntimeException);
c$=r(java.util,"TooManyListenersException",Exception);c$=r(java.lang,"Void");Y(c$,"TYPE",null);java.lang.Void.TYPE=java.lang.Void;C(java.lang.reflect,"GenericDeclaration");C(java.lang.reflect,"AnnotatedElement");c$=r(java.lang.reflect,"AccessibleObject",null,java.lang.reflect.AnnotatedElement);x(c$,function(){});c(c$,"isAccessible",function(){return!1});c$.setAccessible=c(c$,"setAccessible",function(){},"~A,~B");c(c$,"setAccessible",function(){},"~B");e(c$,"isAnnotationPresent",function(){return!1},
"Class");e(c$,"getDeclaredAnnotations",function(){return[]});e(c$,"getAnnotations",function(){return[]});e(c$,"getAnnotation",function(){return null},"Class");c$.marshallArguments=c(c$,"marshallArguments",function(){return null},"~A,~A");c(c$,"invokeV",function(){},"~O,~A");c(c$,"invokeL",function(){return null},"~O,~A");c(c$,"invokeI",function(){return 0},"~O,~A");c(c$,"invokeJ",function(){return 0},"~O,~A");c(c$,"invokeF",function(){return 0},"~O,~A");c(c$,"invokeD",function(){return 0},"~O,~A");
c$.emptyArgs=c$.prototype.emptyArgs=[];C(java.lang.reflect,"InvocationHandler");c$=C(java.lang.reflect,"Member");Y(c$,"PUBLIC",0,"DECLARED",1);c$=r(java.lang.reflect,"Modifier");x(c$,function(){});c$.isAbstract=c(c$,"isAbstract",function(a){return 0!=(a&1024)},"~N");c$.isFinal=c(c$,"isFinal",function(a){return 0!=(a&16)},"~N");c$.isInterface=c(c$,"isInterface",function(a){return 0!=(a&512)},"~N");c$.isNative=c(c$,"isNative",function(a){return 0!=(a&256)},"~N");c$.isPrivate=c(c$,"isPrivate",function(a){return 0!=
(a&2)},"~N");c$.isProtected=c(c$,"isProtected",function(a){return 0!=(a&4)},"~N");c$.isPublic=c(c$,"isPublic",function(a){return 0!=(a&1)},"~N");c$.isStatic=c(c$,"isStatic",function(a){return 0!=(a&8)},"~N");c$.isStrict=c(c$,"isStrict",function(a){return 0!=(a&2048)},"~N");c$.isSynchronized=c(c$,"isSynchronized",function(a){return 0!=(a&32)},"~N");c$.isTransient=c(c$,"isTransient",function(a){return 0!=(a&128)},"~N");c$.isVolatile=c(c$,"isVolatile",function(a){return 0!=(a&64)},"~N");c$.toString=
c(c$,"toString",function(a){var b=[];java.lang.reflect.Modifier.isPublic(a)&&(b[b.length]="public");java.lang.reflect.Modifier.isProtected(a)&&(b[b.length]="protected");java.lang.reflect.Modifier.isPrivate(a)&&(b[b.length]="private");java.lang.reflect.Modifier.isAbstract(a)&&(b[b.length]="abstract");java.lang.reflect.Modifier.isStatic(a)&&(b[b.length]="static");java.lang.reflect.Modifier.isFinal(a)&&(b[b.length]="final");java.lang.reflect.Modifier.isTransient(a)&&(b[b.length]="transient");java.lang.reflect.Modifier.isVolatile(a)&&
(b[b.length]="volatile");java.lang.reflect.Modifier.isSynchronized(a)&&(b[b.length]="synchronized");java.lang.reflect.Modifier.isNative(a)&&(b[b.length]="native");java.lang.reflect.Modifier.isStrict(a)&&(b[b.length]="strictfp");java.lang.reflect.Modifier.isInterface(a)&&(b[b.length]="interface");return 0<b.length?b.join(" "):""},"~N");Y(c$,"PUBLIC",1,"PRIVATE",2,"PROTECTED",4,"STATIC",8,"FINAL",16,"SYNCHRONIZED",32,"VOLATILE",64,"TRANSIENT",128,"NATIVE",256,"INTERFACE",512,"ABSTRACT",1024,"STRICT",
2048,"BRIDGE",64,"VARARGS",128,"SYNTHETIC",4096,"ANNOTATION",8192,"ENUM",16384);c$=E(function(){this.exceptionTypes=this.parameterTypes=this.clazz=null;this.modifiers=0;D(this,arguments)},java.lang.reflect,"Constructor",java.lang.reflect.AccessibleObject,[java.lang.reflect.GenericDeclaration,java.lang.reflect.Member]);x(c$,function(a,b,d,g){z(this,java.lang.reflect.Constructor,[]);this.clazz=a;this.parameterTypes=b;this.exceptionTypes=d;this.modifiers=g},"Class,~A,~A,~N");e(c$,"getTypeParameters",
function(){return null});c(c$,"toGenericString",function(){return null});c(c$,"getGenericParameterTypes",function(){return null});c(c$,"getGenericExceptionTypes",function(){return null});c(c$,"getParameterAnnotations",function(){return null});c(c$,"isVarArgs",function(){return!1});e(c$,"isSynthetic",function(){return!1});e(c$,"equals",function(a){if(null!=a&&X(a,java.lang.reflect.Constructor)&&this.getDeclaringClass()===a.getDeclaringClass()){var b=this.parameterTypes;a=a.parameterTypes;if(b.length==
a.length){for(var d=0;d<b.length;d++)if(b[d]!==a[d])return!1;return!0}}return!1},"~O");e(c$,"getDeclaringClass",function(){return this.clazz});c(c$,"getExceptionTypes",function(){return this.exceptionTypes});e(c$,"getModifiers",function(){return this.modifiers});e(c$,"getName",function(){return this.getDeclaringClass().getName()});c(c$,"getParameterTypes",function(){return this.parameterTypes});e(c$,"hashCode",function(){return this.getDeclaringClass().getName().hashCode()});c(c$,"newInstance",function(a){var b=
new this.clazz(ja);D(b,a);return b},"~A");e(c$,"toString",function(){return null});c$=r(java.lang.reflect,"Field",java.lang.reflect.AccessibleObject,java.lang.reflect.Member);e(c$,"isSynthetic",function(){return!1});c(c$,"toGenericString",function(){return null});c(c$,"isEnumConstant",function(){return!1});c(c$,"getGenericType",function(){return null});e(c$,"equals",function(){return!1},"~O");e(c$,"getDeclaringClass",function(){return null});e(c$,"getName",function(){return null});c(c$,"getType",
function(){return null});e(c$,"hashCode",function(){return 0});e(c$,"toString",function(){return null});c$=E(function(){this.exceptionTypes=this.parameterTypes=this.returnType=this.name=this.clazz=null;this.modifiers=0;D(this,arguments)},java.lang.reflect,"Method",java.lang.reflect.AccessibleObject,[java.lang.reflect.GenericDeclaration,java.lang.reflect.Member]);x(c$,function(a,b,d,g,c,h){z(this,java.lang.reflect.Method,[]);this.clazz=a;this.name=b;this.parameterTypes=d;this.returnType=g;this.exceptionTypes=
c;this.modifiers=h},"Class,~S,~A,Class,~A,~N");e(c$,"getTypeParameters",function(){return null});c(c$,"toGenericString",function(){return null});c(c$,"getGenericParameterTypes",function(){return null});c(c$,"getGenericExceptionTypes",function(){return null});c(c$,"getGenericReturnType",function(){return null});c(c$,"getParameterAnnotations",function(){return null});c(c$,"isVarArgs",function(){return!1});c(c$,"isBridge",function(){return!1});e(c$,"isSynthetic",function(){return!1});c(c$,"getDefaultValue",
function(){return null});e(c$,"equals",function(a){if(null!=a&&X(a,java.lang.reflect.Method)&&this.getDeclaringClass()===a.getDeclaringClass()&&this.getName()===a.getName()){var b=this.parameterTypes;a=a.parameterTypes;if(b.length==a.length){for(var d=0;d<b.length;d++)if(b[d]!==a[d])return!1;return!0}}return!1},"~O");e(c$,"getDeclaringClass",function(){return this.clazz});c(c$,"getExceptionTypes",function(){return this.exceptionTypes});e(c$,"getModifiers",function(){return this.modifiers});e(c$,"getName",
function(){return this.name});c(c$,"getParameterTypes",function(){return this.parameterTypes});c(c$,"getReturnType",function(){return this.returnType});e(c$,"hashCode",function(){return this.getDeclaringClass().getName().hashCode()^this.getName().hashCode()});c(c$,"invoke",function(a,b){var d=this.clazz.prototype[this.getName()];null==d&&(d=this.clazz[this.getName()]);null!=d&&d.apply(a,b)},"~O,~A");e(c$,"toString",function(){return null});Jmol._debugCode||(m("JSV.api"),F(JSV.api,"JSVAppletInterface"),
m("JSV.api"),F(JSV.api,"AppletFrame"),m("JSV.appletjs"),u(["JSV.api.AppletFrame","$.JSVAppletInterface"],"JSV.appletjs.JSVApplet","java.lang.Boolean java.net.URL java.util.Hashtable JU.PT JSV.app.JSVApp JSV.common.JSVersion JSV.js2d.JsPanel $.JsViewPanel J.util.Logger".split(" "),function(){c$=q(function(){this.viewer=this.app=null;this.isStandalone=!1;this.htParams=this.viewerOptions=null;s(this,arguments)},JSV.appletjs,"JSVApplet",null,[JSV.api.JSVAppletInterface,JSV.api.AppletFrame]);w(c$,function(a){null==
a&&(a=new java.util.Hashtable);this.viewerOptions=a;this.htParams=new java.util.Hashtable;var b;for(a=a.entrySet().iterator();a.hasNext()&&((b=a.next())||1);)this.htParams.put(b.getKey().toLowerCase(),b.getValue());this.init()},"java.util.Map");c(c$,"init",function(){this.app=new JSV.app.JSVApp(this,!0);this.initViewer();null!=this.app.appletReadyCallbackFunctionName&&null!=this.viewer.fullName&&this.callToJavaScript(this.app.appletReadyCallbackFunctionName,[this.viewer.appletID,this.viewer.fullName,
Boolean.TRUE,this])});c(c$,"initViewer",function(){this.viewer=this.app.viewer;this.setLogging();this.viewerOptions.remove("debug");var a=this.viewerOptions.get("display"),a=document.getElementById(a);this.viewer.setDisplay(a);J.util.Logger.info(this.getAppletInfo())});c(c$,"setLogging",function(){var a=this.getValue("logLevel",this.getBooleanValue("debug",!1)?"5":"4").charCodeAt(0)-48;4!=a&&System.out.println("setting logLevel="+a+' -- To change, use script "set logLevel [0-5]"');J.util.Logger.setLogLevel(a)});
c(c$,"getParameter",function(a){a=this.htParams.get(a.toLowerCase());return null==a?null:String.instantialize(a.toString())},"~S");c(c$,"getBooleanValue",function(a,b){var d=this.getValue(a,b?"true":"");return d.equalsIgnoreCase("true")||d.equalsIgnoreCase("on")||d.equalsIgnoreCase("yes")},"~S,~B");c(c$,"getValue",function(a,b){var d=this.getParameter(a);System.out.println("getValue "+a+" = "+d);return null!=d?d:b},"~S,~S");e(c$,"isPro",function(){return this.app.isPro()});e(c$,"isSigned",function(){return this.app.isSigned()});
e(c$,"finalize",function(){System.out.println("JSpecView "+this+" finalized")});c(c$,"destroy",function(){this.app.dispose();this.app=null});c(c$,"getParameter",function(a,b){return this.isStandalone?System.getProperty(a,b):null!=this.getParameter(a)?this.getParameter(a):b},"~S,~S");e(c$,"getAppletInfo",function(){return"JSpecView Applet "+JSV.common.JSVersion.VERSION});e(c$,"getSolnColour",function(){return this.app.getSolnColour()});e(c$,"getCoordinate",function(){return this.app.getCoordinate()});
e(c$,"loadInline",function(a){this.app.loadInline(a)},"~S");c(c$,"$export",function(a,b){return this.app.exportSpectrum(a,b)},"~S,~N");e(c$,"exportSpectrum",function(a,b){return this.app.exportSpectrum(a,b)},"~S,~N");e(c$,"setFilePath",function(a){this.app.setFilePath(a)},"~S");e(c$,"setSpectrumNumber",function(a){this.app.setSpectrumNumber(a)},"~N");e(c$,"toggleGrid",function(){this.app.toggleGrid()});e(c$,"toggleCoordinate",function(){this.app.toggleCoordinate()});e(c$,"toggleIntegration",function(){this.app.toggleIntegration()});
e(c$,"addHighlight",function(a,b,d,g,c,h){this.app.addHighlight(a,b,d,g,c,h)},"~N,~N,~N,~N,~N,~N");e(c$,"removeAllHighlights",function(){this.app.removeAllHighlights()});e(c$,"removeHighlight",function(a,b){this.app.removeHighlight(a,b)},"~N,~N");e(c$,"reversePlot",function(){this.app.reversePlot()});c(c$,"script",function(a){this.app.initParams(a)},"~S");e(c$,"runScript",function(a){this.app.runScript(a)},"~S");e(c$,"syncScript",function(a){this.app.syncScript(a)},"~S");e(c$,"writeStatus",function(a){this.app.writeStatus(a)},
"~S");e(c$,"getPropertyAsJavaObject",function(a){return this.app.getPropertyAsJavaObject(a)},"~S");e(c$,"getPropertyAsJSON",function(a){return this.app.getPropertyAsJSON(a)},"~S");e(c$,"runScriptNow",function(a){return this.app.runScriptNow(a)},"~S");e(c$,"setDropTargetListener",function(){},"~B,JSV.common.JSViewer");e(c$,"validateContent",function(){},"~N");e(c$,"addNewPanel",function(a){a.viewPanel=new JSV.js2d.JsViewPanel},"JSV.common.JSViewer");e(c$,"newWindow",function(){},"~B");e(c$,"callToJavaScript",
function(a,b){var d=JU.PT.split(a,".");try{for(var g=window[d[0]],c=1;c<d.length;c++)g=g[d[c]];return g(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9])}catch(h){System.out.println(a+" failed "+h)}},"~S,~A");e(c$,"setPanelVisible",function(){},"~B");e(c$,"getJSVPanel",function(a,b,d,g){return JSV.js2d.JsPanel.getPanelMany(a,b,d,g)},"JSV.common.JSViewer,JU.List,~N,~N");e(c$,"setVisible",function(){},"~B");e(c$,"getDocumentBase",function(){try{return new java.net.URL(V("java.net.URL"),this.viewerOptions.get("documentBase"),
null)}catch(a){if(v(a,java.net.MalformedURLException))return null;throw a;}});e(c$,"repaint",function(){});e(c$,"validate",function(){});e(c$,"doExitJmol",function(){});e(c$,"getApp",function(){return this.app})}),m("JSV.appletjs"),u(["JSV.appletjs.JSVApplet"],"JSV.appletjs.JSVAppletPro",["JSV.app.JSVAppPro"],function(){c$=q(function(){this.app0=null;s(this,arguments)},JSV.appletjs,"JSVAppletPro",JSV.appletjs.JSVApplet);e(c$,"init",function(){this.app=new JSV.app.JSVAppPro(this,!1);this.initViewer()});
e(c$,"isPro",function(){return!0});c(c$,"getAppletInfo",function(){return aa(this,JSV.appletjs.JSVAppletPro,"getAppletInfo",[])+" (PRO)"});e(c$,"script",function(a){this.runScript(a)},"~S");e(c$,"doExitJmol",function(){this.app0.setVisible(!0);this.app=this.app0})}),m("JSV.api"),F(JSV.api,"ScriptInterface"),m("JSV.api"),u(["JSV.api.JSVAppletInterface","$.ScriptInterface"],"JSV.api.JSVAppInterface",null,function(){F(JSV.api,"JSVAppInterface",[JSV.api.JSVAppletInterface,JSV.api.ScriptInterface])}),
m("JSV.api"),F(JSV.api,"PanelListener"),m("JSV.app"),u(["JSV.api.JSVAppInterface","$.PanelListener"],"JSV.app.JSVApp","java.lang.Boolean $.Double JU.List $.PT JSV.common.Coordinate $.JSVFileManager $.JSViewer $.PanelNode $.Parameters $.PeakPickEvent $.ScriptToken $.ScriptTokenizer $.SubSpecChangeEvent $.ZoomEvent JSV.source.FileReader JSV.util.JSVEscape J.util.Logger".split(" "),function(){c$=q(function(){this.appletFrame=null;this.scriptLevelCount=this.nViews=this.fileCount=0;this.isNewWindow=!1;
this.allowMenu=this.allowCompoundMenu=!0;this.loadImaginary=this.interfaceOverlaid=this.autoIntegrate=!1;this.obscureTitleFromUser=null;this.initialEndIndex=this.initialStartIndex=-1;this.returnFromJmolModel=this.prevPanel=this.viewer=this.syncCallbackFunctionName=this.peakCallbackFunctionName=this.loadFileCallbackFunctionName=this.coordCallbackFunctionName=this.appletReadyCallbackFunctionName=this.integrationRatios=null;s(this,arguments)},JSV.app,"JSVApp",null,[JSV.api.PanelListener,JSV.api.JSVAppInterface]);
w(c$,function(a,b){this.appletFrame=a;this.initViewer(b);this.init()},"JSV.api.AppletFrame,~B");c(c$,"initViewer",function(a){this.viewer=new JSV.common.JSViewer(this,!0,a);this.appletFrame.setDropTargetListener(this.isSigned(),this.viewer);a=this.appletFrame.getDocumentBase();JSV.common.JSVFileManager.setDocumentBase(this.viewer,a)},"~B");e(c$,"isPro",function(){return this.isSigned()});e(c$,"isSigned",function(){return!0});e(c$,"siSetCurrentSource",function(a){this.viewer.currentSource=a},"JSV.source.JDXSource");
e(c$,"siGetFileCount",function(){return this.fileCount});e(c$,"siSetFileCount",function(a){this.fileCount=a},"~N");e(c$,"siSetIntegrationRatios",function(a){this.integrationRatios=a},"~S");e(c$,"siGetIntegrationRatios",function(){return this.integrationRatios});c(c$,"getAppletFrame",function(){return this.appletFrame});e(c$,"siSetLoadImaginary",function(a){this.loadImaginary=a},"~B");e(c$,"siIncrementScriptLevelCount",function(a){return this.scriptLevelCount+=a},"~N");e(c$,"siIncrementViewCount",
function(a){return this.nViews+=a},"~N");c(c$,"dispose",function(){try{this.viewer.dispose()}catch(a){if(v(a,Exception))a.printStackTrace();else throw a;}});e(c$,"getPropertyAsJavaObject",function(a){return this.viewer.getPropertyAsJavaObject(a)},"~S");e(c$,"getPropertyAsJSON",function(a){return JU.PT.toJSON(null,this.getPropertyAsJavaObject(a))},"~S");e(c$,"getCoordinate",function(){return this.viewer.getCoordinate()});e(c$,"loadInline",function(a){this.siOpenDataOrFile(a,null,null,null,-1,-1,!0);
this.appletFrame.validateContent(3)},"~S");e(c$,"exportSpectrum",function(a,b){return this.viewer.$export(a,b)},"~S,~N");e(c$,"setFilePath",function(a){this.runScript("load "+JSV.util.JSVEscape.eS(a))},"~S");e(c$,"setSpectrumNumber",function(a){this.runScript(JSV.common.ScriptToken.SPECTRUMNUMBER+" "+a)},"~N");e(c$,"reversePlot",function(){this.toggle(JSV.common.ScriptToken.REVERSEPLOT)});e(c$,"toggleGrid",function(){this.toggle(JSV.common.ScriptToken.GRIDON)});e(c$,"toggleCoordinate",function(){this.toggle(JSV.common.ScriptToken.COORDINATESON)});
e(c$,"toggleIntegration",function(){this.toggle(JSV.common.ScriptToken.INTEGRATE)});c(c$,"toggle",function(a){null!=this.viewer.selectedPanel&&this.runScript(a+" TOGGLE")},"JSV.common.ScriptToken");e(c$,"addHighlight",function(a,b,d,g,c,h){this.viewer.addHighLight(a,b,d,g,c,h)},"~N,~N,~N,~N,~N,~N");e(c$,"removeAllHighlights",function(){this.viewer.removeAllHighlights()});e(c$,"removeHighlight",function(a,b){this.viewer.removeHighlight(a,b)},"~N,~N");e(c$,"syncScript",function(a){this.viewer.syncScript(a)},
"~S");e(c$,"writeStatus",function(a){J.util.Logger.info(a)},"~S");c(c$,"init",function(){this.initParams(this.appletFrame.getParameter("script"))});c(c$,"initParams",function(a){this.parseInitScript(a);this.newAppletPanel();this.viewer.setPopupMenu(this.allowMenu,this.viewer.parameters.getBoolean(JSV.common.ScriptToken.ENABLEZOOM));this.runScriptNow(a)},"~S");c(c$,"newAppletPanel",function(){J.util.Logger.info("newAppletPanel");this.appletFrame.addNewPanel(this.viewer)});e(c$,"siSendPanelChange",
function(a){a!==this.prevPanel&&(this.prevPanel=a,this.viewer.sendPanelChange(a))},"JSV.api.JSVPanel");e(c$,"siNewWindow",function(a,b){this.isNewWindow=a;b?null!=this.viewer.jsvpPopupMenu&&this.viewer.jsvpPopupMenu.setSelected("Window",!1):this.appletFrame.newWindow(a)},"~B,~B");e(c$,"repaint",function(){"undefined"!=typeof Jmol&&(Jmol._repaint&&this.viewer.applet)&&Jmol._repaint(this.viewer.applet,!0)});c(c$,"updateJS",function(){},"~N,~N");e(c$,"siValidateAndRepaint",function(){null!=this.viewer.selectedPanel&&
(this.viewer.selectedPanel.getPanelData().taintedAll=!0);this.appletFrame.validate();this.repaint()});e(c$,"siSyncLoad",function(a){this.newAppletPanel();J.util.Logger.info("JSVP syncLoad reading "+a);this.siOpenDataOrFile(null,null,null,a,-1,-1,!1);this.appletFrame.validateContent(3)},"~S");c(c$,"parseInitScript",function(a){null==a&&(a="");a=new JSV.common.ScriptTokenizer(a,!0);for(J.util.Logger.debugging&&J.util.Logger.info("Running in DEBUG mode");a.hasMoreTokens();){var b=a.nextToken(),d=new JSV.common.ScriptTokenizer(b,
!1),g=d.nextToken();g.equalsIgnoreCase("SET")&&(g=d.nextToken());var g=g.toUpperCase(),c=JSV.common.ScriptToken.getScriptToken(g),b=JSV.common.ScriptToken.getValue(c,d,b);J.util.Logger.info("KEY-> "+g+" VALUE-> "+b+" : "+c);try{switch(c){default:this.viewer.parameters.set(null,c,b);break;case JSV.common.ScriptToken.UNKNOWN:break;case JSV.common.ScriptToken.APPLETID:this.viewer.appletID=b;this.viewer.fullName=this.viewer.appletID+"__"+this.viewer.syncID+"__";"undefined"!=typeof Jmol&&(this.viewer.applet=
Jmol._applets[b]);break;case JSV.common.ScriptToken.APPLETREADYCALLBACKFUNCTIONNAME:this.appletReadyCallbackFunctionName=b;break;case JSV.common.ScriptToken.AUTOINTEGRATE:this.autoIntegrate=JSV.common.Parameters.isTrue(b);break;case JSV.common.ScriptToken.COMPOUNDMENUON:this.allowCompoundMenu=Boolean.parseBoolean(b);break;case JSV.common.ScriptToken.COORDCALLBACKFUNCTIONNAME:case JSV.common.ScriptToken.LOADFILECALLBACKFUNCTIONNAME:case JSV.common.ScriptToken.PEAKCALLBACKFUNCTIONNAME:case JSV.common.ScriptToken.SYNCCALLBACKFUNCTIONNAME:this.siExecSetCallback(c,
b);break;case JSV.common.ScriptToken.ENDINDEX:this.initialEndIndex=Integer.parseInt(b);break;case JSV.common.ScriptToken.INTERFACE:this.siExecSetInterface(b);break;case JSV.common.ScriptToken.IRMODE:this.viewer.setIRmode(b);break;case JSV.common.ScriptToken.MENUON:this.allowMenu=Boolean.parseBoolean(b);break;case JSV.common.ScriptToken.OBSCURE:null==this.obscureTitleFromUser&&(this.obscureTitleFromUser=Boolean.$valueOf(b));break;case JSV.common.ScriptToken.STARTINDEX:this.initialStartIndex=Integer.parseInt(b);
break;case JSV.common.ScriptToken.SYNCID:this.viewer.syncID=b,this.viewer.fullName=this.viewer.appletID+"__"+this.viewer.syncID+"__"}}catch(h){if(!v(h,Exception))throw h;}}},"~S");e(c$,"siOpenDataOrFile",function(a,b,d,g,c,h,j){a=this.viewer.openDataOrFile(a,b,d,g,c,h,j);-1!=a&&(0!=a?this.siSetSelectedPanel(null):(null!=this.viewer.jsvpPopupMenu&&this.viewer.jsvpPopupMenu.setCompoundMenu(this.viewer.panelNodes,this.allowCompoundMenu),J.util.Logger.info(this.appletFrame.getAppletInfo()+" File "+this.viewer.currentSource.getFilePath()+
" Loaded Successfully")))},"~S,~S,JU.List,~S,~N,~N,~B");e(c$,"siProcessCommand",function(a){this.viewer.runScriptNow(a)},"~S");e(c$,"runScriptNow",function(a){return this.viewer.runScriptNow(a)},"~S");c(c$,"checkCallbacks",function(){if(!(null==this.coordCallbackFunctionName&&null==this.peakCallbackFunctionName)){var a=new JSV.common.Coordinate,b=null==this.peakCallbackFunctionName?null:new JSV.common.Coordinate;if(this.viewer.selectedPanel.getPanelData().getPickedCoordinates(a,b)){var d=this.viewer.viewPanel.getCurrentPanelIndex();
null==b?this.appletFrame.callToJavaScript(this.coordCallbackFunctionName,[Double.$valueOf(a.getXVal()),Double.$valueOf(a.getYVal()),Integer.$valueOf(d+1)]):this.appletFrame.callToJavaScript(this.peakCallbackFunctionName,[Double.$valueOf(a.getXVal()),Double.$valueOf(a.getYVal()),Double.$valueOf(b.getXVal()),Double.$valueOf(b.getYVal()),Integer.$valueOf(d+1)])}}});e(c$,"siSetSelectedPanel",function(a){this.viewer.viewPanel.setSelectedPanel(a,this.viewer.panelNodes);this.viewer.selectedPanel=a;this.viewer.spectraTree.setSelectedPanel(this,
a);this.appletFrame.validate();null!=a&&(a.setEnabled(!0),a.setFocusable(!0))},"JSV.api.JSVPanel");c(c$,"doAdvanced",function(){},"~S");e(c$,"panelEvent",function(a){y(a,JSV.common.PeakPickEvent)?this.viewer.processPeakPickEvent(a,!1):y(a,JSV.common.ZoomEvent)||y(a,JSV.common.SubSpecChangeEvent)},"~O");e(c$,"siExecSetCallback",function(a,b){switch(a){case JSV.common.ScriptToken.LOADFILECALLBACKFUNCTIONNAME:this.loadFileCallbackFunctionName=b;break;case JSV.common.ScriptToken.PEAKCALLBACKFUNCTIONNAME:this.peakCallbackFunctionName=
b;break;case JSV.common.ScriptToken.SYNCCALLBACKFUNCTIONNAME:this.syncCallbackFunctionName=b;break;case JSV.common.ScriptToken.COORDCALLBACKFUNCTIONNAME:this.coordCallbackFunctionName=b}},"JSV.common.ScriptToken,~S");e(c$,"getSolnColour",function(){return this.viewer.getSolutionColor()});e(c$,"siExecClose",function(a){var b=!a.startsWith("!");b&&(a=a.substring(1));this.viewer.close(a);b||this.siValidateAndRepaint()},"~S");e(c$,"siExecLoad",function(a){this.viewer.load(a);if(null==this.viewer.selectedPanel)return null;
null!=this.loadFileCallbackFunctionName&&this.appletFrame.callToJavaScript(this.loadFileCallbackFunctionName,[this.viewer.appletID,a]);return null},"~S");e(c$,"siExecHidden",function(){},"~B");e(c$,"siExecSetInterface",function(a){this.interfaceOverlaid=a.equalsIgnoreCase("single")||a.equalsIgnoreCase("overlay")},"~S");e(c$,"siExecScriptComplete",function(){this.siValidateAndRepaint()},"~S,~B");e(c$,"siExecSetAutoIntegrate",function(a){this.autoIntegrate=a},"~B");e(c$,"syncToJmol",function(a){null!=
this.syncCallbackFunctionName&&(J.util.Logger.info("JSVApp.syncToJmol JSV>Jmol "+a),this.appletFrame.callToJavaScript(this.syncCallbackFunctionName,[this.viewer.fullName,a]))},"~S");e(c$,"setVisible",function(a){this.appletFrame.setPanelVisible(a)},"~B");e(c$,"siUpdateBoolean",function(){},"JSV.common.ScriptToken,~B");e(c$,"siCheckCallbacks",function(){this.checkCallbacks()},"~S");e(c$,"siSetNode",function(a){a.jsvp!==this.viewer.selectedPanel&&this.siSetSelectedPanel(a.jsvp);this.siSendPanelChange(a.jsvp);
this.appletFrame.validateContent(2);this.siValidateAndRepaint()},"JSV.common.PanelNode,~B");e(c$,"siCloseSource",function(a){this.viewer.closeSource(a)},"JSV.source.JDXSource");e(c$,"setCursor",function(a){this.viewer.apiPlatform.setCursor(a,this.appletFrame)},"~N");e(c$,"siGetAutoCombine",function(){return this.interfaceOverlaid});e(c$,"siCreateSource",function(a,b){return JSV.source.FileReader.createJDXSource(JSV.common.JSVFileManager.getBufferedReaderForString(a),b,this.obscureTitleFromUser===
Boolean.TRUE,this.loadImaginary,-1,-1)},"~S,~S,~N,~N");e(c$,"siGetNewJSVPanel2",function(a){a=this.appletFrame.getJSVPanel(this.viewer,a,this.initialStartIndex,this.initialEndIndex);this.initialEndIndex=this.initialStartIndex=-1;a.getPanelData().addListener(this);this.viewer.parameters.setFor(a,null,!0);return a},"JU.List");e(c$,"siGetNewJSVPanel",function(a){if(null==a)return this.initialEndIndex=this.initialStartIndex=-1,null;var b=new JU.List;b.addLast(a);a=this.appletFrame.getJSVPanel(this.viewer,
b,this.initialStartIndex,this.initialEndIndex);a.getPanelData().addListener(this);this.viewer.parameters.setFor(a,null,!0);return a},"JSV.common.JDXSpectrum");e(c$,"siGetNewPanelNode",function(a,b,d,g){return new JSV.common.PanelNode(a,b,d,g)},"~S,~S,JSV.source.JDXSource,JSV.api.JSVPanel");e(c$,"siGetAutoShowLegend",function(){return!1});e(c$,"siSetReturnFromJmolModel",function(a){this.returnFromJmolModel=a},"~S");e(c$,"siGetReturnFromJmolModel",function(){return this.returnFromJmolModel});e(c$,"siSetPropertiesFromPreferences",
function(a){this.autoIntegrate&&a.getPanelData().integrateAll(this.viewer.parameters)},"JSV.api.JSVPanel,~B");e(c$,"siSetLoaded",function(){},"~S,~S");e(c$,"siSetMenuEnables",function(){},"JSV.common.PanelNode,~B");e(c$,"siSetRecentURL",function(){},"~S");e(c$,"siUpdateRecentMenus",function(){},"~S");e(c$,"siExecTest",function(){this.loadInline('##TITLE= Acetophenone\n##JCAMP-DX= 5.01\n##DATA TYPE= MASS SPECTRUM\n##DATA CLASS= XYPOINTS\n##ORIGIN= UWI, Mona, JAMAICA\n##OWNER= public domain\n##LONGDATE= 2012/02/19 22:20:06.0416 -0600 $$ export date from JSpecView\n##BLOCK_ID= 4\n##$URL= http://wwwchem.uwimona.edu.jm/spectra\n##SPECTROMETER/DATA SYSTEM= Finnigan\n##.INSTRUMENT PARAMETERS= LOW RESOLUTION\n##.SPECTROMETER TYPE= TRAP\n##.INLET= GC\n##.IONIZATION MODE= EI+\n##MOLFORM= C 8 H 8 O\n##$MODELS= \n<Models>\n<ModelData id="acetophenone" type="MOL">\nacetophenone\nDSViewer          3D                             0\n\n17 17  0  0  0  0  0  0  0  0999 V2000\n-1.6931    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  1\n-0.2141    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  2\n2.5839    0.0872    0.0000 C   0  0  0  0  0  0  0  0  0  3\n0.4615    1.2373   -0.0005 C   0  0  0  0  0  0  0  0  0  4\n0.5257   -1.1809    0.0001 C   0  0  0  0  0  0  0  0  0  5\n1.9188   -1.1393    0.0005 C   0  0  0  0  0  0  0  0  0  6\n1.8539    1.2756   -0.0001 C   0  0  0  0  0  0  0  0  0  7\n-0.1262    2.1703   -0.0009 H   0  0  0  0  0  0  0  0  0  8\n0.0144   -2.1556    0.0002 H   0  0  0  0  0  0  0  0  0  9\n2.4947   -2.0764    0.0009 H   0  0  0  0  0  0  0  0  0 10\n2.3756    2.2439   -0.0001 H   0  0  0  0  0  0  0  0  0 11\n3.6838    0.1161    0.0003 H   0  0  0  0  0  0  0  0  0 12\n-2.3403    1.0639    0.0008 O   0  0  0  0  0  0  0  0  0 13\n-2.3832   -1.3197   -0.0010 C   0  0  0  0  0  0  0  0  0 14\n-2.0973   -1.8988    0.9105 H   0  0  0  0  0  0  0  0  0 15\n-2.0899   -1.9018   -0.9082 H   0  0  0  0  0  0  0  0  0 16\n-3.4920   -1.1799   -0.0059 H   0  0  0  0  0  0  0  0  0 17\n1  2  1  0  0  0\n2  5  4  0  0  0\n2  4  4  0  0  0\n3 12  1  0  0  0\n4  7  4  0  0  0\n5  6  4  0  0  0\n6 10  1  0  0  0\n6  3  4  0  0  0\n7  3  4  0  0  0\n7 11  1  0  0  0\n8  4  1  0  0  0\n9  5  1  0  0  0\n13  1  2  0  0  0\n14 16  1  0  0  0\n14  1  1  0  0  0\n14 15  1  0  0  0\n17 14  1  0  0  0\nM  END\n</ModelData>\n<ModelData id="2" type="MOL">\nacetophenone m/z 120\nDSViewer          3D                             0\n\n17 17  0  0  0  0  0  0  0  0999 V2000\n-1.6931    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  1\n-0.2141    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  2\n2.5839    0.0872    0.0000 C   0  0  0  0  0  0  0  0  0  3\n0.4615    1.2373   -0.0005 C   0  0  0  0  0  0  0  0  0  4\n0.5257   -1.1809    0.0001 C   0  0  0  0  0  0  0  0  0  5\n1.9188   -1.1393    0.0005 C   0  0  0  0  0  0  0  0  0  6\n1.8539    1.2756   -0.0001 C   0  0  0  0  0  0  0  0  0  7\n-0.1262    2.1703   -0.0009 H   0  0  0  0  0  0  0  0  0  8\n0.0144   -2.1556    0.0002 H   0  0  0  0  0  0  0  0  0  9\n2.4947   -2.0764    0.0009 H   0  0  0  0  0  0  0  0  0 10\n2.3756    2.2439   -0.0001 H   0  0  0  0  0  0  0  0  0 11\n3.6838    0.1161    0.0003 H   0  0  0  0  0  0  0  0  0 12\n-2.3403    1.0639    0.0008 O   0  0  0  0  0  0  0  0  0 13\n-2.3832   -1.3197   -0.0010 C   0  0  0  0  0  0  0  0  0 14\n-2.0973   -1.8988    0.9105 H   0  0  0  0  0  0  0  0  0 15\n-2.0899   -1.9018   -0.9082 H   0  0  0  0  0  0  0  0  0 16\n-3.4920   -1.1799   -0.0059 H   0  0  0  0  0  0  0  0  0 17\n1  2  1  0  0  0\n2  5  4  0  0  0\n2  4  4  0  0  0\n3 12  1  0  0  0\n4  7  4  0  0  0\n5  6  4  0  0  0\n6 10  1  0  0  0\n6  3  4  0  0  0\n7  3  4  0  0  0\n7 11  1  0  0  0\n8  4  1  0  0  0\n9  5  1  0  0  0\n13  1  2  0  0  0\n14 16  1  0  0  0\n14  1  1  0  0  0\n14 15  1  0  0  0\n17 14  1  0  0  0\nM  END\nacetophenone m/z 105\n\ncreated with ArgusLab version 4.0.1\n13 13  0  0  0  0  0  0  0  0  0 V2000\n-1.6931    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n-0.2141    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n2.5839    0.0872    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n0.4615    1.2373   -0.0005 C   0  0  0  0  0  0  0  0  0  0  0  0\n0.5257   -1.1809    0.0001 C   0  0  0  0  0  0  0  0  0  0  0  0\n1.9188   -1.1393    0.0005 C   0  0  0  0  0  0  0  0  0  0  0  0\n1.8539    1.2756   -0.0001 C   0  0  0  0  0  0  0  0  0  0  0  0\n-2.3403    1.0639    0.0008 O   0  0  0  0  0  0  0  0  0  0  0  0\n-0.1262    2.1703   -0.0009 H   0  0  0  0  0  0  0  0  0  0  0  0\n0.0144   -2.1556    0.0002 H   0  0  0  0  0  0  0  0  0  0  0  0\n2.4947   -2.0764    0.0009 H   0  0  0  0  0  0  0  0  0  0  0  0\n2.3756    2.2439   -0.0001 H   0  0  0  0  0  0  0  0  0  0  0  0\n3.6838    0.1161    0.0003 H   0  0  0  0  0  0  0  0  0  0  0  0\n1  2  1  0  0  0  0\n1  8  2  0  0  0  0\n2  4  4  0  0  0  0\n2  5  4  0  0  0  0\n3  6  4  0  0  0  0\n3  7  4  0  0  0  0\n3 13  1  0  0  0  0\n4  7  4  0  0  0  0\n4  9  1  0  0  0  0\n5  6  4  0  0  0  0\n5 10  1  0  0  0  0\n6 11  1  0  0  0  0\n7 12  1  0  0  0  0\nM  END\nacetophenone m/z 77\n\ncreated with ArgusLab version 4.0.1\n11 11  0  0  0  0  0  0  0  0  0 V2000\n-0.2141    0.0078    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n2.5839    0.0872    0.0000 C   0  0  0  0  0  0  0  0  0  0  0  0\n0.4615    1.2373   -0.0005 C   0  0  0  0  0  0  0  0  0  0  0  0\n0.5257   -1.1809    0.0001 C   0  0  0  0  0  0  0  0  0  0  0  0\n1.9188   -1.1393    0.0005 C   0  0  0  0  0  0  0  0  0  0  0  0\n1.8539    1.2756   -0.0001 C   0  0  0  0  0  0  0  0  0  0  0  0\n-0.1262    2.1703   -0.0009 H   0  0  0  0  0  0  0  0  0  0  0  0\n0.0144   -2.1556    0.0002 H   0  0  0  0  0  0  0  0  0  0  0  0\n2.4947   -2.0764    0.0009 H   0  0  0  0  0  0  0  0  0  0  0  0\n2.3756    2.2439   -0.0001 H   0  0  0  0  0  0  0  0  0  0  0  0\n3.6838    0.1161    0.0003 H   0  0  0  0  0  0  0  0  0  0  0  0\n1  3  4  0  0  0  0\n1  4  4  0  0  0  0\n2  5  4  0  0  0  0\n2  6  4  0  0  0  0\n2 11  1  0  0  0  0\n3  6  4  0  0  0  0\n3  7  1  0  0  0  0\n4  5  4  0  0  0  0\n4  8  1  0  0  0  0\n5  9  1  0  0  0  0\n6 10  1  0  0  0  0\nM  END\n</ModelData>\n</Models>\n##$PEAKS= \n<Peaks type="MS" xUnits="M/Z" yUnits="RELATIVE ABUNDANCE" >\n<PeakData id="1" title="molecular ion (~120)" peakShape="sharp" model="2.1"  xMax="121" xMin="119"  yMax="100" yMin="0" />\n<PeakData id="2" title="fragment 1 (~105)" peakShape="sharp" model="2.2"  xMax="106" xMin="104"  yMax="100" yMin="0" />\n<PeakData id="3" title="fragment 2 (~77)" peakShape="sharp" model="2.3"  xMax="78" xMin="76"  yMax="100" yMin="0" />\n</Peaks>\n##XUNITS= M/Z\n##YUNITS= RELATIVE ABUNDANCE\n##XFACTOR= 1E0\n##YFACTOR= 1E0\n##FIRSTX= 0\n##FIRSTY= 0\n##LASTX= 121\n##NPOINTS= 19\n##XYPOINTS= (XY..XY)\n0.000000, 0.000000 \n38.000000, 5.200000 \n39.000000, 8.000000 \n43.000000, 21.900000 \n50.000000, 20.200000 \n51.000000, 41.900000 \n52.000000, 4.000000 \n63.000000, 3.800000 \n74.000000, 6.600000 \n75.000000, 3.700000 \n76.000000, 4.600000 \n77.000000, 100.000000 \n78.000000, 10.400000 \n89.000000, 1.000000 \n91.000000, 1.000000 \n105.000000, 80.800000 \n106.000000, 6.000000 \n120.000000, 23.100000 \n121.000000, 2.000000 \n##END=')},
"~S");e(c$,"siSetFileAsString",function(a){return JSV.common.JSVFileManager.getFileAsString(a)},"~S");e(c$,"siCreateTree",function(a,b){return this.viewer.spectraTree.createTree(this,a,b)},"JSV.source.JDXSource,~A");e(c$,"siGetViewer",function(){return this.viewer});e(c$,"runScript",function(a){this.viewer.runScript(a)},"~S");e(c$,"getScriptQueue",function(){return this.viewer.scriptQueue})}),___date="$Date: 2013-11-29 20:58:25 -0600 (Fri, 29 Nov 2013) $",___svnRev="$LastChangedRevision: 1454 $",
___version="2.1.0",___JmolVersion="13.3.7_dev_2013.10.09",m("JSV.common"),c$=A(JSV.common,"JSVersion"),B(c$,"VERSION",null,"VERSION_SHORT",null),r=L=C=null,C=self.___version,L=self.___date,r=self.___svnRev,null!=L&&(L=L.substring(7,23)),null!=r&&(r=r.substring(22,27)),JSV.common.JSVersion.VERSION_SHORT=null!=C?C:"(Unknown version)",JSV.common.JSVersion.VERSION=JSV.common.JSVersion.VERSION_SHORT+"/SVN"+r+"/"+(null!=L?L:"(Unknown date)"),m("JSV.api"),u(["JSV.api.JSVViewPanel"],"JSV.api.JSVPanel",null,
function(){F(JSV.api,"JSVPanel",JSV.api.JSVViewPanel)}),m("JSV.js2d"),u(["JSV.api.JSVPanel"],"JSV.js2d.JsPanel",["javajs.awt.Font","JSV.common.PDFWriter","$.PanelData","J.util.Logger"],function(){c$=q(function(){this.name=this.viewer=this.mouse=this.pd=this.apiPlatform=null;s(this,arguments)},JSV.js2d,"JsPanel",null,JSV.api.JSVPanel);e(c$,"finalize",function(){J.util.Logger.info("JSVPanel "+this+" finalized")});e(c$,"getApiPlatform",function(){return this.apiPlatform});e(c$,"getPanelData",function(){return this.pd});
c$.getPanelOne=c(c$,"getPanelOne",function(a,b){var d=new JSV.js2d.JsPanel(a);d.pd.initOne(b);return d},"JSV.common.JSViewer,JSV.common.JDXSpectrum");c$.getPanelMany=c(c$,"getPanelMany",function(a,b,d,g){a=new JSV.js2d.JsPanel(a);a.pd.initMany(b,d,g);return a},"JSV.common.JSViewer,JU.List,~N,~N");w(c$,function(a){this.viewer=a;this.pd=new JSV.common.PanelData(this,a);this.apiPlatform=a.apiPlatform;this.mouse=this.apiPlatform.getMouseManager(0,this)},"JSV.common.JSViewer");e(c$,"getTitle",function(){return this.pd.getTitle()});
e(c$,"dispose",function(){null!=this.pd&&this.pd.dispose();this.pd=null;this.mouse.dispose()});e(c$,"setTitle",function(a){this.name=this.pd.title=a},"~S");c(c$,"setColorOrFont",function(a,b){this.pd.setColorOrFont(a,b)},"JSV.common.ColorParameters,JSV.common.ScriptToken");e(c$,"setBackgroundColor",function(){},"javajs.api.GenericColor");e(c$,"getInput",function(a,b,d){b=null;b=prompt(a,d);this.getFocusNow(!0);return b},"~S,~S,~S");e(c$,"showMessage",function(a){J.util.Logger.info(a);alert(a);this.getFocusNow(!0)},
"~S,~S");e(c$,"getFocusNow",function(){this.pd.dialogsToFront()},"~B");e(c$,"getFontFaceID",function(){return javajs.awt.Font.getFontFaceID("SansSerif")},"~S");e(c$,"doRepaint",function(a){this.pd.taintedAll=(new Boolean(this.pd.taintedAll|a)).valueOf();this.pd.isPrinting||this.viewer.requestRepaint()},"~B");c(c$,"paintComponent",function(a){if(!(null==this.viewer||null==this.pd||null==this.pd.graphSets||this.pd.isPrinting)){var b=null,b=a.canvas.topLayer.getContext("2d");this.pd.g2d=this.pd.g2d0;
this.pd.drawGraph(a,b,this.getWidth(),this.getHeight(),!1);this.viewer.repaintDone()}},"~O");e(c$,"printPanel",function(a,b,d){a.title=d;a.date=this.apiPlatform.getDateFormat(!0);this.pd.setPrint(a,"Helvetica");try{(new JSV.common.PDFWriter).createPdfDocument(this,a,b)}catch(g){if(v(g,Exception))this.showMessage(g.toString(),"creating PDF");else throw g;}finally{this.pd.setPrint(null,null)}},"JSV.common.PrintLayout,java.io.OutputStream,~S");e(c$,"saveImage",function(){return null},"~S,javajs.api.GenericFileInterface");
e(c$,"hasFocus",function(){return!1});e(c$,"repaint",function(){});e(c$,"setToolTipText",function(){},"~S");e(c$,"getHeight",function(){return this.viewer.getHeight()});e(c$,"getWidth",function(){return this.viewer.getWidth()});e(c$,"isEnabled",function(){return!1});e(c$,"isFocusable",function(){return!1});e(c$,"isVisible",function(){return!1});e(c$,"setEnabled",function(){},"~B");e(c$,"setFocusable",function(){},"~B");e(c$,"toString",function(){return this.pd.getSpectrumAt(0).toString()});e(c$,"processMouseEvent",
function(a,b,d,g,c){return this.mouse.processEvent(a,b,d,g,c)},"~N,~N,~N,~N,~N");e(c$,"processTwoPointGesture",function(a){this.mouse.processTwoPointGesture(a)},"~A")}),m("JSV.api"),F(JSV.api,"JSVMainPanel"),m("JSV.api"),F(JSV.api,"JSVViewPanel"),m("JSV.js2d"),u(["JSV.api.JSVMainPanel","$.JSVViewPanel"],"JSV.js2d.JsViewPanel",["JSV.common.Annotation"],function(){c$=q(function(){this.selectedPanel=null;this.currentPanelIndex=0;this.title=null;this.enabled=this.focusable=this.visible=!1;s(this,arguments)},
JSV.js2d,"JsViewPanel",null,[JSV.api.JSVViewPanel,JSV.api.JSVMainPanel]);e(c$,"getCurrentPanelIndex",function(){return this.currentPanelIndex});e(c$,"dispose",function(){});e(c$,"getTitle",function(){return this.title});e(c$,"setTitle",function(a){this.title=a},"~S");e(c$,"setSelectedPanel",function(a,b){a!==this.selectedPanel&&(this.selectedPanel=a);for(var d=b.size();0<=--d;){var g=b.get(d).jsvp;g===a?this.currentPanelIndex=d:(g.setEnabled(!1),g.setFocusable(!1),g.getPanelData().closeAllDialogsExcept(JSV.common.Annotation.AType.NONE))}this.markSelectedPanels(b);
this.visible=null!=a},"JSV.api.JSVPanel,JU.List");e(c$,"markSelectedPanels",function(a){for(var b=a.size();0<=--b;)a.get(b).isSelected=this.currentPanelIndex==b},"JU.List");c(c$,"getHeight",function(){return null==this.selectedPanel?0:this.selectedPanel.getHeight()});c(c$,"getWidth",function(){return null==this.selectedPanel?0:this.selectedPanel.getWidth()});e(c$,"isEnabled",function(){return this.enabled});e(c$,"isFocusable",function(){return this.focusable});e(c$,"isVisible",function(){return this.visible});
c(c$,"setEnabled",function(a){this.enabled=a},"~B");c(c$,"setFocusable",function(a){this.focusable=a},"~B")}),m("JSV.common"),c$=A(JSV.common,"CoordComparator",null,java.util.Comparator),e(c$,"compare",function(a,b){return a.getXVal()>b.getXVal()?1:a.getXVal()<b.getXVal()?-1:0},"JSV.common.Coordinate,JSV.common.Coordinate"),m("JSV.common"),u(["JSV.common.CoordComparator"],"JSV.common.Coordinate",["java.lang.Double","java.util.Arrays","$.StringTokenizer","JU.DF","$.List"],function(){c$=q(function(){this.yVal=
this.xVal=0;s(this,arguments)},JSV.common,"Coordinate");w(c$,function(){});c(c$,"set",function(a,b){this.xVal=a;this.yVal=b;return this},"~N,~N");c(c$,"getXVal",function(){return this.xVal});c(c$,"getYVal",function(){return this.yVal});c(c$,"getXString",function(){return JU.DF.formatDecimalTrimmed(this.xVal,8)});c(c$,"getYString",function(){return JU.DF.formatDecimalTrimmed(this.yVal,8)});c(c$,"setXVal",function(a){this.xVal=a},"~N");c(c$,"setYVal",function(a){this.yVal=a},"~N");c(c$,"copy",function(){return(new JSV.common.Coordinate).set(this.xVal,
this.yVal)});c(c$,"equals",function(a){return a.xVal==this.xVal&&a.yVal==this.yVal},"JSV.common.Coordinate");e(c$,"toString",function(){return"["+this.xVal+", "+this.yVal+"]"});c$.isYInRange=c(c$,"isYInRange",function(a,b,d){return JSV.common.Coordinate.getMinY(a,0,a.length)>=b&&JSV.common.Coordinate.getMaxY(a,0,a.length)>=d},"~A,~N,~N");c$.normalise=c(c$,"normalise",function(a,b,d){var g=Array(a.length),c=JSV.common.Coordinate.getMinY(a,0,a.length);d=(JSV.common.Coordinate.getMaxY(a,0,a.length)-
c)/(d-b);for(var h=0;h<a.length;h++)g[h]=(new JSV.common.Coordinate).set(a[h].getXVal(),(a[h].getYVal()-c)/d-b);return g},"~A,~N,~N");c$.reverse=c(c$,"reverse",function(a){for(var b=a.length,d=0;d<b;d++){var g=a[d];a[d]=a[--b];a[b]=g}return a},"~A");c$.parseDSV=c(c$,"parseDSV",function(a,b,d){var g,c=g=0,h=new JU.List;for(a=new java.util.StringTokenizer(a," \t\n\r\f,;");a.hasMoreTokens();)g=a.nextToken().trim(),c=a.nextToken().trim(),g=Double.parseDouble(g),c=Double.parseDouble(c),g=(new JSV.common.Coordinate).set(g*
b,c*d),h.addLast(g);b=Array(h.size());return h.toArray(b)},"~S,~N,~N");c$.deltaX=c(c$,"deltaX",function(a,b,d){return(a-b)/(d-1)},"~N,~N,~N");c$.removeScale=c(c$,"removeScale",function(a,b,d){JSV.common.Coordinate.applyScale(a,1/b,1/d)},"~A,~N,~N");c$.applyScale=c(c$,"applyScale",function(a,b,d){if(1!=b||1!=d)for(var g=0;g<a.length;g++)a[g].setXVal(a[g].getXVal()*b),a[g].setYVal(a[g].getYVal()*d)},"~A,~N,~N");c$.applyShiftReference=c(c$,"applyShiftReference",function(a,b,d,g,c,h,j){if(!(b>a.length||
0>b)){switch(j){case 0:c=a[a.length-b].getXVal()-c*h;break;case 1:c=d-c*h;break;case 2:c=g+c}for(d=0;d<a.length;d++)b=a[d],b.setXVal(b.getXVal()-c),a[d]=b}},"~A,~N,~N,~N,~N,~N,~N");c$.getMinX=c(c$,"getMinX",function(a,b,d){for(var g=1.7976931348623157E308;b<d;b++){var c=a[b].getXVal();c<g&&(g=c)}return g},"~A,~N,~N");c$.getMinX=c(c$,"getMinX",function(a,b){for(var d=1.7976931348623157E308,g=0;g<a.size();g++){var c=a.get(g).getXYCoords(),c=JSV.common.Coordinate.getMinX(c,b.getStartingPointIndex(g),
b.getEndingPointIndex(g));c<d&&(d=c)}return d},"JU.List,JSV.common.ViewData");c$.getMaxX=c(c$,"getMaxX",function(a,b,d){for(var g=-1.7976931348623157E308;b<d;b++){var c=a[b].getXVal();c>g&&(g=c)}return g},"~A,~N,~N");c$.getMaxX=c(c$,"getMaxX",function(a,b){for(var d=-1.7976931348623157E308,g=0;g<a.size();g++){var c=a.get(g).getXYCoords(),c=JSV.common.Coordinate.getMaxX(c,b.getStartingPointIndex(g),b.getEndingPointIndex(g));c>d&&(d=c)}return d},"JU.List,JSV.common.ViewData");c$.getMinY=c(c$,"getMinY",
function(a,b,d){for(var g=1.7976931348623157E308;b<d;b++){var c=a[b].getYVal();c<g&&(g=c)}return g},"~A,~N,~N");c$.getMinYUser=c(c$,"getMinYUser",function(a,b){for(var d=1.7976931348623157E308,g=0;g<a.size();g++){var c=a.get(g).getUserYFactor(),h=a.get(g).getYRef(),j=a.get(g).getXYCoords(),c=(JSV.common.Coordinate.getMinY(j,b.getStartingPointIndex(g),b.getEndingPointIndex(g))-h)*c+h;c<d&&(d=c)}return d},"JU.List,JSV.common.ViewData");c$.getMaxY=c(c$,"getMaxY",function(a,b,d){for(var g=-1.7976931348623157E308;b<
d;b++){var c=a[b].getYVal();c>g&&(g=c)}return g},"~A,~N,~N");c$.getMaxYUser=c(c$,"getMaxYUser",function(a,b){for(var d=-1.7976931348623157E308,g=0;g<a.size();g++){var c=a.get(g).getUserYFactor(),h=a.get(g).getYRef(),j=a.get(g).getXYCoords(),c=(JSV.common.Coordinate.getMaxY(j,b.getStartingPointIndex(g),b.getEndingPointIndex(g))-h)*c+h;c>d&&(d=c)}return d},"JU.List,JSV.common.ViewData");c$.getYValueAt=c(c$,"getYValueAt",function(a,b){var d=JSV.common.Coordinate.getNearestIndexForX(a,b);if(0==d||d==
a.length)return NaN;var g=a[d].getXVal(),c=a[d-1].getXVal(),h=a[d].getYVal(),d=a[d-1].getYVal();return g==c?h:d+(h-d)/(g-c)*(b-c)},"~A,~N");c$.intoRange=c(c$,"intoRange",function(a,b,d){return Math.max(Math.min(a,d),b)},"~N,~N,~N");c$.intoRange=c(c$,"intoRange",function(a,b,d){return Math.max(Math.min(a,d),b)},"~N,~N,~N");c$.getNearestIndexForX=c(c$,"getNearestIndexForX",function(a,b){var d=(new JSV.common.Coordinate).set(b,0),d=java.util.Arrays.binarySearch(a,d,JSV.common.Coordinate.c);0>d&&(d=-1-
d);return 0>d?0:d>a.length-1?a.length-1:d},"~A,~N");c$.findXForPeakNearest=c(c$,"findXForPeakNearest",function(a,b,d){b=JSV.common.Coordinate.getNearestIndexForX(a,b);for(d=d?-1:1;b<a.length-1&&0<d*(a[b+1].yVal-a[b].yVal);)b++;for(;1<=b&&0<d*(a[b-1].yVal-a[b].yVal);)b--;return 0==b||b==a.length-1?a[b].xVal:JSV.common.Coordinate.parabolicInterpolation(a,b)},"~A,~N,~B");c$.parabolicInterpolation=c(c$,"parabolicInterpolation",function(a,b){var d=a[b-1].yVal,g=a[b+1].yVal;return a[b].xVal+(d-g)/2/(d-
2*a[b].yVal+g)*(a[b+1].xVal-a[b].xVal)},"~A,~N");c$.getPickedCoordinates=c(c$,"getPickedCoordinates",function(a,b,d,g){if(null==b)return!1;var c=b.getXVal();d.setXVal(c);d.setYVal(b.getYVal());if(null==g)return!0;b=JSV.common.Coordinate.getNearestIndexForX(a,c);g.setXVal(a[b].getXVal());g.setYVal(a[b].getYVal());return!0},"~A,JSV.common.Coordinate,JSV.common.Coordinate,JSV.common.Coordinate");c$.shiftX=c(c$,"shiftX",function(a,b){for(var d=a.length;0<=--d;)a[d].xVal+=b},"~A,~N");c$.getNearestXWithYAbove=
c(c$,"getNearestXWithYAbove",function(a,b,d,g,c){b=JSV.common.Coordinate.getNearestIndexForX(a,b);var h=g?-1:1;if(c)for(;b<a.length&&0>h*(a[b].yVal-d);)b++;else for(;0<=b&&0>h*(a[b].yVal-d);)b--;return-1==b||b==a.length?NaN:JSV.common.Coordinate.findXForPeakNearest(a,a[b].getXVal(),g)},"~A,~N,~N,~B,~B");c$.c=c$.prototype.c=new JSV.common.CoordComparator}),m("JSV.common"),u(null,"JSV.common.JSVFileManager","java.io.BufferedInputStream $.BufferedReader $.IOException $.InputStreamReader $.StringReader java.net.URL java.util.Hashtable JU.AU $.Encoding $.PT $.SB JSV.common.JSVersion $.JSViewer JSV.util.JSVEscape J.util.Logger".split(" "),
function(){c$=A(JSV.common,"JSVFileManager");c(c$,"isApplet",function(){return null!=JSV.common.JSVFileManager.appletDocumentBase});c$.getFileAsString=c(c$,"getFileAsString",function(a){if(null==a)return null;var b,d=new JU.SB;try{b=JSV.common.JSVFileManager.getBufferedReaderFromName(a,null);for(var g;null!=(g=b.readLine());)d.append(g),d.appendC("\n");b.close()}catch(c){if(v(c,Exception))return null;throw c;}return d.toString()},"~S");c$.getBufferedReaderForInputStream=c(c$,"getBufferedReaderForInputStream",
function(a){try{return new java.io.BufferedReader(new java.io.InputStreamReader(a,"UTF-8"))}catch(b){if(v(b,java.io.UnsupportedEncodingException))return null;throw b;}},"java.io.InputStream");c$.getBufferedReaderForString=c(c$,"getBufferedReaderForString",function(a){return null==a?null:new java.io.BufferedReader(new java.io.StringReader(a))},"~S");c$.getBufferedReaderFromName=c(c$,"getBufferedReaderFromName",function(a,b){if(null==a)throw new java.io.IOException("Cannot find "+a);J.util.Logger.info("JSVFileManager getBufferedReaderFromName "+
a);var d=JSV.common.JSVFileManager.getFullPathName(a);J.util.Logger.info("JSVFileManager getBufferedReaderFromName "+d);return JSV.common.JSVFileManager.getUnzippedBufferedReaderFromName(d,b)},"~S,~S");c$.getFullPathName=c(c$,"getFullPathName",function(a){if(null==JSV.common.JSVFileManager.appletDocumentBase)return JSV.common.JSVFileManager.isURL(a)?(a=new java.net.URL(V("java.net.URL"),a,null),a.toString()):JSV.common.JSVFileManager.viewer.apiPlatform.newFile(a).getFullPath();if(1==a.indexOf(":\\")||
1==a.indexOf(":/"))a="file:///"+a;a=new java.net.URL(JSV.common.JSVFileManager.appletDocumentBase,a,null);return a.toString()},"~S");c$.isURL=c(c$,"isURL",function(a){for(var b=JSV.common.JSVFileManager.urlPrefixes.length;0<=--b;)if(a.startsWith(JSV.common.JSVFileManager.urlPrefixes[b]))return!0;return!1},"~S");c$.urlTypeIndex=c(c$,"urlTypeIndex",function(a){for(var b=0;b<JSV.common.JSVFileManager.urlPrefixes.length;++b)if(a.startsWith(JSV.common.JSVFileManager.urlPrefixes[b]))return b;return-1},
"~S");c$.isLocal=c(c$,"isLocal",function(a){if(null==a)return!1;a=JSV.common.JSVFileManager.urlTypeIndex(a);return 0>a||4==a},"~S");c$.getUnzippedBufferedReaderFromName=c(c$,"getUnzippedBufferedReaderFromName",function(a,b){var d=null;0<=a.indexOf("|")&&(d=JU.PT.split(a,"|"),null!=d&&0<d.length&&(a=d[0]));if(a.startsWith("http://SIMULATION/"))return JSV.common.JSVFileManager.getBufferedReaderForString(JSV.common.JSVFileManager.getSimulationJCampDX(a.substring(18)));if(JSV.common.JSVFileManager.viewer.isApplet)return d=
JSV.common.JSVFileManager.viewer.apiPlatform.getBufferedURLInputStream(new java.net.URL(V("java.net.URL"),a,null),null,null),y(d,JU.SB)||y(d,String)?new java.io.BufferedReader(new java.io.StringReader(d.toString())):JSV.common.JSVFileManager.isAB(d)?new java.io.BufferedReader(new java.io.StringReader(String.instantialize(d))):new java.io.BufferedReader(new java.io.InputStreamReader(d,"UTF-8"));var g=JSV.common.JSVFileManager.getInputStream(a,!0,null),c=new java.io.BufferedInputStream(g),g=c;if(JSV.common.JSVFileManager.isZipFile(c))return JSV.common.JSViewer.getInterface("JSV.util.JSVZipUtil").newJSVZipFileSequentialReader(g,
d,b);JSV.common.JSVFileManager.isGzip(c)&&(g=JSV.common.JSViewer.getInterface("JSV.util.JSVZipUtil").newGZIPInputStream(g));return new java.io.BufferedReader(new java.io.InputStreamReader(g,"UTF-8"))},"~S,~S");c$.isAB=c(c$,"isAB",function(a){return ta(a)},"~O");c$.isZipFile=c(c$,"isZipFile",function(a){var b=O(4,0);a.mark(5);var d=a.read(b,0,4);a.reset();return 4==d&&80==b[0]&&75==b[1]&&3==b[2]&&4==b[3]},"java.io.InputStream");c$.isGzip=c(c$,"isGzip",function(a){var b=O(4,0);a.mark(5);var d=a.read(b,
0,4);a.reset();return 4==d&&31==b[0]&&139==b[1]},"java.io.InputStream");c$.getStreamAsBytes=c(c$,"getStreamAsBytes",function(a,b){for(var d=O(1024,0),g=null==b?O(4096,0):null,c=0,h=0;0<(c=a.read(d,0,1024));)h+=c,null==b?(h>=g.length&&(g=JU.AU.ensureLengthByte(g,2*h)),System.arraycopy(d,0,g,h-c,c)):b.write(d,0,c);a.close();return null==b?JU.AU.arrayCopyByte(g,h):h+" bytes"},"java.io.BufferedInputStream,JU.OC");c$.postByteArray=c(c$,"postByteArray",function(a,b){var d=null;try{d=JSV.common.JSVFileManager.getInputStream(a,
!1,b)}catch(g){if(v(g,Exception))return g.toString();throw g;}if(y(d,String))return d;try{d=JSV.common.JSVFileManager.getStreamAsBytes(d,null)}catch(c){if(v(c,java.io.IOException))try{d.close()}catch(h){if(!v(h,java.io.IOException))throw h;}else throw c;}return null==d?"":JSV.common.JSVFileManager.fixUTF(d)},"~S,~A");c$.getUTFEncoding=c(c$,"getUTFEncoding",function(a){return 3<=a.length&&239==a[0]&&187==a[1]&&191==a[2]?JU.Encoding.UTF8:4<=a.length&&0==a[0]&&0==a[1]&&254==a[2]&&255==a[3]?JU.Encoding.UTF_32BE:
4<=a.length&&255==a[0]&&254==a[1]&&0==a[2]&&0==a[3]?JU.Encoding.UTF_32LE:2<=a.length&&255==a[0]&&254==a[1]?JU.Encoding.UTF_16LE:2<=a.length&&254==a[0]&&255==a[1]?JU.Encoding.UTF_16BE:JU.Encoding.NONE},"~A");c$.fixUTF=c(c$,"fixUTF",function(a){var b=JSV.common.JSVFileManager.getUTFEncoding(a);if(b!==JU.Encoding.NONE)try{var d=String.instantialize(a,b.name().$replace("_","-"));switch(b){case JU.Encoding.UTF8:case JU.Encoding.UTF_16BE:case JU.Encoding.UTF_16LE:d=d.substring(1)}return d}catch(g){if(v(g,
java.io.UnsupportedEncodingException))System.out.println(g);else throw g;}return String.instantialize(a)},"~A");c$.getInputStream=c(c$,"getInputStream",function(a,b,d){var g=JSV.common.JSVFileManager.isURL(a),c=null!=JSV.common.JSVFileManager.appletDocumentBase,h=null,h=null,j;if(g&&0<=(j=a.indexOf("?POST?")))h=a.substring(j+6),a=a.substring(0,j);if(c||g){if(a=new java.net.URL(JSV.common.JSVFileManager.appletDocumentBase,a,null),J.util.Logger.info("JSVFileManager opening URL "+a+(null==h?"":" with POST of "+
h.length+" bytes")),h=JSV.common.JSVFileManager.viewer.apiPlatform.getBufferedURLInputStream(a,d,h),y(h,String))return J.util.Logger.info("JSVFileManager could not get this URL:"+h),null}else b&&J.util.Logger.info("JSVFileManager opening file "+a),h=JSV.common.JSVFileManager.viewer.apiPlatform.getBufferedFileInputStream(a);return h},"~S,~B,~A");c$.getSimulationJCampDX=c(c$,"getSimulationJCampDX",function(a){null==JSV.common.JSVFileManager.htSimulate&&(JSV.common.JSVFileManager.htSimulate=new java.util.Hashtable);
var b=""+a.substring(a.indexOf("V2000")+1).hashCode(),d=JSV.common.JSVFileManager.htSimulate.get(b);if(null==d){System.out.println("creating "+a);var g=a.startsWith("MOL="),c;c=g?JU.PT.simpleReplace(a.substring(4),"\\n","\n"):JU.PT.simpleReplace(JSV.common.JSVFileManager.nciResolver,"%FILE",JU.PT.escapeUrl(a.substring(1)));J.util.Logger.info("JSVFileManager using \n"+c);c=JSV.common.JSVFileManager.getFileAsString(c);null==c&&J.util.Logger.info("no data returned");var h=c.indexOf("\n");c="/JSpecView "+
JSV.common.JSVersion.VERSION+c.substring(h);c=JU.PT.simpleReplace(c,"?","_");d=JSV.common.JSVFileManager.getFileAsString(JSV.common.JSVFileManager.nmrdbServer+c);System.out.println(d);d=JU.PT.simpleReplace(d,"\\r\\n","\n");d=JU.PT.simpleReplace(d,"\\t","\t");d=JU.PT.simpleReplace(d,"\\n","\n");c=JSV.common.JSVFileManager.getQuotedJSONAttribute(d,"molfile",null);var j=JSV.common.JSVFileManager.getQuotedJSONAttribute(d,"xml",null),j=JU.PT.simpleReplace(j,"</","\n</"),j=JU.PT.simpleReplace(j,"><",">\n<"),
j=JU.PT.simpleReplace(j,'\\"','"'),d=JSV.common.JSVFileManager.getQuotedJSONAttribute(d,"jcamp",null),d="##TITLE="+(g?"JMOL SIMULATION":a)+"\n"+d.substring(d.indexOf("\n##")+1);J.util.Logger.info(d.substring(0,d.indexOf("##XYDATA")+40)+"...");var h=d.indexOf("##."),e=a.indexOf("id='");g&&0<e&&(a=a.substring(e+4,(a+"'").indexOf("'",e+4)));d=d.substring(0,h)+"##$MODELS=\n<Models>\n<ModelData id="+JSV.util.JSVEscape.eS(a)+'\n type="MOL">\n'+c+"</ModelData>\n</Models>\n##$SIGNALS=\n"+j+"\n"+d.substring(h);
JSV.common.JSVFileManager.htSimulate.put(b,d)}return d},"~S");c$.getResource=c(c$,"getResource",function(a,b,d){var g=null;try{if(null==(g=a.getClass().getResource(b)))d[0]="Couldn't find file: "+b}catch(c){if(v(c,Exception))d[0]="Exception "+c.getMessage()+" in getResource "+b;else throw c;}return g},"~O,~S,~A");c$.getResourceString=c(c$,"getResourceString",function(a,b,d){a=JSV.common.JSVFileManager.getResource(a,b,d);if(null==a)return d[0]="Error loading resource "+b,null;if(y(a,String))return JSV.common.JSVFileManager.getFileAsString(a);
b=new JU.SB;try{for(var g=new java.io.BufferedReader(new java.io.InputStreamReader(a.getContent(),"UTF-8")),c;null!=(c=g.readLine());)b.append(c).append("\n");g.close()}catch(h){if(v(h,Exception))d[0]=h.getMessage();else throw h;}return b.toString()},"~O,~S,~A");c$.getJmolFilePath=c(c$,"getJmolFilePath",function(a){try{a=JSV.common.JSVFileManager.getFullPathName(a)}catch(b){if(v(b,java.net.MalformedURLException))return null;throw b;}return null==JSV.common.JSVFileManager.appletDocumentBase?a.$replace("\\",
"/"):a},"~S");c$.getName=c(c$,"getName",function(a){if(null==a)return"String"+ ++JSV.common.JSVFileManager.stringCount;if(JSV.common.JSVFileManager.isURL(a))try{if(a.startsWith("http://SIMULATION/")&&100<a.length)return a.substring(0,Math.min(a.length,30))+"...";var b=(new java.net.URL(V("java.net.URL"),a,null)).getFile();return b.substring(b.lastIndexOf("/")+1)}catch(d){if(v(d,java.net.MalformedURLException))return null;throw d;}return JSV.common.JSVFileManager.viewer.apiPlatform.newFile(a).getName()},
"~S");c$.getQuotedJSONAttribute=c(c$,"getQuotedJSONAttribute",function(a,b,d){null==d&&(d=b);d='"'+d+'":';b=a.indexOf('"'+b+'":');var g=a.indexOf(d,b);return 0>b||0>g?null:JU.PT.getQuotedStringAt(a,g+d.length)},"~S,~S,~S");c$.setDocumentBase=c(c$,"setDocumentBase",function(a,b){JSV.common.JSVFileManager.viewer=a;JSV.common.JSVFileManager.appletDocumentBase=b},"JSV.common.JSViewer,java.net.URL");B(c$,"SIMULATION_PROTOCOL","http://SIMULATION/","appletDocumentBase",null,"viewer",null,"jsDocumentBase",
"");c$.urlPrefixes=c$.prototype.urlPrefixes=["http:","https:","ftp:","http://SIMULATION/","file:"];B(c$,"URL_LOCAL",4,"nciResolver","http://cactus.nci.nih.gov/chemical/structure/%FILE/file?format=sdf&get3d=True","nmrdbServer","http://www.nmrdb.org/tools/jmol/predict.php?POST?molfile=","htSimulate",null,"stringCount",0)}),m("JSV.source"),u(["JU.List"],"JSV.source.JDXHeader",null,function(){c$=q(function(){this.title="";this.jcampdx="5.01";this.origin=this.dataClass=this.dataType="";this.owner="PUBLIC DOMAIN";
this.time=this.date=this.longDate="";this.headerTable=this.qualifiedType=null;s(this,arguments)},JSV.source,"JDXHeader");M(c$,function(){this.headerTable=new JU.List});c(c$,"setTitle",function(a){this.title=a},"~S");c(c$,"setJcampdx",function(a){this.jcampdx=a},"~S");c(c$,"setDataType",function(a){this.dataType=a},"~S");c(c$,"setDataClass",function(a){this.dataClass=a},"~S");c(c$,"setOrigin",function(a){this.origin=a},"~S");c(c$,"setOwner",function(a){this.owner=a},"~S");c(c$,"setLongDate",function(a){this.longDate=
a},"~S");c(c$,"setDate",function(a){this.date=a},"~S");c(c$,"setTime",function(a){this.time=a},"~S");c(c$,"getTitle",function(){return this.title});c$.getTypeName=c(c$,"getTypeName",function(a){a=a.toUpperCase();for(var b=0;b<JSV.source.JDXHeader.typeNames.length;b++)if(JSV.source.JDXHeader.typeNames[b].startsWith(a))return JSV.source.JDXHeader.typeNames[b].substring(18);return a},"~S");c(c$,"getQualifiedDataType",function(){return null==this.qualifiedType?this.qualifiedType=JSV.source.JDXHeader.getTypeName(this.dataType):
this.qualifiedType});c(c$,"getJcampdx",function(){return this.jcampdx});c(c$,"getDataType",function(){return this.dataType});c(c$,"getOrigin",function(){return this.origin});c(c$,"getOwner",function(){return this.owner});c(c$,"getLongDate",function(){return this.longDate});c(c$,"getDate",function(){return this.date});c(c$,"getTime",function(){return this.time});c(c$,"getDataClass",function(){return this.dataClass});c(c$,"setHeaderTable",function(a){this.headerTable=a},"JU.List");c(c$,"getHeaderTable",
function(){return this.headerTable});c(c$,"getHeaderRowDataAsArray",function(a,b){var d=Array((a?6:5)+this.headerTable.size()+b),g=0;d[g++]=["##TITLE",this.title];d[g++]=["##JCAMP-DX",this.jcampdx];d[g++]=["##DATA TYPE",this.dataType];a&&(d[g++]=["##DATA CLASS",this.dataClass]);d[g++]=["##ORIGIN",this.origin];d[g++]=["##OWNER",this.owner];for(var c=0;c<this.headerTable.size();c++)d[g++]=this.headerTable.get(c);return d},"~B,~N");B(c$,"typeNames","ND NMR SPECTRUM   NMR;NMR SPECTRUM      NMR;INFRARED SPECTRUM IR;MASS SPECTRUM     MS;RAMAN SPECTRUM    RAMAN;GAS CHROMATOGRAM  GC;UV/VIS SPECTRUM   UV/VIS".split(";"))}),
m("JSV.source"),u(["JSV.source.JDXHeader"],"JSV.source.JDXDataObject","java.lang.Character $.Double JU.DF $.PT JSV.common.Annotation $.Coordinate $.Integral JSV.exception.JSpecViewException J.util.Logger".split(" "),function(){c$=q(function(){this.filePathForwardSlash=this.filePath=null;this.blockID=0;this.fileLastX=this.fileFirstX=1.7976931348623157E308;this.nPointsFile=-1;this.yFactor=this.xFactor=1.7976931348623157E308;this.yUnits=this.xUnits=this.varName="";this.yLabel=this.xLabel=null;this.nH=
0;this.observedNucl="";this.observedFreq=1.7976931348623157E308;this.parent=null;this.offset=1.7976931348623157E308;this.dataPointNum=this.shiftRefType=-1;this.numDim=1;this.nucleusX=null;this.nucleusY="?";this.y2D=this.freq2dY=this.freq2dX=NaN;this.y2DUnits="";this.$isHZtoPPM=!1;this.xIncreases=!0;this.continuous=!1;this.xyCoords=null;this.deltaX=this.maxY=this.maxX=this.minY=this.minX=NaN;s(this,arguments)},JSV.source,"JDXDataObject",JSV.source.JDXHeader);c(c$,"setFilePath",function(a){null!=a&&
(this.filePath=a.trim(),this.filePathForwardSlash=this.filePath.$replace("\\","/"))},"~S");c(c$,"getFilePath",function(){return this.filePath});c(c$,"getFilePathForwardSlash",function(){return this.filePathForwardSlash});c(c$,"setBlockID",function(a){this.blockID=a},"~N");c(c$,"isImaginary",function(){return this.varName.contains("IMAG")});c(c$,"setXFactor",function(a){this.xFactor=a},"~N");c(c$,"getXFactor",function(){return this.xFactor});c(c$,"setYFactor",function(a){this.yFactor=a},"~N");c(c$,
"getYFactor",function(){return this.yFactor});c(c$,"checkRequiredTokens",function(){if(1.7976931348623157E308==this.fileFirstX)throw new JSV.exception.JSpecViewException("Error Reading Data Set: ##FIRST not found");if(1.7976931348623157E308==this.fileLastX)throw new JSV.exception.JSpecViewException("Error Reading Data Set: ##LASTX not found");if(-1==this.nPointsFile)throw new JSV.exception.JSpecViewException("Error Reading Data Set: ##NPOINTS not found");if(1.7976931348623157E308==this.xFactor)throw new JSV.exception.JSpecViewException("Error Reading Data Set: ##XFACTOR not found");
if(1.7976931348623157E308==this.yFactor)throw new JSV.exception.JSpecViewException("Error Reading Data Set: ##YFACTOR not found");});c(c$,"setXUnits",function(a){this.xUnits=a},"~S");c(c$,"getXUnits",function(){return this.xUnits});c(c$,"setYUnits",function(a){this.yUnits=a},"~S");c(c$,"getYUnits",function(){return this.yUnits});c(c$,"setXLabel",function(a){this.xLabel=a},"~S");c(c$,"setYLabel",function(a){this.yLabel=a},"~S");c(c$,"setObservedNucleus",function(a){this.observedNucl=a;1==this.numDim&&
(this.parent.nucleusX=this.nucleusX=JU.PT.trim(a,"[]^<>"))},"~S");c(c$,"setObservedFreq",function(a){this.observedFreq=a},"~N");c(c$,"getObservedFreq",function(){return this.observedFreq});c(c$,"is1D",function(){return 1==this.numDim});c(c$,"setY2D",function(a){this.y2D=a},"~N");c(c$,"getY2D",function(){return this.y2D});c(c$,"setY2DUnits",function(a){this.y2DUnits=a},"~S");c(c$,"getY2DPPM",function(){var a=this.y2D;this.y2DUnits.equals("HZ")&&(a/=this.freq2dY);return a});c(c$,"setNucleus",function(a,
b){b?this.nucleusX=a:this.nucleusY=a;var d;if(0<=this.observedNucl.indexOf(a))d=this.observedFreq;else{d=JSV.source.JDXDataObject.getGyroMagneticRatio(this.observedNucl);var g=JSV.source.JDXDataObject.getGyroMagneticRatio(a);d=this.observedFreq*g/d}b?this.freq2dX=d:this.freq2dY=d;J.util.Logger.info("Freq for "+a+" = "+d)},"~S,~B");c$.getGyroMagneticRatio=c(c$,"getGyroMagneticRatio",function(a){for(var b=0;b<a.length&&!Character.isDigit(a.charAt(b));)b++;b=JU.PT.parseInt(a.substring(b));for(a=0;a<
JSV.source.JDXDataObject.gyroData.length&&!(JSV.source.JDXDataObject.gyroData[a]>=b);a+=2);return JSV.source.JDXDataObject.gyroData[a]==b?JSV.source.JDXDataObject.gyroData[a+1]:NaN},"~S");c(c$,"isTransmittance",function(){var a=this.yUnits.toLowerCase();return a.equals("transmittance")||a.contains("trans")||a.equals("t")});c(c$,"isAbsorbance",function(){var a=this.yUnits.toLowerCase();return a.equals("absorbance")||a.contains("abs")||a.equals("a")});c(c$,"canSaveAsJDX",function(){return this.getDataClass().equals("XYDATA")});
c(c$,"canIntegrate",function(){return this.continuous&&(this.isHNMR()||this.isGC())&&this.is1D()});c(c$,"isAutoOverlayFromJmolClick",function(){return this.isGC()});c(c$,"isGC",function(){return this.dataType.startsWith("GC")});c(c$,"isMS",function(){return this.dataType.startsWith("MASS")||this.dataType.startsWith("MS")});c(c$,"isStackable",function(){return!this.isMS()});c(c$,"isScalable",function(){return!0});c(c$,"getYRef",function(){return!this.isTransmittance()?0:2>JSV.common.Coordinate.getMaxY(this.xyCoords,
0,this.xyCoords.length)?1:100});c(c$,"isInverted",function(){return this.isTransmittance()});c(c$,"canConvertTransAbs",function(){return this.continuous&&this.yUnits.toLowerCase().contains("abs")||this.yUnits.toLowerCase().contains("trans")});c(c$,"canShowSolutionColor",function(){return this.canConvertTransAbs()&&(this.xUnits.toLowerCase().contains("nanometer")||this.xUnits.equalsIgnoreCase("nm"))&&401>this.getFirstX()&&699<this.getLastX()});c(c$,"isHZtoPPM",function(){return this.$isHZtoPPM});c(c$,
"setHZtoPPM",function(a){this.$isHZtoPPM=a},"~B");c(c$,"setIncreasing",function(a){this.xIncreases=a},"~B");c(c$,"isXIncreasing",function(){return this.xIncreases});c(c$,"shouldDisplayXAxisIncreasing",function(){var a=this.dataType.toUpperCase(),b=this.xUnits.toUpperCase();return a.contains("NMR")&&!a.contains("FID")||a.contains("LINK")&&b.contains("CM")||a.startsWith("IR")||a.contains("INFRA")&&b.contains("CM")||a.contains("RAMAN")&&b.contains("CM")?!1:a.contains("VIS")&&b.contains("NANOMETERS")?
!0:this.xIncreases});c(c$,"setContinuous",function(a){this.continuous=a},"~B");c(c$,"isContinuous",function(){return this.continuous});c(c$,"getHeaderRowDataAsArray",function(){var a=8;1.7976931348623157E308!=this.observedFreq&&a++;""!==this.observedNucl&&a++;var b=this.getHeaderRowDataAsArray(!0,a),a=b.length-a;1.7976931348623157E308!=this.observedFreq&&(b[a++]=["##.OBSERVE FREQUENCY",""+this.observedFreq]);""!==this.observedNucl&&(b[a++]=["##.OBSERVE NUCLEUS",this.observedNucl]);b[a++]=["##XUNITS",
this.$isHZtoPPM?"HZ":this.xUnits];b[a++]=["##YUNITS",this.yUnits];var d=this.xIncreases?this.getFirstX():this.getLastX();b[a++]=["##FIRSTX",String.valueOf(this.isHZtoPPM()?d*this.observedFreq:d)];d=this.xIncreases?this.getLastX():this.getFirstX();b[a++]=["##FIRSTY",String.valueOf(this.xIncreases?this.getFirstY():this.getLastY())];b[a++]=["##LASTX",String.valueOf(this.isHZtoPPM()?d*this.observedFreq:d)];b[a++]=["##XFACTOR",String.valueOf(this.getXFactor())];b[a++]=["##YFACTOR",String.valueOf(this.getYFactor())];
b[a++]=["##NPOINTS",String.valueOf(this.getNumberOfPoints())];return b});c(c$,"getDefaultUnitPrecision",function(){return 2});c(c$,"setMeasurementText",function(a){var b=a.getValue();if(Double.isNaN(b))return"";var d=1,g="";if(this.isNMR())if(1==this.numDim)a=y(a,JSV.common.Integral),this.isHNMR()||a?a||(b*=this.observedFreq,g=" Hz"):(g=" ppm",d=2);else return"";return 0.1>b?"":JU.DF.formatDecimalDbl(b,d)+g},"JSV.common.Measurement");c(c$,"isNMR",function(){return 0<=this.dataType.toUpperCase().indexOf("NMR")});
c(c$,"isHNMR",function(){return this.isNMR()&&0<=this.observedNucl.toUpperCase().indexOf("H")});c(c$,"setXYCoords",function(a){this.xyCoords=a},"~A");c(c$,"getFirstX",function(){return this.xyCoords[0].getXVal()});c(c$,"getFirstY",function(){return this.xyCoords[0].getYVal()});c(c$,"getLastX",function(){return this.xyCoords[this.getNumberOfPoints()-1].getXVal()});c(c$,"getLastY",function(){return this.xyCoords[this.getNumberOfPoints()-1].getYVal()});c(c$,"getNumberOfPoints",function(){return this.xyCoords.length});
c(c$,"getMinX",function(){return Double.isNaN(this.minX)?this.minX=JSV.common.Coordinate.getMinX(this.xyCoords,0,this.xyCoords.length):this.minX});c(c$,"getMinY",function(){return Double.isNaN(this.minY)?this.minY=JSV.common.Coordinate.getMinY(this.xyCoords,0,this.xyCoords.length):this.minY});c(c$,"getMaxX",function(){return Double.isNaN(this.maxX)?this.maxX=JSV.common.Coordinate.getMaxX(this.xyCoords,0,this.xyCoords.length):this.maxX});c(c$,"getMaxY",function(){return Double.isNaN(this.maxY)?this.maxY=
JSV.common.Coordinate.getMaxY(this.xyCoords,0,this.xyCoords.length):this.maxY});c(c$,"getDeltaX",function(){return Double.isNaN(this.deltaX)?this.deltaX=JSV.common.Coordinate.deltaX(this.getLastX(),this.getFirstX(),this.getNumberOfPoints()):this.deltaX});c(c$,"copyTo",function(a){a.setTitle(this.title);a.setJcampdx(this.jcampdx);a.setOrigin(this.origin);a.setOwner(this.owner);a.setDataClass(this.dataClass);a.setDataType(this.dataType);a.setHeaderTable(this.headerTable);a.setXFactor(this.xFactor);
a.setYFactor(this.yFactor);a.setXUnits(this.xUnits);a.setYUnits(this.yUnits);a.setXLabel(this.xLabel);a.setYLabel(this.yLabel);a.setXYCoords(this.xyCoords);a.setContinuous(this.continuous);a.setIncreasing(this.xIncreases);a.observedFreq=this.observedFreq;a.observedNucl=this.observedNucl;a.offset=this.offset;a.dataPointNum=this.dataPointNum;a.shiftRefType=this.shiftRefType;a.$isHZtoPPM=this.$isHZtoPPM;a.numDim=this.numDim;a.nucleusX=this.nucleusX;a.nucleusY=this.nucleusY;a.freq2dX=this.freq2dX;a.freq2dY=
this.freq2dY;a.setFilePath(this.filePath);a.nH=this.nH},"JSV.source.JDXDataObject");c(c$,"getTypeLabel",function(){return this.isNMR()?this.nucleusX+"NMR":this.dataType});c(c$,"getDefaultAnnotationInfo",function(a){var b,d=this.isNMR();switch(a){case JSV.common.Annotation.AType.Integration:return[null,[1],null];case JSV.common.Annotation.AType.Measurements:return a=d?["Hz","ppm"]:[""],b=this.isHNMR()?[1,4]:[1,3],[a,b,Integer.$valueOf(0)];case JSV.common.Annotation.AType.PeakList:return a=d?["Hz",
"ppm"]:[""],b=this.isHNMR()?[1,2]:[1,1],[a,b,Integer.$valueOf(d?1:0)]}return null},"JSV.common.Annotation.AType");c(c$,"getPeakListArray",function(a,b,d){var g=a.getXVal();a=a.getYVal()/d;d=Math.abs(g-b[0]);b[0]=g;var c=d+b[1];b[1]=d;var h=c+b[2];b[2]=c;return this.isNMR()?[g,a,g*this.observedFreq,20<d*this.observedFreq?0:d*this.observedFreq,20<c*this.observedFreq?0:c*this.observedFreq,20<h*this.observedFreq?0:h*this.observedFreq]:[g,a]},"JSV.common.Measurement,~A,~N");B(c$,"ERROR",1.7976931348623157E308,
"SCALE_NONE",0,"SCALE_TOP",1,"SCALE_BOTTOM",2,"SCALE_TOP_BOTTOM",3,"gyroData",[1,42.5774806,2,6.53590131,3,45.4148,3,32.436,6,6.2661,7,16.5483,9,5.9842,10,4.5752,11,13.663,13,10.70839657,14,3.07770646,15,4.3172657,17,5.7742,19,40.07757016,21,3.3631,23,11.26952167,25,2.6083,27,11.1031,29,8.4655,31,17.2514409,33,3.2717,35,4.1765,37,3.4765,37,5.819,39,3.46,39,1.9893,40,2.4737,41,1.0919,43,2.8688,45,10.3591,47,2.4041,49,2.4048,50,4.2505,51,11.2133,53,2.4115,55,10.5763,57,1.3816,59,10.077,61,3.8114,63,
11.2982,65,12.103,67,2.6694,69,10.2478,71,13.0208,73,1.4897,75,7.315,77,8.1571,79,10.7042,81,11.5384,83,1.6442,85,4.1254,87,13.9811,87,1.8525,89,2.0949,91,3.9748,93,10.4523,95,2.7874,97,2.8463,99,9.6294,99,1.9553,101,2.1916,103,1.3477,105,1.957,107,1.7331,109,1.9924,111,9.0692,113,9.4871,113,9.3655,115,9.3856,115,14.0077,117,15.261,119,15.966,121,10.2551,123,5.5532,123,11.2349,125,13.5454,127,8.5778,129,11.8604,131,3.5159,133,5.6234,135,4.2582,137,4.7634,138,5.6615,139,6.0612,137,4.88,139,5.39,141,
2.37,141,13.0359,143,2.319,145,1.429,143,11.59,147,5.62,147,1.7748,149,14631,151,10.5856,153,4.6745,155,1.312,157,1.72,159,10.23,161,1.4654,163,2.0508,165,9.0883,167,1.2281,169,3.531,171,7.5261,173,2.073,175,4.8626,176,3.451,177,1.7282,179,1.0856,180,4.087,181,5.1627,183,1.7957,185,9.7176,187,9.817,187,0.9856,189,3.3536,191,0.7658,191,0.8319,195,9.2922,197,0.7406,199,7.7123,201,2.8469,203,24.7316,205,24.9749,207,9.034,209,6.963,209,11.7,211,9.16,223,5.95,223,1.3746,225,11.187,227,5.6,229,1.4,231,
10.2,235,0.83,237,9.57,239,3.09,243,4.6,1E100])}),m("JSV.common"),u(["java.lang.Enum","JSV.source.JDXDataObject","JU.List"],"JSV.common.JDXSpectrum","java.lang.Boolean $.Double java.util.Hashtable JSV.common.Coordinate $.Parameters $.PeakInfo JSV.source.JDXSourceStreamTokenizer J.util.Logger".split(" "),function(){c$=q(function(){this.highlightedPeak=this.selectedPeak=this.piUnitsY=this.piUnitsX=this.peakList=this.subSpectra=null;this.currentSubSpectrumIndex=this.specShift=0;this.$isForcedSubset=
!1;this.id="";this.convertedSpectrum=null;this.userYFactor=1;this.exportXAxisLeftToRight=!1;s(this,arguments)},JSV.common,"JDXSpectrum",JSV.source.JDXDataObject);M(c$,function(){this.peakList=new JU.List});e(c$,"finalize",function(){System.out.println("JDXSpectrum "+this+" finalized "+this.title)});c(c$,"dispose",function(){});c(c$,"isForcedSubset",function(){return this.$isForcedSubset});c(c$,"setId",function(a){this.id=a},"~S");w(c$,function(){I(this,JSV.common.JDXSpectrum,[]);this.headerTable=
new JU.List;this.xyCoords=[];this.parent=this});c(c$,"copy",function(){var a=new JSV.common.JDXSpectrum;this.copyTo(a);a.setPeakList(this.peakList,this.piUnitsX,null);return a});c(c$,"getXYCoords",function(){return this.getCurrentSubSpectrum().xyCoords});c(c$,"getPeakList",function(){return this.peakList});c(c$,"setPeakList",function(a,b,d){this.peakList=a;System.out.println("setting peaklist for "+this+" to "+a);null==this.peakList&&System.out.println("ohoh");this.piUnitsX=b;this.piUnitsY=d;for(b=
a.size();0<=--b;)this.peakList.get(b).spectrum=this;J.util.Logger.debugging&&J.util.Logger.info("Spectrum "+this.getTitle()+" peaks: "+a.size());return a.size()},"JU.List,~S,~S");c(c$,"selectPeakByFileIndex",function(a,b){if(null!=this.peakList&&0<this.peakList.size())for(var d=0;d<this.peakList.size();d++)if(this.peakList.get(d).checkFileIndex(a,b))return System.out.println("selecting peak in "+this+" "+this.peakList.get(d)),this.selectedPeak=this.peakList.get(d);return null},"~S,~S");c(c$,"selectPeakByFilePathTypeModel",
function(a,b,d){if(null!=this.peakList&&0<this.peakList.size())for(var g=0;g<this.peakList.size();g++)if(this.peakList.get(g).checkFileTypeModel(a,b,d))return System.out.println("selecting peak in "+this+" "+this.peakList.get(g)),this.selectedPeak=this.peakList.get(g);return null},"~S,~S,~S");c(c$,"matchesPeakTypeModel",function(a,b){if(null!=this.peakList&&0<this.peakList.size())for(var d=0;d<this.peakList.size();d++)if(this.peakList.get(d).checkTypeModel(a,b))return!0;return!1},"~S,~S");c(c$,"setSelectedPeak",
function(a){this.selectedPeak=a},"JSV.common.PeakInfo");c(c$,"setHighlightedPeak",function(a){this.highlightedPeak=a},"JSV.common.PeakInfo");c(c$,"getSelectedPeak",function(){return this.selectedPeak});c(c$,"getModelPeakInfoForAutoSelectOnLoad",function(){if(null!=this.peakList)for(var a=0;a<this.peakList.size();a++)if(this.peakList.get(a).autoSelectOnLoad())return this.peakList.get(a);return null});c(c$,"getAssociatedPeakInfo",function(a,b){this.selectedPeak=this.findPeakByCoord(a,b);return null==
this.selectedPeak?this.getBasePeakInfo():this.selectedPeak},"~N,JSV.common.Coordinate");c(c$,"findPeakByCoord",function(a,b){if(null!=b&&null!=this.peakList&&0<this.peakList.size()){for(var d=b.getXVal(),g=-1,c=1E100,h=0;h<this.peakList.size();h++){var j=this.peakList.get(h).checkRange(a,d);j<c&&(c=j,g=h)}if(0<=g)return this.peakList.get(g)}return null},"~N,JSV.common.Coordinate");c(c$,"getPeakTitle",function(){return null!=this.selectedPeak?this.selectedPeak.getTitle():null!=this.highlightedPeak?
this.highlightedPeak.getTitle():this.getTitleLabel()});c(c$,"getTitleLabel",function(){var a=null==this.peakList||0==this.peakList.size()?this.getQualifiedDataType():this.peakList.get(0).getType();return(null!=a&&0<a.length?a+" ":"")+this.getTitle()});c(c$,"setNextPeak",function(a,b){if(null==this.peakList||0==this.peakList.size())return-1;for(var d=a.getXVal()+1E-6*b,g=-1,c=-1,h=1.7976931348623157E308*b,j=0,e=this.peakList.size();0<=--e;){var l=this.peakList.get(e).getX();0<b?l>d&&l<h?(g=e,h=l):
l<d&&l-d<j&&(c=e,j=l-d):l<d&&l>h?(g=e,h=l):l>d&&l-d>j&&(c=e,j=l-d)}if(0>g){if(0>c)return-1;g=c}return g},"JSV.common.Coordinate,~N");c(c$,"getPercentYValueAt",function(a){return!this.isContinuous()?NaN:this.getYValueAt(a)},"~N");c(c$,"getYValueAt",function(a){return JSV.common.Coordinate.getYValueAt(this.xyCoords,a)},"~N");c(c$,"setUserYFactor",function(a){this.userYFactor=a},"~N");c(c$,"getUserYFactor",function(){return this.userYFactor});c(c$,"getConvertedSpectrum",function(){return this.convertedSpectrum});
c(c$,"setConvertedSpectrum",function(a){this.convertedSpectrum=a},"JSV.common.JDXSpectrum");c$.taConvert=c(c$,"taConvert",function(a,b){if(!a.isContinuous())return a;switch(b){case JSV.common.JDXSpectrum.IRMode.NO_CONVERT:return a;case JSV.common.JDXSpectrum.IRMode.TO_ABS:if(!a.isTransmittance())return a;break;case JSV.common.JDXSpectrum.IRMode.TO_TRANS:if(!a.isAbsorbance())return a}var d=a.getConvertedSpectrum();return null!=d?d:a.isAbsorbance()?JSV.common.JDXSpectrum.toT(a):JSV.common.JDXSpectrum.toA(a)},
"JSV.common.JDXSpectrum,JSV.common.JDXSpectrum.IRMode");c$.toT=c(c$,"toT",function(a){if(!a.isAbsorbance())return null;var b=a.getXYCoords(),d=Array(b.length);JSV.common.Coordinate.isYInRange(b,0,4)||(b=JSV.common.Coordinate.normalise(b,0,4));for(var g=0;g<b.length;g++)d[g]=(new JSV.common.Coordinate).set(b[g].getXVal(),JSV.common.JDXSpectrum.toTransmittance(b[g].getYVal()));return JSV.common.JDXSpectrum.newSpectrum(a,d,"TRANSMITTANCE")},"JSV.common.JDXSpectrum");c$.toA=c(c$,"toA",function(a){if(!a.isTransmittance())return null;
for(var b=a.getXYCoords(),d=Array(b.length),g=JSV.common.Coordinate.isYInRange(b,-2,2),c=0;c<b.length;c++)d[c]=(new JSV.common.Coordinate).set(b[c].getXVal(),JSV.common.JDXSpectrum.toAbsorbance(b[c].getYVal(),g));return JSV.common.JDXSpectrum.newSpectrum(a,d,"ABSORBANCE")},"JSV.common.JDXSpectrum");c$.newSpectrum=c(c$,"newSpectrum",function(a,b,d){var g=a.copy();g.setOrigin("JSpecView Converted");g.setOwner("JSpecView Generated");g.setXYCoords(b);g.setYUnits(d);a.setConvertedSpectrum(g);g.setConvertedSpectrum(a);
return g},"JSV.common.JDXSpectrum,~A,~S");c$.toAbsorbance=c(c$,"toAbsorbance",function(a,b){return Math.min(4,b?2-JSV.common.JDXSpectrum.log10(a):-JSV.common.JDXSpectrum.log10(a))},"~N,~B");c$.toTransmittance=c(c$,"toTransmittance",function(a){return 0>=a?1:Math.pow(10,-a)},"~N");c$.log10=c(c$,"log10",function(a){return Math.log(a)/Math.log(10)},"~N");c$.process=c(c$,"process",function(a,b){if(b===JSV.common.JDXSpectrum.IRMode.TO_ABS||b===JSV.common.JDXSpectrum.IRMode.TO_TRANS)for(var d=0;d<a.size();d++)a.set(d,
JSV.common.JDXSpectrum.taConvert(a.get(d),b));return!0},"JU.List,JSV.common.JDXSpectrum.IRMode");c(c$,"getSubSpectra",function(){return this.subSpectra});c(c$,"getCurrentSubSpectrum",function(){return null==this.subSpectra?this:this.subSpectra.get(this.currentSubSpectrumIndex)});c(c$,"advanceSubSpectrum",function(a){return this.setCurrentSubSpectrum(this.currentSubSpectrumIndex+a)},"~N");c(c$,"setCurrentSubSpectrum",function(a){return this.currentSubSpectrumIndex=JSV.common.Coordinate.intoRange(a,
0,this.subSpectra.size()-1)},"~N");c(c$,"addSubSpectrum",function(a,b){if(!b&&(2>this.numDim||this.blockID!=a.blockID)||!JSV.common.JDXSpectrum.allowSubSpec(this,a))return!1;this.$isForcedSubset=b;null==this.subSpectra&&(this.subSpectra=new JU.List,this.addSubSpectrum(this,!0));this.subSpectra.addLast(a);a.parent=this;return!0},"JSV.common.JDXSpectrum,~B");c(c$,"getSubIndex",function(){return null==this.subSpectra?-1:this.currentSubSpectrumIndex});c(c$,"setExportXAxisDirection",function(a){this.exportXAxisLeftToRight=
a},"~B");c(c$,"isExportXAxisLeftToRight",function(){return this.exportXAxisLeftToRight});c(c$,"getInfo",function(a){var b=new java.util.Hashtable;if("id".equalsIgnoreCase(a))return b.put(a,this.id),b;b.put("id",this.id);JSV.common.Parameters.putInfo(a,b,"specShift",Double.$valueOf(this.specShift));var d="header".equals(a);if(!d&&null!=a)for(var g=this.headerTable.size();0<=--g;){var c=this.headerTable.get(g);if(c[0].equalsIgnoreCase(a)||c[2].equalsIgnoreCase(a))return b.put(a,c[1]),b}for(var c=new java.util.Hashtable,
h=this.getHeaderRowDataAsArray(),g=0;g<h.length;g++){var j=JSV.source.JDXSourceStreamTokenizer.cleanLabel(h[g][0]);if(!(null!=a&&!d&&!j.equals(a))){var e=JSV.common.JDXSpectrum.fixInfoValue(h[g][1]);if(null==a){var l=new java.util.Hashtable;l.put("value",e);l.put("index",Integer.$valueOf(g+1));b.put(j,l)}else b.put(j,e)}}0<c.size()&&b.put("header",c);d||(JSV.common.Parameters.putInfo(a,b,"titleLabel",this.getTitleLabel()),JSV.common.Parameters.putInfo(a,b,"type",this.getDataType()),JSV.common.Parameters.putInfo(a,
b,"isHZToPPM",Boolean.$valueOf(this.$isHZtoPPM)),JSV.common.Parameters.putInfo(a,b,"subSpectrumCount",Integer.$valueOf(null==this.subSpectra?0:this.subSpectra.size())));return b},"~S");c$.fixInfoValue=c(c$,"fixInfoValue",function(a){try{return Integer.$valueOf(a)}catch(b){if(!v(b,Exception))throw b;}try{return Double.$valueOf(a)}catch(d){if(!v(d,Exception))throw d;}return a},"~S");e(c$,"toString",function(){return this.getTitleLabel()});c(c$,"findMatchingPeakInfo",function(a){for(var b=0;b<this.peakList.size();b++)if(this.peakList.get(b).checkTypeMatch(a))return this.peakList.get(b);
return null},"JSV.common.PeakInfo");c(c$,"getBasePeakInfo",function(){return 0==this.peakList.size()?new JSV.common.PeakInfo:new JSV.common.PeakInfo(' baseModel="" '+this.peakList.get(0))});c(c$,"getAxisLabel",function(a){var b=a?this.piUnitsX:this.piUnitsY;null==b&&(b=a?this.xLabel:this.yLabel);null==b&&(b=a?this.xUnits:this.yUnits);return null==b?"":b.equalsIgnoreCase("WAVENUMBERS")?"1/cm":b.equalsIgnoreCase("nanometers")?"nm":b},"~B");c(c$,"findXForPeakNearest",function(a){return JSV.common.Coordinate.findXForPeakNearest(this.xyCoords,
a,this.isInverted())},"~N");c(c$,"addSpecShift",function(a){if(0!=a&&(this.specShift+=a,JSV.common.Coordinate.shiftX(this.xyCoords,a),null!=this.subSpectra))for(var b=this.subSpectra.size();0<=--b;){var d=this.subSpectra.get(b);d!==this&&d!==this.parent&&d.addSpecShift(a)}return this.specShift},"~N");c$.allowSubSpec=c(c$,"allowSubSpec",function(a,b){return a.is1D()==b.is1D()&&a.xUnits.equalsIgnoreCase(b.xUnits)&&a.isHNMR()==b.isHNMR()},"JSV.common.JDXSpectrum,JSV.common.JDXSpectrum");c$.areXScalesCompatible=
c(c$,"areXScalesCompatible",function(a,b,d,g){var c=a.isNMR();if(c!=b.isNMR()||!g&&!a.xUnits.equalsIgnoreCase(b.xUnits))return!1;if(d){if(a.is1D()!=b.is1D())return!1}else if(g){if(!c)return!0}else if(!a.is1D()||!b.is1D())return!1;return!c||b.is1D()&&a.parent.nucleusX.equals(b.parent.nucleusX)},"JSV.common.JDXSpectrum,JSV.common.JDXSpectrum,~B,~B");c$.areLinkableX=c(c$,"areLinkableX",function(a,b){return a.isNMR()&&b.isNMR()&&a.nucleusX.equals(b.nucleusX)},"JSV.common.JDXSpectrum,JSV.common.JDXSpectrum");
c$.areLinkableY=c(c$,"areLinkableY",function(a,b){return a.isNMR()&&b.isNMR()&&a.nucleusX.equals(b.nucleusY)},"JSV.common.JDXSpectrum,JSV.common.JDXSpectrum");c(c$,"setNHydrogens",function(a){this.nH=a},"~N");R();c$=A(JSV.common.JDXSpectrum,"IRMode",Enum);c$.getMode=c(c$,"getMode",function(a){switch(null==a?"I":a.toUpperCase().charAt(0)){case "A":return JSV.common.JDXSpectrum.IRMode.TO_ABS;case "T":return a.equalsIgnoreCase("TOGGLE")?JSV.common.JDXSpectrum.IRMode.TOGGLE:JSV.common.JDXSpectrum.IRMode.TO_TRANS;
case "N":return JSV.common.JDXSpectrum.IRMode.NO_CONVERT;default:return JSV.common.JDXSpectrum.IRMode.TOGGLE}},"~S");k(c$,"NO_CONVERT",0,[]);k(c$,"TO_TRANS",1,[]);k(c$,"TO_ABS",2,[]);k(c$,"TOGGLE",3,[]);c$=Q();B(c$,"MAXABS",4)}),m("JSV.common"),u(["javajs.api.BytePoster","$.JSInterface","$.PlatformViewer","javajs.awt.Dimension","JSV.common.JDXSpectrum"],"JSV.common.JSViewer","java.lang.Boolean $.Double $.Float $.Thread java.net.URL java.util.Hashtable JU.List $.OC $.PT $.SB JSV.common.Annotation $.ExportType $.JSVFileManager $.PanelData $.PanelNode $.Parameters $.PeakInfo $.PrintLayout $.RepaintManager $.ScriptToken $.ScriptTokenizer JSV.source.JDXSource JSV.tree.SimpleTree JSV.util.JSVEscape J.util.Logger".split(" "),
function(){c$=q(function(){this.irMode=this.overlayLegendDialog=this.viewDialog=this.dialogManager=this.jsvpPopupMenu=this.fileHelper=this.scriptQueue=this.properties=this.viewPanel=this.selectedPanel=this.repaintManager=this.parameters=this.panelNodes=this.currentSource=this.spectraTree=this.g2d=this.si=null;this.isSigned=this.isJS=this.isApplet=this.isSingleThreaded=!1;this.recentScript="";this.display=this.applet=this.syncID=this.fullName=this.appletID=null;this.maximumSize=2147483647;this.apiPlatform=
this.dimScreen=null;this.popupZoomEnabled=this.popupAllowMenu=!0;this.overlayLegendVisible=!1;this.recentStackPercent=5;this.offWindowFrame=this.lastPrintLayout=null;s(this,arguments)},JSV.common,"JSViewer",null,[javajs.api.PlatformViewer,javajs.api.JSInterface,javajs.api.BytePoster]);M(c$,function(){this.irMode=JSV.common.JDXSpectrum.IRMode.NO_CONVERT;this.dimScreen=new javajs.awt.Dimension(0,0)});c(c$,"setProperty",function(a,b){null!=this.properties&&this.properties.setProperty(a,b)},"~S,~S");
c(c$,"setNode",function(a,b){this.si.siSetNode(a,b)},"JSV.common.PanelNode,~B");w(c$,function(a,b,d){this.si=a;this.isJS=(this.isApplet=b)&&d;this.isSigned=a.isSigned();this.apiPlatform=this.getPlatformInterface("Platform");this.apiPlatform.setViewer(this,this.display);this.g2d=this.getPlatformInterface("G2D");this.spectraTree=new JSV.tree.SimpleTree(this);this.parameters=this.getPlatformInterface("Parameters");this.parameters.setName("applet");this.fileHelper=this.getPlatformInterface("FileHelper").set(this);
this.isSingleThreaded=this.apiPlatform.isSingleThreaded();this.panelNodes=new JU.List;this.repaintManager=new JSV.common.RepaintManager(this);b||this.setPopupMenu(!0,!0)},"JSV.api.ScriptInterface,~B,~B");c(c$,"setPopupMenu",function(a,b){this.popupAllowMenu=a;this.popupZoomEnabled=b},"~B,~B");c(c$,"showMenu",function(a,b){if(null==this.jsvpPopupMenu)try{this.jsvpPopupMenu=this.getPlatformInterface("Popup"),this.jsvpPopupMenu.jpiInitialize(this,this.isApplet?"appletMenu":"appMenu"),this.jsvpPopupMenu.setEnabled(this.popupAllowMenu,
this.popupZoomEnabled)}catch(d){if(v(d,Exception)){System.out.println(d+" initializing popup menu");return}throw d;}this.jsvpPopupMenu.jpiShow(a,b)},"~N,~N");c(c$,"runScriptNow",function(a){this.si.siIncrementViewCount(1);null==a&&(a="");a=a.trim();a.startsWith("!")&&(a=a.substring(1).trim());System.out.println("RUNSCRIPT "+a);var b=!0,d=10;a=new JSV.common.ScriptTokenizer(a,!0);for(var g=null;a.hasMoreTokens()&&0<d&&b;){var c=a.nextToken(),h=new JSV.common.ScriptTokenizer(c,!1),j=JSV.common.ScriptToken.getKey(h);
if(null!=j){var e=JSV.common.ScriptToken.getScriptToken(j),c=JSV.common.ScriptToken.getValue(e,h,c);System.out.println("KEY-> "+j+" VALUE-> "+c+" : "+e);try{switch(e){case JSV.common.ScriptToken.UNKNOWN:J.util.Logger.info("Unrecognized parameter: "+j);--d;break;default:if(null==this.selectedPanel)break;this.parameters.set(this.pd(),e,c);this.si.siUpdateBoolean(e,JSV.common.Parameters.isTrue(c));break;case JSV.common.ScriptToken.PEAKCALLBACKFUNCTIONNAME:case JSV.common.ScriptToken.SYNCCALLBACKFUNCTIONNAME:case JSV.common.ScriptToken.COORDCALLBACKFUNCTIONNAME:case JSV.common.ScriptToken.LOADFILECALLBACKFUNCTIONNAME:this.si.siExecSetCallback(e,
c);break;case JSV.common.ScriptToken.AUTOINTEGRATE:this.si.siExecSetAutoIntegrate(JSV.common.Parameters.isTrue(c));break;case JSV.common.ScriptToken.CLOSE:this.si.siExecClose(c);break;case JSV.common.ScriptToken.DEBUG:J.util.Logger.setLogLevel(c.toLowerCase().equals("high")?6:JSV.common.Parameters.isTrue(c)?5:4);break;case JSV.common.ScriptToken.GETPROPERTY:var l=null==this.selectedPanel?null:this.getPropertyAsJavaObject(c);null!=l&&this.selectedPanel.showMessage(JU.PT.toJSON(null,l),c);break;case JSV.common.ScriptToken.HIDDEN:this.si.siExecHidden(JSV.common.Parameters.isTrue(c));
break;case JSV.common.ScriptToken.INTEGRATIONRATIOS:this.si.siSetIntegrationRatios(c);null!=this.selectedPanel&&this.execIntegrate(null);break;case JSV.common.ScriptToken.INTERFACE:this.si.siExecSetInterface(c);break;case JSV.common.ScriptToken.INTEGRALOFFSET:case JSV.common.ScriptToken.INTEGRALRANGE:this.execSetIntegralParameter(e,Double.parseDouble(c));break;case JSV.common.ScriptToken.JMOL:this.si.syncToJmol(c);break;case JSV.common.ScriptToken.JSV:this.syncScript(JU.PT.trimQuotes(c));break;case JSV.common.ScriptToken.LOAD:g=
this.si.siExecLoad(c);break;case JSV.common.ScriptToken.LOADIMAGINARY:this.si.siSetLoadImaginary(JSV.common.Parameters.isTrue(c));break;case JSV.common.ScriptToken.PEAK:this.execPeak(c);break;case JSV.common.ScriptToken.PEAKLIST:this.execPeakList(c);break;case JSV.common.ScriptToken.SCALEBY:this.scaleSelectedBy(this.panelNodes,c);break;case JSV.common.ScriptToken.SCRIPT:if(c.equals("")||c.toLowerCase().startsWith("inline"))this.execScriptInline(c);else{var N=this.si.siSetFileAsString(c);null!=N&&
100>this.si.siIncrementScriptLevelCount(0)&&this.runScriptNow(N)}break;case JSV.common.ScriptToken.SELECT:this.execSelect(c);break;case JSV.common.ScriptToken.SPECTRUM:case JSV.common.ScriptToken.SPECTRUMNUMBER:this.setSpectrum(c)||(b=!1);break;case JSV.common.ScriptToken.STACKOFFSETY:this.execOverlayOffsetY(JU.PT.parseInt(""+JU.PT.parseFloat(c)));break;case JSV.common.ScriptToken.TEST:this.si.siExecTest(c);break;case JSV.common.ScriptToken.OVERLAY:case JSV.common.ScriptToken.VIEW:this.execView(c,
!0);break;case JSV.common.ScriptToken.FINDX:case JSV.common.ScriptToken.GETSOLUTIONCOLOR:case JSV.common.ScriptToken.INTEGRATION:case JSV.common.ScriptToken.INTEGRATE:case JSV.common.ScriptToken.IRMODE:case JSV.common.ScriptToken.LABEL:case JSV.common.ScriptToken.LINK:case JSV.common.ScriptToken.OVERLAYSTACKED:case JSV.common.ScriptToken.PRINT:case JSV.common.ScriptToken.SETPEAK:case JSV.common.ScriptToken.SETX:case JSV.common.ScriptToken.SHIFTX:case JSV.common.ScriptToken.SHOWERRORS:case JSV.common.ScriptToken.SHOWMEASUREMENTS:case JSV.common.ScriptToken.SHOWMENU:case JSV.common.ScriptToken.SHOWKEY:case JSV.common.ScriptToken.SHOWPEAKLIST:case JSV.common.ScriptToken.SHOWINTEGRATION:case JSV.common.ScriptToken.SHOWPROPERTIES:case JSV.common.ScriptToken.SHOWSOURCE:case JSV.common.ScriptToken.YSCALE:case JSV.common.ScriptToken.WRITE:case JSV.common.ScriptToken.ZOOM:if(null==
this.selectedPanel){b=!1;break}switch(e){case JSV.common.ScriptToken.FINDX:this.pd().findX(null,Double.parseDouble(c));break;case JSV.common.ScriptToken.GETSOLUTIONCOLOR:this.selectedPanel.showMessage(this.getSolutionColorHtml(),"Predicted Colour");break;case JSV.common.ScriptToken.INTEGRATION:case JSV.common.ScriptToken.INTEGRATE:this.execIntegrate(c);break;case JSV.common.ScriptToken.IRMODE:this.execIRMode(c);break;case JSV.common.ScriptToken.LABEL:this.pd().addAnnotation(JSV.common.ScriptToken.getTokens(c));
break;case JSV.common.ScriptToken.LINK:this.pd().linkSpectra(JSV.common.PanelData.LinkMode.getMode(c));break;case JSV.common.ScriptToken.OVERLAYSTACKED:this.pd().splitStack(!JSV.common.Parameters.isTrue(c));break;case JSV.common.ScriptToken.PRINT:g=this.execWrite(null);break;case JSV.common.ScriptToken.SETPEAK:this.pd().shiftSpectrum(NaN,c.equalsIgnoreCase("NONE")?1.7976931348623157E308:c.equalsIgnoreCase("?")?4.9E-324:Double.parseDouble(c));break;case JSV.common.ScriptToken.SETX:this.pd().shiftSpectrum(4.9E-324,
Double.parseDouble(c));break;case JSV.common.ScriptToken.SHIFTX:this.pd().shiftSpectrum(c.equalsIgnoreCase("NONE")?1.7976931348623157E308:Double.parseDouble(c),NaN);break;case JSV.common.ScriptToken.SHOWERRORS:this.show("errors");break;case JSV.common.ScriptToken.SHOWINTEGRATION:this.pd().showAnnotation(JSV.common.Annotation.AType.Integration,JSV.common.Parameters.getTFToggle(c));break;case JSV.common.ScriptToken.SHOWKEY:this.setOverlayLegendVisibility(JSV.common.Parameters.getTFToggle(c),!0);break;
case JSV.common.ScriptToken.SHOWMEASUREMENTS:this.pd().showAnnotation(JSV.common.Annotation.AType.Measurements,JSV.common.Parameters.getTFToggle(c));break;case JSV.common.ScriptToken.SHOWMENU:this.showMenu(-2147483648,0);break;case JSV.common.ScriptToken.SHOWPEAKLIST:this.pd().showAnnotation(JSV.common.Annotation.AType.PeakList,JSV.common.Parameters.getTFToggle(c));break;case JSV.common.ScriptToken.SHOWPROPERTIES:this.show("properties");break;case JSV.common.ScriptToken.SHOWSOURCE:this.show("source");
break;case JSV.common.ScriptToken.YSCALE:this.setYScale(c);break;case JSV.common.ScriptToken.WINDOW:this.si.siNewWindow(JSV.common.Parameters.isTrue(c),!1);break;case JSV.common.ScriptToken.WRITE:g=this.execWrite(c);break;case JSV.common.ScriptToken.ZOOM:b=this.execZoom(c)}}}catch(k){if(v(k,Exception))alert(k+"\n"+ia()),b=!1,--d;else throw k;}}}this.si.siIncrementViewCount(-1);this.si.siExecScriptComplete(g,!0);return b},"~S");c(c$,"pd",function(){return this.selectedPanel.getPanelData()});c(c$,"execPeak",
function(a){try{var b=JSV.common.ScriptToken.getTokens(a);a=' type="'+b.get(0).toUpperCase()+'" _match="'+JU.PT.trimQuotes(b.get(1).toUpperCase())+'"';2<b.size()&&b.get(2).equalsIgnoreCase("all")&&(a+=' title="ALL"');this.processPeakPickEvent(new JSV.common.PeakInfo(a),!1)}catch(d){if(!v(d,Exception))throw d;}},"~S");c(c$,"execPeakList",function(a){var b=this.selectedPanel,d=this.parameters,g=JSV.common.Parameters.getTFToggle(a);if(0>a.indexOf("="))null!=b&&b.getPanelData().getPeakListing(null,g);
else for(var g=JSV.common.ScriptToken.getTokens(a),c=g.size();0<=--c;){a=g.get(c);var h=a.indexOf("=");if(!(0>=h)){var j=a.substring(0,h);a=a.substring(h+1);try{j.startsWith("thr")?d.peakListThreshold=Double.$valueOf(a).doubleValue():j.startsWith("int")&&(d.peakListInterpolation=a.equalsIgnoreCase("none")?"NONE":"parabolic"),null!=b&&b.getPanelData().getPeakListing(d,Boolean.TRUE)}catch(e){if(!v(e,Exception))throw e;}}}},"~S");c(c$,"execZoom",function(a){var b=0,d=0,g=0,c=0;a=JSV.common.ScriptToken.getTokens(a);
switch(a.size()){default:return!1;case 1:return this.zoomTo(a.get(0)),!0;case 2:b=Double.parseDouble(a.get(0));d=Double.parseDouble(a.get(1));break;case 4:b=Double.parseDouble(a.get(0)),g=Double.parseDouble(a.get(1)),d=Double.parseDouble(a.get(2)),c=Double.parseDouble(a.get(3))}this.pd().setZoom(b,g,d,c);return!0},"~S");c(c$,"zoomTo",function(a){var b=this.pd();a.equalsIgnoreCase("next")?b.nextView():a.toLowerCase().startsWith("prev")?b.previousView():a.equalsIgnoreCase("out")?b.resetView():a.equalsIgnoreCase("clear")&&
b.clearAllView()},"~S");c(c$,"scaleSelectedBy",function(a,b){try{for(var d=Double.parseDouble(b),g=a.size();0<=--g;)a.get(g).jsvp.getPanelData().scaleSelectedBy(d)}catch(c){if(!v(c,Exception))throw c;}},"JU.List,~S");c(c$,"execSelect",function(a){for(var b=this.panelNodes,d=b.size();0<=--d;)b.get(d).jsvp.getPanelData().selectFromEntireSet(-2147483648);b=new JU.List;this.fillSpecList(a,b,!1)},"~S");c(c$,"execView",function(a,b){if(a.equals(""))this.checkOverlay();else{var d=new JU.List,g=this.fillSpecList(a,
d,!0);0<d.size()&&this.si.siOpenDataOrFile(null,g,d,g,-1,-1,!1);b||this.si.siValidateAndRepaint()}},"~S,~B");c(c$,"execIRMode",function(a){var b=JSV.common.JDXSpectrum.IRMode.getMode(a),d=this.pd(),g=d.getSpectrum(),b=JSV.common.JDXSpectrum.taConvert(g,b);b!==g&&(d.setSpectrum(b),this.setIRmode(a))},"~S");c(c$,"execIntegrate",function(a){var b=this.selectedPanel;null!=b&&(b.getPanelData().checkIntegral(this.parameters,a),a=this.si.siGetIntegrationRatios(),null!=a&&b.getPanelData().setIntegrationRatios(a),
this.si.siSetIntegrationRatios(null),b.doRepaint(!0))},"~S");c(c$,"execSetIntegralParameter",function(a,b){var d=this.parameters;switch(a){case JSV.common.ScriptToken.INTEGRALRANGE:d.integralRange=b;break;case JSV.common.ScriptToken.INTEGRALOFFSET:d.integralOffset=b}d=this.selectedPanel;null!=d&&d.getPanelData().checkIntegral(this.parameters,"update")},"JSV.common.ScriptToken,~N");c(c$,"setYScale",function(a){var b=JSV.common.ScriptToken.getTokens(a),d=0,g=!1;1<b.size()&&b.get(0).equalsIgnoreCase("ALL")&&
(g=!0,d++);a=Double.parseDouble(b.get(d++));b=Double.parseDouble(b.get(d));if(g){g=this.pd().getSpectrum();for(d=this.panelNodes.size();0<=--d;){var c=this.panelNodes.get(d);c.source===this.currentSource&&JSV.common.JDXSpectrum.areXScalesCompatible(g,c.getSpectrum(),!1,!1)&&c.jsvp.getPanelData().setZoom(0,a,0,b)}}else this.pd().setZoom(0,a,0,b)},"~S");c(c$,"setOverlayLegendVisibility",function(a,b){b&&(this.overlayLegendVisible=null==a?!this.overlayLegendVisible:a===Boolean.TRUE);for(var d=JSV.common.PanelNode.findNode(this.selectedPanel,
this.panelNodes),g=this.panelNodes.size();0<=--g;)this.showOverlayLegend(this.panelNodes.get(g),this.panelNodes.get(g)===d&&this.overlayLegendVisible)},"Boolean,~B");c(c$,"showOverlayLegend",function(a,b){var d=a.legend;null==d&&b&&(d=a.setLegend(1<a.jsvp.getPanelData().getNumberOfSpectraInCurrentSet()&&1==a.jsvp.getPanelData().getNumberOfGraphSets()?this.getDialog(JSV.common.Annotation.AType.OverlayLegend,null):null));null!=d&&d.setVisible(b)},"JSV.common.PanelNode,~B");c(c$,"addHighLight",function(a,
b,d,g,c,h){var j=this.selectedPanel;null!=j&&(j.getPanelData().addHighlight(null,a,b,null,d,g,c,h),j.doRepaint(!1))},"~N,~N,~N,~N,~N,~N");c(c$,"syncScript",function(a){a.equals("TEST")&&(a=JSV.common.JSViewer.testScript);J.util.Logger.info("JSViewer.syncScript Jmol>JSV "+a);if(0>a.indexOf("<PeakData")){if(this.runScriptNow(a),0<=a.indexOf("#SYNC_PEAKS")&&(a=this.currentSource,null!=a))try{var b="file="+JSV.util.JSVEscape.eS(a.getFilePath()),d=a.getSpectra().get(0).getPeakList(),g=new JU.SB;g.append("[");
var c=d.size();for(a=0;a<c;a++){var h=d.get(a).toString(),h=h+" "+b;g.append(JSV.util.JSVEscape.eS(h));0<a&&g.append(",")}g.append("]");this.si.syncToJmol("Peaks: "+g)}catch(j){if(!v(j,Exception))throw j;}}else if(a=JU.PT.simpleReplace(a,'\\"',""),b=JU.PT.getQuotedAttribute(a,"file"),System.out.println("file2="+b),d=JU.PT.getQuotedAttribute(a,"index"),!(null==b||null==d))if(d=JU.PT.getQuotedAttribute(a,"model"),g=JU.PT.getQuotedAttribute(a,"src"),c=null!=g&&g.startsWith("Jmol")?null:this.si.siGetReturnFromJmolModel(),
null!=d&&null!=c&&!d.equals(c))J.util.Logger.info("JSV ignoring model "+d+"; should be "+c);else{this.si.siSetReturnFromJmolModel(null);if(0==this.panelNodes.size()||!this.checkFileAlreadyLoaded(b))J.util.Logger.info("file "+b+" not found -- JSViewer closing all and reopening"),this.si.siSyncLoad(b);c=this.selectPanelByPeak(a);h=this.selectedPanel;a=JU.PT.getQuotedAttribute(a,"type");h.getPanelData().selectSpectrum(b,a,d,!0);this.si.siSendPanelChange(h);h.getPanelData().addPeakHighlight(c);h.doRepaint(!0);
(null==g||null!=c&&null!=c.getAtoms())&&this.si.syncToJmol(this.jmolSelect(c))}},"~S");c(c$,"checkFileAlreadyLoaded",function(a){var b=this.selectedPanel;if(null!=b&&b.getPanelData().hasFileLoaded(a))return!0;for(b=this.panelNodes.size();0<=--b;)if(this.panelNodes.get(b).jsvp.getPanelData().hasFileLoaded(a))return this.si.siSetSelectedPanel(this.panelNodes.get(b).jsvp),!0;return!1},"~S");c(c$,"selectPanelByPeak",function(a){if(null==this.panelNodes)return null;var b=JU.PT.getQuotedAttribute(a,"file");
a=JU.PT.getQuotedAttribute(a,"index");for(var d=null,g=this.panelNodes.size();0<=--g;)this.panelNodes.get(g).jsvp.getPanelData().addPeakHighlight(null);g=this.selectedPanel;d=g.getPanelData().selectPeakByFileIndex(b,a);System.out.println(Thread.currentThread()+"JSViewer selectPanelByPeak pi = "+d);if(null!=d)this.setNode(JSV.common.PanelNode.findNode(g,this.panelNodes),!1);else for(g=this.panelNodes.size();0<=--g;){var c=this.panelNodes.get(g);if(null!=(d=c.jsvp.getPanelData().selectPeakByFileIndex(b,
a))){this.setNode(c,!1);break}}return d},"~S");c(c$,"processPeakPickEvent",function(a){if(y(a,JSV.common.PeakInfo)){var b=this.selectedPanel.getPanelData().findMatchingPeakInfo(a);if(null==b){if(!"ALL".equals(a.getTitle()))return;for(var d=null,g=0;g<this.panelNodes.size();g++)if(null!=(b=this.panelNodes.get(g).jsvp.getPanelData().findMatchingPeakInfo(a))){d=this.panelNodes.get(g);break}if(null==d)return;this.setNode(d,!1)}a=b}else this.si.siSetSelectedPanel(a.getSource()),a=a.getPeakInfo();this.pd().addPeakHighlight(a);
this.syncToJmol(a);a.isClearAll()?this.selectedPanel.doRepaint(!1):this.pd().selectSpectrum(a.getFilePath(),a.getType(),a.getModel(),!0);this.si.siCheckCallbacks(a.getTitle())},"~O,~B");c(c$,"syncToJmol",function(a){this.si.siSetReturnFromJmolModel(a.getModel());this.si.syncToJmol(this.jmolSelect(a))},"JSV.common.PeakInfo");c(c$,"sendPanelChange",function(a){var b=a.getPanelData(),d=b.getSpectrum(),g=d.getSelectedPeak();null==g&&(g=d.getModelPeakInfoForAutoSelectOnLoad());null==g&&(g=d.getBasePeakInfo());
b.addPeakHighlight(g);J.util.Logger.info(Thread.currentThread()+"JSViewer sendFrameChange "+a);this.syncToJmol(g)},"JSV.api.JSVPanel");c(c$,"jmolSelect",function(a){var b=null,b="IR".equals(a.getType())||"RAMAN".equals(a.getType())?"vibration ON; selectionHalos OFF;":null!=a.getAtoms()?"vibration OFF; selectionhalos ON;":"vibration OFF; selectionhalos OFF;",b="Select: "+a+' script="'+b;System.out.println("JSViewer.jmolSelect "+b);return b},"JSV.common.PeakInfo");c(c$,"getPropertyAsJavaObject",function(a){var b=
!1;if(null!=a&&a.toUpperCase().startsWith("ALL ")||"all".equalsIgnoreCase(a))a=a.substring(3).trim(),b=!0;"".equals(a)&&(a=null);var d=new java.util.Hashtable,g=this.pd().getInfo(!0,a);if(!b&&null!=g)return g;null!=g&&d.put("current",g);b=new JU.List;for(g=0;g<this.panelNodes.size();g++)null!=this.panelNodes.get(g).jsvp&&b.addLast(this.panelNodes.get(g).getInfo(a));d.put("items",b);return d},"~S");c(c$,"getCoordinate",function(){if(null!=this.selectedPanel){var a=this.pd().getClickedCoordinate();
if(null!=a)return a.getXVal()+" "+a.getYVal()}return""});c(c$,"fillSpecList",function(a,b,d){var g,c=null,h=a.equalsIgnoreCase("NONE");if(h||a.equalsIgnoreCase("all"))a="*";if(0>a.indexOf("*")){g=a.$plit(" ");a=new JU.SB;for(var j=0;j<g.length;j++){var e=g[j].indexOf(".");e!=g[j].lastIndexOf(".")&&(g[j]=g[j].substring(0,e+1)+g[j].substring(e+1).$replace(".","_"));a.append(g[j]).append(" ")}a=a.toString().trim()}if(a.equals("*"))g=JSV.common.ScriptToken.getTokens(JSV.common.PanelNode.getSpectrumListAsString(this.panelNodes));
else if(a.startsWith('"'))g=JSV.common.ScriptToken.getTokens(a);else if(a=JU.PT.simpleReplace(a,"_"," _ "),a=JU.PT.simpleReplace(a,"-"," - "),g=JSV.common.ScriptToken.getTokens(a),c=JSV.common.ScriptToken.getTokens(JSV.common.PanelNode.getSpectrumListAsString(this.panelNodes)),0==c.size())return null;var l=null==this.selectedPanel?"1.":JSV.common.PanelNode.findNode(this.selectedPanel,this.panelNodes).id,l=l.substring(0,l.indexOf(".")+1);a=new JU.SB;for(var N=g.size(),k=null,j=0;j<N;j++){var n=g.get(j),
e=NaN,t=-1;j+1<N&&g.get(j+1).equals("*")?(j+=2,e=Double.parseDouble(g.get(j))):j+1<N&&g.get(j+1).equals("_")&&(j+=2,t=Integer.parseInt(g.get(j)));if(n.equals("-")){null==k&&(k=c.get(0));n=j+1==N?c.get(c.size()-1):g.get(++j);n.contains(".")||(n=l+n);for(e=0;e<c.size()&&!c.get(e).equals(k);)e++;for(e++;e<c.size()&&!k.equals(n);)b.addLast(JSV.common.PanelNode.findNodeById(k=c.get(e++),this.panelNodes).jsvp.getPanelData().getSpectrumAt(0)),a.append(",").append(k)}else{var m;if(n.startsWith('"')){n=JU.PT.trim(n,
'"');for(t=0;t<this.panelNodes.size();t++)if(m=this.panelNodes.get(t),null!=m.fileName&&m.fileName.startsWith(n)||null!=m.frameTitle&&m.frameTitle.startsWith(n))this.addSpecToList(m.jsvp.getPanelData(),e,-1,b,d),a.append(",").append(m.id)}else n.contains(".")||(n=l+n),m=JSV.common.PanelNode.findNodeById(n,this.panelNodes),null!=m&&(k=n,this.addSpecToList(m.jsvp.getPanelData(),e,t,b,d),a.append(",").append(n),0<t&&a.append(".").appendI(t))}}d&&1==b.size()&&(m=JSV.common.PanelNode.findNodeById(k,this.panelNodes),
null!=m&&(this.setNode(m,!0),b.clear()));return h?"NONE":0<a.length()?a.toString().substring(1):null},"~S,JU.List,~B");c(c$,"addSpecToList",function(a,b,d,g,c){c?(a.getSpectrumAt(0).setUserYFactor(Double.isNaN(b)?1:b),a.addToList(d-1,g)):a.selectFromEntireSet(d-1)},"JSV.common.PanelData,~N,~N,JU.List,~B");c(c$,"getSolutionColor",function(){var a=this.pd().getSpectrum();return a.canShowSolutionColor()?JSV.common.JSViewer.getInterface("JSV.common.Visible").getColour(a.getXYCoords(),a.getYUnits()):"255,255,255"});
c(c$,"getSolutionColorHtml",function(){var a=this.getSolutionColor();return"<html><body style='background-color:rgb("+a+")'><br />Predicted Solution Colour- RGB("+a+")<br /><br /></body></html>"});c(c$,"openDataOrFile",function(a,b,d,g,c,h,j){if("NONE".equals(b))return this.close("View*"),0;this.si.writeStatus("");var e=null,l=null,k=null;b=!1;if(null==a)if(null!=d)b=!0,l=k=e="View"+this.si.siIncrementViewCount(1);else if(null!=g)try{e=(new java.net.URL(JSV.common.JSVFileManager.appletDocumentBase,
g,null)).toString(),this.si.siSetRecentURL(e),k=JSV.common.JSVFileManager.getName(e)}catch(n){if(v(n,java.net.MalformedURLException))e=this.apiPlatform.newFile(g),k=e.getName(),l=e=e.getFullPath(),this.si.siSetRecentURL(null);else throw n;}if(!b&&(JSV.common.PanelNode.isOpen(this.panelNodes,e)||JSV.common.PanelNode.isOpen(this.panelNodes,g)))return this.si.writeStatus(e+" is already open"),-1;!j&&!b&&this.close("all");this.si.setCursor(3);try{this.si.siSetCurrentSource(b?JSV.source.JDXSource.createView(d):
this.si.siCreateSource(a,e,c,h))}catch(m){if(v(m,Exception))return alert(m+"\n"+ia()),this.si.setCursor(0),-3;throw m;}this.si.setCursor(0);System.gc();null==l?(l=this.currentSource.getFilePath(),null!=l&&(k=l.substring(l.lastIndexOf("/")+1))):this.currentSource.setFilePath(l);this.si.siSetLoaded(k,l);a=this.currentSource.getJDXSpectrum(0);if(null==a)return-4;d=this.currentSource.getSpectra();JSV.common.JDXSpectrum.process(d,this.irMode);d=this.si.siGetAutoCombine()||a.isAutoOverlayFromJmolClick();
b||d&&this.currentSource.isCompoundSource?this.combineSpectra(b?g:null):this.splitSpectra();this.selectedPanel.getPanelData().taintedAll=!0;b||this.si.siUpdateRecentMenus(e);return 0},"~S,~S,JU.List,~S,~N,~N,~B");c(c$,"close",function(a){if(null==a||a.equalsIgnoreCase("all")||a.equals("*"))this.si.siCloseSource(null);else{a=a.$replace("\\","/");if(a.endsWith("*")){a=a.substring(0,a.length-1);for(var b=this.panelNodes.size();0<=--b;)b<this.panelNodes.size()&&this.panelNodes.get(b).fileName.startsWith(a)&&
this.si.siCloseSource(this.panelNodes.get(b).source)}else if(a.equals("selected")){a=new JU.List;for(var d=null,b=this.panelNodes.size();0<=--b;){var g=this.panelNodes.get(b).source;this.panelNodes.get(b).isSelected&&(null==d||d!==g)&&a.addLast(g);d=g}for(b=a.size();0<=--b;)this.si.siCloseSource(a.get(b))}else{g=0==a.length?this.currentSource:JSV.common.PanelNode.findSourceByNameOrId(a,this.panelNodes);if(null==g)return;this.si.siCloseSource(g)}null==this.selectedPanel&&0<this.panelNodes.size()&&
this.si.siSetSelectedPanel(JSV.common.PanelNode.getLastFileFirstNode(this.panelNodes))}},"~S");c(c$,"load",function(a){var b=JSV.common.ScriptToken.getTokens(a);a=b.get(0);var d=0,g=a.equalsIgnoreCase("APPEND"),c=a.equalsIgnoreCase("CHECK");if(g||c)a=b.get(++d);a.equalsIgnoreCase("MOL")&&(a="http://SIMULATION/MOL="+JU.PT.trimQuotes(b.get(++d)));!c&&!g&&(a.equals('""')&&null!=this.currentSource&&(a=this.currentSource.getFilePath()),this.close("all"));a=JU.PT.trimQuotes(a);a.startsWith("$")&&(a="http://SIMULATION/"+
a);c=d+1<b.size()?Integer.$valueOf(b.get(++d)).intValue():-1;b=d+1<b.size()?Integer.$valueOf(b.get(++d)).intValue():c;this.si.siOpenDataOrFile(null,null,null,a,c,b,g)},"~S");c(c$,"combineSpectra",function(a){var b=this.currentSource,d=b.getSpectra(),d=this.si.siGetNewJSVPanel2(d);d.setTitle(b.getTitle());d.getTitle().equals("")&&(d.getPanelData().setViewTitle(b.getFilePath()),d.setTitle(a));this.si.siSetPropertiesFromPreferences(d,!0);this.si.siCreateTree(b,[d]).getPanelNode().isView=!0;b=JSV.common.PanelNode.findNode(this.selectedPanel,
this.panelNodes);b.setFrameTitle(a);b.isView=!0;this.si.siGetAutoShowLegend()&&1==this.pd().getNumberOfGraphSets()&&b.setLegend(this.getDialog(JSV.common.Annotation.AType.OverlayLegend,null));this.si.siSetMenuEnables(b,!1)},"~S");c(c$,"closeSource",function(a){for(var b=this.spectraTree.getRootNode(),d=null==a?null:a.getFilePath(),c=new JU.List,b=b.children();b.hasMoreElements();){var f=b.nextElement();if(null==d||f.getPanelNode().source.getFilePath().equals(d)){for(var h=f.children();h.hasMoreElements();){var e=
h.nextElement();c.addLast(e);this.panelNodes.removeObj(e.getPanelNode())}c.addLast(f);if(null!=d)break}}this.spectraTree.deleteNodes(c);null==a&&(null!=this.currentSource&&this.currentSource.dispose(),this.currentSource=null,null!=this.selectedPanel&&this.selectedPanel.dispose());this.currentSource===a&&(this.si.siSetSelectedPanel(null),this.si.siSetCurrentSource(null));for(d=a=0;d<this.panelNodes.size();d++)c=JU.PT.parseFloat(this.panelNodes.get(d).id),c>=a+1&&(a=n(Math.floor(c)));this.si.siSetFileCount(a);
System.gc();J.util.Logger.checkMemory()},"JSV.source.JDXSource");c(c$,"setFrameAndTreeNode",function(a){null==this.panelNodes||(0>a||a>=this.panelNodes.size())||this.setNode(this.panelNodes.get(a),!1)},"~N");c(c$,"selectFrameNode",function(a){a=JSV.common.PanelNode.findNode(a,this.panelNodes);if(null==a)return null;this.spectraTree.setPath(this.spectraTree.newTreePath(a.treeNode.getPath()));this.setOverlayLegendVisibility(null,!1);return a},"JSV.api.JSVPanel");c(c$,"setSpectrum",function(a){if(0<=
a.indexOf(".")){a=JSV.common.PanelNode.findNodeById(a,this.panelNodes);if(null==a)return!1;this.setNode(a,!1)}else{a=JU.PT.parseInt(a);if(0>=a)return this.checkOverlay(),!1;this.setFrameAndTreeNode(a-1)}return!0},"~S");c(c$,"splitSpectra",function(){for(var a=this.currentSource,b=a.getSpectra(),d=Array(b.size()),c=null,f=0;f<b.size();f++)c=b.get(f),c=this.si.siGetNewJSVPanel(c),this.si.siSetPropertiesFromPreferences(c,!0),d[f]=c;this.si.siCreateTree(a,d);this.si.siGetNewJSVPanel(null);a=JSV.common.PanelNode.findNode(this.selectedPanel,
this.panelNodes);this.si.siSetMenuEnables(a,!0)});c(c$,"selectedTreeNode",function(a){null!=a&&(a.isLeaf()?this.setNode(a.getPanelNode(),!0):System.out.println("not a leaf"),this.si.siSetCurrentSource(a.getPanelNode().source))},"JSV.api.JSVTreeNode");c(c$,"removeAllHighlights",function(){var a=this.selectedPanel;null!=a&&(a.getPanelData().removeAllHighlights(),a.doRepaint(!1))});c(c$,"removeHighlight",function(a,b){var d=this.selectedPanel;null!=d&&(d.getPanelData().removeHighlight(a,b),d.doRepaint(!1))},
"~N,~N");c(c$,"dispose",function(){this.fileHelper=null;null!=this.viewDialog&&this.viewDialog.dispose();this.viewDialog=null;null!=this.overlayLegendDialog&&this.overlayLegendDialog.dispose();this.overlayLegendDialog=null;null!=this.jsvpPopupMenu&&(this.jsvpPopupMenu.jpiDispose(),this.jsvpPopupMenu=null);if(null!=this.panelNodes)for(var a=this.panelNodes.size();0<=--a;)this.panelNodes.get(a).dispose(),this.panelNodes.remove(a)});c(c$,"runScript",function(a){null==this.scriptQueue?this.si.siProcessCommand(a):
this.scriptQueue.addLast(a)},"~S");c(c$,"requestRepaint",function(){null!=this.selectedPanel&&this.repaintManager.refresh()});c(c$,"repaintDone",function(){this.repaintManager.repaintDone()});c(c$,"checkOverlay",function(){null!=this.viewPanel&&this.viewPanel.markSelectedPanels(this.panelNodes);this.viewDialog=this.getDialog(JSV.common.Annotation.AType.Views,null)});c(c$,"execOverlayOffsetY",function(a){if(null!=this.selectedPanel){if(-2147483648==a){a=this.selectedPanel.getInput("Enter a vertical offset in percent for stacked plots",
"Overlay",""+this.recentStackPercent);a=JU.PT.parseFloat(a);if(Float.isNaN(a))return;a=S(a)}this.recentStackPercent=a;this.pd().setYStackOffsetPercent(a)}},"~N");c(c$,"execScriptInline",function(a){0<a.length&&(a=a.substring(6).trim());0==a.length&&(a=this.selectedPanel.getInput("Enter a JSpecView script","Script",this.recentScript));null!=a&&(this.recentScript=a,this.runScriptNow(a))},"~S");c(c$,"setDisplay",function(a){this.apiPlatform.setViewer(this,this.display=a);var b=H(2,0);this.apiPlatform.getFullScreenDimensions(a,
b);this.setScreenDimension(b[0],b[1])},"~O");e(c$,"setScreenDimension",function(a,b){b=Math.min(b,this.maximumSize);a=Math.min(a,this.maximumSize);this.dimScreen.width==a&&this.dimScreen.height==b||this.resizeImage(a,b)},"~N,~N");c(c$,"resizeImage",function(a,b){0<a?(this.dimScreen.width=a,this.dimScreen.height=b):(a=0==this.dimScreen.width?this.dimScreen.width=500:this.dimScreen.width,b=0==this.dimScreen.height?this.dimScreen.height=500:this.dimScreen.height);this.g2d.setWindowParameters(a,b)},"~N,~N");
e(c$,"updateJS",function(){null!=this.selectedPanel&&this.selectedPanel.paintComponent(this.apiPlatform.context)},"~N,~N");e(c$,"processMouseEvent",function(a,b,d,c,f){return null!=this.selectedPanel&&this.selectedPanel.processMouseEvent(a,b,d,c,f)},"~N,~N,~N,~N,~N");e(c$,"processTwoPointGesture",function(a){null!=this.selectedPanel&&this.selectedPanel.processTwoPointGesture(a)},"~A");e(c$,"getApplet",function(){return this.applet});e(c$,"startHoverWatcher",function(){},"~B");e(c$,"cacheFileByName",
function(){return 0},"~S,~B");e(c$,"cachePut",function(){},"~S,~O");e(c$,"openFileAsyncSpecial",function(){},"~S,~N");c(c$,"getHeight",function(){return this.dimScreen.height});c(c$,"getWidth",function(){return this.dimScreen.width});c(c$,"getPlatformInterface",function(a){return JSV.common.JSViewer.getInterface("JSV."+(this.isJS?"js2d.Js":"java.Awt")+a)},"~S");c(c$,"getDialogManager",function(){if(null!=this.dialogManager)return this.dialogManager;this.dialogManager=this.getPlatformInterface("DialogManager");
return this.dialogManager.set(this)});c(c$,"getDialog",function(a,b){switch(a){case JSV.common.Annotation.AType.Integration:return JSV.common.JSViewer.getInterface("JSV.dialog.IntegrationDialog").setParams("Integration for "+b,this,b);case JSV.common.Annotation.AType.Measurements:return JSV.common.JSViewer.getInterface("JSV.dialog.MeasurementsDialog").setParams("Measurements for "+b,this,b);case JSV.common.Annotation.AType.PeakList:return JSV.common.JSViewer.getInterface("JSV.dialog.PeakListDialog").setParams("Peak List for "+
b,this,b);case JSV.common.Annotation.AType.OverlayLegend:return this.overlayLegendDialog=JSV.common.JSViewer.getInterface("JSV.dialog.OverlayLegendDialog").setParams(this.pd().getViewTitle(),this,null);case JSV.common.Annotation.AType.Views:return this.viewDialog=JSV.common.JSViewer.getInterface("JSV.dialog.ViewsDialog").setParams("View/Combine/Close Spectra",this,null);default:return null}},"JSV.common.Annotation.AType,JSV.common.JDXSpectrum");c(c$,"show",function(a){this.getDialogManager();a.equals("properties")?
this.dialogManager.showProperties(null,this.pd().getSpectrum()):a.equals("errors")?this.dialogManager.showSourceErrors(null,this.currentSource):a.equals("source")&&(null==this.currentSource?0<this.panelNodes.size()&&this.dialogManager.showMessageDialog(null,"Please Select a Spectrum","Select Spectrum",0):this.dialogManager.showSource(this,this.currentSource))},"~S");c(c$,"getDialogPrint",function(a){if(!this.isJS)try{var b=this.getPlatformInterface("PrintDialog").set(this.offWindowFrame,this.lastPrintLayout,
a).getPrintLayout();null!=b&&(this.lastPrintLayout=b);return b}catch(d){if(!v(d,Exception))throw d;}return new JSV.common.PrintLayout},"~B");c(c$,"setIRmode",function(a){this.irMode=a.equals("AtoT")?JSV.common.JDXSpectrum.IRMode.TO_TRANS:a.equals("TtoA")?JSV.common.JDXSpectrum.IRMode.TO_ABS:JSV.common.JDXSpectrum.IRMode.getMode(a)},"~S");c(c$,"getOptionFromDialog",function(a,b,d){this.getDialogManager().getOptionFromDialog(null,a,this.selectedPanel,b,d);return 0},"~A,~S,~S");c(c$,"execWrite",function(a){this.isJS&&
null==a&&(a="PDF");a=JSV.common.JSViewer.getInterface("JSV.export.Exporter").write(this,null==a?null:JSV.common.ScriptToken.getTokens(a),!1);this.si.writeStatus(a);return a},"~S");c(c$,"$export",function(a,b){null==a&&(a="XY");var d=this.pd(),c=d.getNumberOfSpectraInCurrentSet();if(-1>b||b>=c)return"Maximum spectrum index (0-based) is "+(c-1)+".";d=0>b?d.getSpectrum():d.getSpectrumAt(b);try{return JSV.common.JSViewer.getInterface("JSV.export.Exporter").exportTheSpectrum(this,JSV.common.ExportType.getType(a),
null,d,0,d.getXYCoords().length-1,null)}catch(f){if(v(f,Exception))return System.out.println(f),null;throw f;}},"~S,~N");e(c$,"postByteArray",function(a,b){return JSV.common.JSVFileManager.postByteArray(a,b)},"~S,~A");c(c$,"getOutputChannel",function(a,b){for(;a.startsWith("/");)a=a.substring(1);return(new JU.OC).setParams(this,a,!b,null)},"~S,~B");c$.getInterface=c(c$,"getInterface",function(a){try{var b=Class.forName(a);return null==b?null:b.newInstance()}catch(d){if(v(d,Exception))return J.util.Logger.error("Interface.java Error creating instance for "+
a+": \n"+d),null;throw d;}},"~S");B(c$,"sourceLabel","Original...","FILE_OPEN_OK",0,"FILE_OPEN_ALREADY",-1,"FILE_OPEN_ERROR",-3,"FILE_OPEN_NO_DATA",-4,"OVERLAY_DIALOG",-1,"OVERLAY_OFFSET",99,"PORTRAIT",1,"PAGE_EXISTS",0,"NO_SUCH_PAGE",1,"noColor","255,255,255","testScript",'<PeakData  index="1" title="" model="~1.1" type="1HNMR" xMin="3.2915" xMax="3.2965" atoms="15,16,17,18,19,20" multiplicity="" integral="1"> src="JPECVIEW" file="http://SIMULATION/$caffeine"',"NLEVEL_MAX",100)}),m("JSV.common"),
u(null,"JSV.common.PanelNode",["JU.SB","JSV.common.Parameters"],function(){c$=q(function(){this.legend=this.id=this.jsvp=this.fileName=this.source=this.treeNode=null;this.isView=this.isSelected=!1;this.frameTitle=null;s(this,arguments)},JSV.common,"PanelNode");w(c$,function(a,b,d,c){this.id=a;this.source=d;this.fileName=b;this.jsvp=c;null!=c&&(c.getPanelData().getSpectrumAt(0).setId(a),this.frameTitle=c.getTitle())},"~S,~S,JSV.source.JDXSource,JSV.api.JSVPanel");c(c$,"setTreeNode",function(a){this.treeNode=
a},"JSV.api.JSVTreeNode");c(c$,"getTreeNode",function(){return this.treeNode});c(c$,"dispose",function(){this.source.dispose();null!=this.jsvp&&this.jsvp.dispose();this.legend=this.jsvp=this.source=null});c(c$,"getSpectrum",function(){return this.jsvp.getPanelData().getSpectrum()});c(c$,"setLegend",function(a){null!=this.legend&&this.legend.dispose();return this.legend=a},"JSV.dialog.JSVDialog");e(c$,"toString",function(){return(null==this.id?"":this.id+": ")+(null==this.frameTitle?this.fileName:
this.frameTitle)});c$.findSourceByNameOrId=c(c$,"findSourceByNameOrId",function(a,b){for(var d=b.size();0<=--d;){var c=b.get(d);if(a.equals(c.id)||a.equalsIgnoreCase(c.source.getFilePath()))return c.source}for(d=b.size();0<=--d;)if(c=b.get(d),a.equals(c.fileName))return c.source;return null},"~S,JU.List");c$.findNodeById=c(c$,"findNodeById",function(a,b){for(var d=b.size();0<=--d;)if(a.equals(b.get(d).id))return b.get(d);return null},"~S,JU.List");c$.findNode=c(c$,"findNode",function(a,b){for(var d=
b.size();0<=--d;)if(b.get(d).jsvp===a)return b.get(d);return null},"JSV.api.JSVPanel,JU.List");c$.getSpectrumListAsString=c(c$,"getSpectrumListAsString",function(a){for(var b=new JU.SB,d=0;d<a.size();d++){var c=a.get(d).id;b.append(" ").append(c)}return b.toString().trim()},"JU.List");c$.isOpen=c(c$,"isOpen",function(a,b){if(null!=b)for(var d=a.size();0<=--d;)if(b.equals(a.get(d).source.getFilePath())||b.equals(a.get(d).frameTitle))return!0;return!1},"JU.List,~S");c(c$,"setFrameTitle",function(a){this.frameTitle=
a},"~S");c$.getLastFileFirstNode=c(c$,"getLastFileFirstNode",function(a){for(var b=a.size(),d=0==b?null:a.get(b-1),b=b-1;0<=--b&&a.get(b).source===d.source;)d=a.get(b);return null==d?null:d.jsvp},"JU.List");c(c$,"getInfo",function(a){var b=this.jsvp.getPanelData().getInfo(!1,a);JSV.common.Parameters.putInfo(a,b,"panelId",this.id);JSV.common.Parameters.putInfo(a,b,"panelFileName",this.fileName);JSV.common.Parameters.putInfo(a,b,"panelSource",this.source.getFilePath());return b},"~S")}),m("JSV.common"),
u(null,"JSV.common.Parameters",["java.lang.Boolean","java.util.Hashtable","JSV.common.ScriptToken"],function(){c$=q(function(){this.name=null;this.integralMinY=0.1;this.integralRange=50;this.integralOffset=30;this.integralDrawAll=!1;this.peakListThreshold=NaN;this.peakListInterpolation="parabolic";this.precision=2;this.htBooleans=null;s(this,arguments)},JSV.common,"Parameters");w(c$,function(){this.htBooleans=new java.util.Hashtable;this.setBoolean(JSV.common.ScriptToken.TITLEON,!0);this.setBoolean(JSV.common.ScriptToken.ENABLEZOOM,
!0);this.setBoolean(JSV.common.ScriptToken.DISPLAY2D,!0);this.setBoolean(JSV.common.ScriptToken.COORDINATESON,!0);this.setBoolean(JSV.common.ScriptToken.GRIDON,!0);this.setBoolean(JSV.common.ScriptToken.XSCALEON,!0);this.setBoolean(JSV.common.ScriptToken.YSCALEON,!0);this.setBoolean(JSV.common.ScriptToken.XUNITSON,!0);this.setBoolean(JSV.common.ScriptToken.YUNITSON,!0)});c(c$,"setName",function(a){this.name=a;return this},"~S");c(c$,"getBooleans",function(){return this.htBooleans});c(c$,"setBoolean",
function(a,b){this.htBooleans.put(a,Boolean.$valueOf(b));return b},"JSV.common.ScriptToken,~B");c(c$,"getBoolean",function(a){return Boolean.TRUE===this.htBooleans.get(a)},"JSV.common.ScriptToken");c$.isTrue=c(c$,"isTrue",function(a){return 0==a.length||Boolean.parseBoolean(a)},"~S");c$.getTFToggle=c(c$,"getTFToggle",function(a){return a.equalsIgnoreCase("TOGGLE")?null:JSV.common.Parameters.isTrue(a)?Boolean.TRUE:Boolean.FALSE},"~S");c(c$,"setP",function(a,b,d){switch(b){default:return;case JSV.common.ScriptToken.COORDINATESON:case JSV.common.ScriptToken.DISPLAY1D:case JSV.common.ScriptToken.DISPLAY2D:case JSV.common.ScriptToken.ENABLEZOOM:case JSV.common.ScriptToken.GRIDON:case JSV.common.ScriptToken.REVERSEPLOT:case JSV.common.ScriptToken.TITLEON:case JSV.common.ScriptToken.TITLEBOLDON:case JSV.common.ScriptToken.XSCALEON:case JSV.common.ScriptToken.XUNITSON:case JSV.common.ScriptToken.YSCALEON:case JSV.common.ScriptToken.YUNITSON:d=
JSV.common.Parameters.getTFToggle(d);if(null!=d){this.setBoolean(b,d.booleanValue());break}if(null==a)return;d=!a.getBoolean(b);switch(b){case JSV.common.ScriptToken.XSCALEON:this.setBoolean(JSV.common.ScriptToken.XUNITSON,d);a.setBoolean(JSV.common.ScriptToken.XUNITSON,d);break;case JSV.common.ScriptToken.YSCALEON:this.setBoolean(JSV.common.ScriptToken.YUNITSON,d),a.setBoolean(JSV.common.ScriptToken.YUNITSON,d)}this.setBoolean(b,d)}null!=a&&a.setBooleans(this,b)},"JSV.common.PanelData,JSV.common.ScriptToken,~S");
c$.isMatch=c(c$,"isMatch",function(a,b){return null==a||b.equalsIgnoreCase(a)},"~S,~S");c$.putInfo=c(c$,"putInfo",function(a,b,d,c){null!=c&&JSV.common.Parameters.isMatch(a,d)&&b.put(null==a?d:a,c)},"~S,java.util.Map,~S,~O")}),m("JSV.util"),u(null,"JSV.util.JSVEscape",["JU.SB"],function(){c$=A(JSV.util,"JSVEscape");c$.eS=c(c$,"eS",function(a){if(null==a)return'""';for(var b=!1,d=0;10>d;d+=2)if(0<=a.indexOf('\\\\\tt\rr\nn""'.charAt(d))){b=!0;break}if(b)for(;10>d;){for(var b=-1,c='\\\\\tt\rr\nn""'.charAt(d++),
f='\\\\\tt\rr\nn""'.charAt(d++),h=new JU.SB,e=0;0<=(b=a.indexOf(c,b+1));)h.append(a.substring(e,b)).appendC("\\").appendC(f),e=b+1;h.append(a.substring(e,a.length));a=h.toString()}for(d=a.length;0<=--d;)127<a.charCodeAt(d)&&(a=a.substring(0,d)+JSV.util.JSVEscape.unicode(a.charAt(d))+a.substring(d+1));return'"'+a+'"'},"~S");c$.unicode=c(c$,"unicode",function(a){a="0000"+Integer.toHexString(a.charCodeAt(0));return"\\u"+a.substring(a.length-4)},"~S");B(c$,"escapable",'\\\\\tt\rr\nn""')}),m("JU"),u(["java.io.OutputStream"],
"JU.OC",["java.io.BufferedWriter","$.ByteArrayOutputStream","$.OutputStreamWriter","JU.SB"],function(){c$=q(function(){this.bw=this.fileName=this.bytePoster=null;this.isLocalFile=!1;this.byteCount=0;this.closed=this.isCanceled=!1;this.type=this.sb=this.os=null;s(this,arguments)},JU,"OC",java.io.OutputStream);c(c$,"setParams",function(a,b,d,c){this.bytePoster=a;this.fileName=b;this.os=c;this.isLocalFile=null!=b&&!(b.startsWith("http://")||b.startsWith("https://"));d&&null!=c&&(this.bw=new java.io.BufferedWriter(new java.io.OutputStreamWriter(c)));
return this},"javajs.api.BytePoster,~S,~B,java.io.OutputStream");c(c$,"getFileName",function(){return this.fileName});c(c$,"getByteCount",function(){return this.byteCount});c(c$,"setType",function(a){this.type=a},"~S");c(c$,"getType",function(){return this.type});c(c$,"append",function(a){try{if(null!=this.bw)this.bw.write(a);else if(null==this.os)null==this.sb&&(this.sb=new JU.SB),this.sb.append(a);else{var b=a.getBytes();this.os.write(b,0,b.length);this.byteCount+=b.length;return this}}catch(d){if(!v(d,
java.io.IOException))throw d;}this.byteCount+=a.length;return this},"~S");e(c$,"write",function(a,b,d){null==this.os&&(this.os=new java.io.ByteArrayOutputStream);this.os.write(a,b,d);this.byteCount+=d},"~A,~N,~N");e(c$,"writeByteAsInt",function(a){null==this.os&&(this.os=new java.io.ByteArrayOutputStream);this.os.writeByteAsInt(a);this.byteCount++},"~N");c(c$,"cancel",function(){this.isCanceled=!0;this.closeChannel()});c(c$,"closeChannel",function(){if(this.closed)return null;try{null!=this.bw?(this.bw.flush(),
this.bw.close()):null!=this.os&&(this.os.flush(),this.os.close())}catch(a){if(!v(a,Exception))throw a;}if(this.isCanceled)return this.closed=!0,null;if(null==this.fileName||this.closed)return null==this.sb?null:this.sb.toString();this.closed=!0;var b=null==this.sb?this.toByteArray():this.sb.toString();"function"==typeof this.fileName?this.fileName(b):Jmol._doAjax(this.fileName,null,b);return null});c(c$,"toByteArray",function(){return y(this.os,java.io.ByteArrayOutputStream)?this.os.toByteArray():
null});c(c$,"close",function(){this.closeChannel()});e(c$,"toString",function(){if(null!=this.bw)try{this.bw.flush()}catch(a){if(!v(a,java.io.IOException))throw a;}return null!=this.sb?this.closeChannel():this.byteCount+" bytes"});c(c$,"postByteArray",function(){var a=null==this.sb?this.toByteArray():this.sb.toString().getBytes();return this.bytePoster.postByteArray(this.fileName,a)})}),m("JSV.common"),u(["java.lang.Enum","JSV.common.Coordinate"],"JSV.common.Annotation",["java.lang.Double","JU.CU"],
function(){c$=q(function(){this.text="";this.is2D=this.$isPixels=!1;this.offsetY=this.offsetX=0;this.spec=null;s(this,arguments)},JSV.common,"Annotation",JSV.common.Coordinate);c(c$,"setA",function(a,b,d,c,f,h,e,p){this.set(a,b);this.spec=d;this.text=c;this.$isPixels=f;this.is2D=h;this.offsetX=e;this.offsetY=p;return this},"~N,~N,JSV.common.JDXSpectrum,~S,~B,~B,~N,~N");c(c$,"setSpec",function(a){this.spec=a;return this},"JSV.common.JDXSpectrum");c(c$,"addSpecShift",function(a){this.setXVal(this.getXVal()+
a)},"~N");c(c$,"isPixels",function(){return this.$isPixels});e(c$,"toString",function(){return"["+this.getXVal()+", "+this.getYVal()+","+this.text+"]"});c$.getColoredAnnotation=c(c$,"getColoredAnnotation",function(a,b,d,c){var f,h=0,e=1,p=2,l=3,k=d.size();try{switch(k){default:return null;case 1:f=d.get(0);h=e=-1;'"'==f.charAt(0)?(l=0,p=-1):(p=0,l=-1);break;case 2:h=e=-1;f=d.get(0);'"'==f.charAt(0)?(l=0,p=1):(p=0,l=1);break;case 3:case 4:f=d.get(2),'"'==f.charAt(0)?(l=2,p=4==k?3:-1):(p=2,l=4==k?3:
-1),f=d.get(2),'"'==f.charAt(0)?(l=2,p=-1):(p=2,l=-1)}if(null==c&&(0>h||0>e||0>l||0>p))return null;var n=0>h?c.getXVal():Double.$valueOf(d.get(h)).doubleValue(),m=0>e?c.getYVal():Double.$valueOf(d.get(e)).doubleValue(),t=0>p?c.getColor():a.getColor1(JU.CU.getArgbFromString(d.get(p))),r;0>l?r=c.text:(r=d.get(l),'"'==r.charAt(0)&&(r=r.substring(1,r.length-1)));return(new JSV.common.ColoredAnnotation).setCA(n,m,b,r,t,!1,!1,0,0)}catch(s){if(v(s,Exception))return null;throw s;}},"JSV.api.JSVGraphics,JSV.common.JDXSpectrum,JU.List,JSV.common.Annotation");
R();c$=A(JSV.common.Annotation,"AType",Enum);k(c$,"Integration",0,[]);k(c$,"PeakList",1,[]);k(c$,"Measurements",2,[]);k(c$,"OverlayLegend",3,[]);k(c$,"Views",4,[]);k(c$,"NONE",5,[]);c$=Q()}),m("JSV.common"),u(["java.lang.Enum"],"JSV.common.ExportType",null,function(){c$=A(JSV.common,"ExportType",Enum);c$.getType=c(c$,"getType",function(a){a=a.toUpperCase();if(a.equalsIgnoreCase("Original..."))return JSV.common.ExportType.SOURCE;if(a.startsWith("XML"))return JSV.common.ExportType.AML;for(var b,d=0,
c=JSV.common.ExportType.values();d<c.length&&((b=c[d])||1);d++)if(b.name().equals(a))return b;return JSV.common.ExportType.UNK},"~S");c$.isExportMode=c(c$,"isExportMode",function(a){return JSV.common.ExportType.getType(a)!==JSV.common.ExportType.UNK},"~S");k(c$,"UNK",0,[]);k(c$,"SOURCE",1,[]);k(c$,"DIF",2,[]);k(c$,"FIX",3,[]);k(c$,"SQZ",4,[]);k(c$,"PAC",5,[]);k(c$,"XY",6,[]);k(c$,"DIFDUP",7,[]);k(c$,"PNG",8,[]);k(c$,"JPG",9,[]);k(c$,"SVG",10,[]);k(c$,"SVGI",11,[]);k(c$,"CML",12,[]);k(c$,"AML",13,
[]);k(c$,"PDF",14,[])}),m("JSV.common"),u(["java.lang.Enum","javajs.api.EventManager","java.util.Hashtable","JU.List"],"JSV.common.PanelData","java.lang.Boolean $.Double javajs.awt.Font JU.CU JSV.api.JSVGraphics JSV.common.Annotation $.Coordinate $.GraphSet $.JDXSpectrum $.JSVFileManager $.JSVersion $.MeasurementData $.Parameters $.PeakPickEvent $.ScriptToken $.SubSpecChangeEvent $.ZoomEvent JSV.dialog.JSVDialog J.util.Logger".split(" "),function(){c$=q(function(){this.graphSets=this.jsvp=this.options=
this.currentGraphSet=this.listeners=this.viewer=this.g2d0=this.g2d=null;this.currentSplitPoint=0;this.coordsClicked=this.coordClicked=this.thisWidget=null;this.isIntegralDrag=this.drawXAxisLeftToRight=this.shiftPressed=this.ctrlPressed=!1;this.xAxisLeftToRight=!0;this.scalingFactor=1;this.integralShiftMode=0;this.left=60;this.right=50;this.coordStr="";this.startupPinTip="Click to set.";this.title=null;this.endIndex=this.startIndex=this.thisHeight=this.thisWidth=this.nSpectra=this.clickCount=0;this.titleFontName=
this.displayFontName=this.viewTitle=this.commonFilePath=null;this.isPrinting=!1;this.doReset=!0;this.printingFontName=null;this.printGraphPosition="default";this.isLinked=this.display1D=this.titleDrawn=!1;this.spectra=this.printJobTitle=null;this.taintedAll=!0;this.mouseState=this.currentFont=null;this.titleOn=this.gridOn=!1;this.mouseY=this.mouseX=0;this.linking=!1;this.xPixelClicked=0;this.gMain=this.optionsSaved=this.bgcolor=this.BLACK=this.zoomBoxColor2=this.zoomBoxColor=this.highlightColor=this.unitsColor=
this.titleColor=this.scaleColor=this.plotAreaColor=this.peakTabColor=this.integralPlotColor=this.gridColor=this.coordinatesColor=null;s(this,arguments)},JSV.common,"PanelData",null,javajs.api.EventManager);M(c$,function(){this.listeners=new JU.List;this.options=new java.util.Hashtable});w(c$,function(a,b){this.viewer=b;this.jsvp=a;this.g2d=this.g2d0=b.g2d;this.BLACK=this.g2d.getColor1(0);this.highlightColor=this.g2d.getColor4(255,0,0,200);this.zoomBoxColor=this.g2d.getColor4(150,150,100,130);this.zoomBoxColor2=
this.g2d.getColor4(150,100,100,130)},"JSV.api.JSVPanel,JSV.common.JSViewer");c(c$,"addListener",function(a){this.listeners.contains(a)||this.listeners.addLast(a)},"JSV.api.PanelListener");c(c$,"getCurrentGraphSet",function(){return this.currentGraphSet});c(c$,"dispose",function(){this.jsvp=null;for(var a=0;a<this.graphSets.size();a++)this.graphSets.get(a).dispose();this.listeners=this.options=this.thisWidget=this.coordsClicked=this.coordClicked=this.currentGraphSet=this.currentFont=this.graphSets=
null});c(c$,"setViewTitle",function(a){this.viewTitle=a},"~S");c(c$,"getViewTitle",function(){return null==this.viewTitle?this.getTitle():this.viewTitle});c(c$,"getInfo",function(a,b){var d=new java.util.Hashtable,c=null;if(a)return this.currentGraphSet.getInfo(b,this.getCurrentSpectrumIndex());for(var f,c=this.options.entrySet().iterator();c.hasNext()&&((f=c.next())||1);)JSV.common.Parameters.putInfo(b,d,f.getKey().name(),f.getValue());JSV.common.Parameters.putInfo(b,d,"type",this.getSpectrumAt(0).getDataType());
JSV.common.Parameters.putInfo(b,d,"title",this.title);JSV.common.Parameters.putInfo(b,d,"nSets",Integer.$valueOf(this.graphSets.size()));c=new JU.List;for(f=this.graphSets.size();0<=--f;)c.addLast(this.graphSets.get(f).getInfo(b,-1));d.put("sets",c);return d},"~B,~S");c(c$,"setBooleans",function(a,b){if(null==b)for(var d,c=a.getBooleans().entrySet().iterator();c.hasNext()&&((d=c.next())||1);)this.setBooleans(a,d.getKey());else this.setBoolean(b,a.getBoolean(b))},"JSV.common.Parameters,JSV.common.ScriptToken");
c(c$,"setBoolean",function(a,b){this.taintedAll=!0;if(a===JSV.common.ScriptToken.REVERSEPLOT)this.currentGraphSet.setReversePlot(b);else switch(this.options.put(a,Boolean.$valueOf(b)),a){case JSV.common.ScriptToken.DISPLAY1D:case JSV.common.ScriptToken.DISPLAY2D:this.doReset=!0}},"JSV.common.ScriptToken,~B");c(c$,"getBoolean",function(a){if(a===JSV.common.ScriptToken.REVERSEPLOT)return this.currentGraphSet.reversePlot;if(null==this.options)return!1;a=this.options.get(a);return null!=a&&y(a,Boolean)&&
a===Boolean.TRUE},"JSV.common.ScriptToken");c(c$,"setFontName",function(a,b){switch(a){case JSV.common.ScriptToken.DISPLAYFONTNAME:this.displayFontName=b;break;case JSV.common.ScriptToken.TITLEFONTNAME:this.titleFontName=b}null!=b&&this.options.put(a,b)},"JSV.common.ScriptToken,~S");c(c$,"getDisplay1D",function(){return this.display1D});c(c$,"initOne",function(a){this.spectra=new JU.List;this.spectra.addLast(a);this.initMany(this.spectra,0,0)},"JSV.common.JDXSpectrum");c(c$,"initMany",function(a,
b,d){this.startIndex=b;this.endIndex=d;this.nSpectra=a.size();this.spectra=a;this.commonFilePath=a.get(0).getFilePath();for(b=0;b<this.nSpectra;b++)if(!this.commonFilePath.equalsIgnoreCase(a.get(b).getFilePath())){this.commonFilePath=null;break}this.setGraphSets(JSV.common.PanelData.LinkMode.NONE)},"JU.List,~N,~N");c(c$,"setGraphSets",function(a){this.graphSets=JSV.common.GraphSet.createGraphSetsAndSetLinkMode(this,this.jsvp,this.spectra,this.startIndex,this.endIndex,a);this.currentGraphSet=this.graphSets.get(0);
this.title=this.getSpectrum().getTitleLabel()},"JSV.common.PanelData.LinkMode");c(c$,"findMatchingPeakInfo",function(a){for(var b=null,d=0;d<this.graphSets.size()&&null==(b=this.graphSets.get(d).findMatchingPeakInfo(a));d++);return b},"JSV.common.PeakInfo");c(c$,"integrateAll",function(a){for(var b=this.graphSets.size();0<=--b;)this.graphSets.get(b).integrate(-1,a)},"JSV.common.ColorParameters");c(c$,"getNumberOfGraphSets",function(){return this.graphSets.size()});c(c$,"getTitle",function(){return this.title});
c(c$,"refresh",function(){this.doReset=!0});c(c$,"addAnnotation",function(a){a=this.currentGraphSet.addAnnotation(a,this.getTitle());null!=a&&(this.title=a)},"JU.List");c(c$,"addPeakHighlight",function(a){for(var b=0;b<this.graphSets.size();b++)this.graphSets.get(b).addPeakHighlight(a)},"JSV.common.PeakInfo");c(c$,"selectPeakByFileIndex",function(a,b){var d=this.currentGraphSet.selectPeakByFileIndex(a,b);if(null==d)for(var c=this.graphSets.size();0<=--c&&!(this.graphSets.get(c)!==this.currentGraphSet&&
null!=(d=this.graphSets.get(c).selectPeakByFileIndex(a,b))););return d},"~S,~S");c(c$,"setPlotColors",function(a){for(var b=this.graphSets.size();0<=--b;)this.graphSets.get(b).setPlotColors(a)},"~A");c(c$,"selectSpectrum",function(a,b,d,c){c&&this.currentGraphSet.selectSpectrum(a,b,d);for(c=0;c<this.graphSets.size();c+=1)this.graphSets.get(c)!==this.currentGraphSet&&this.graphSets.get(c).selectSpectrum(a,b,d)},"~S,~S,~S,~B");c(c$,"hasFileLoaded",function(a){for(var b=this.graphSets.size();0<=--b;)if(this.graphSets.get(b).hasFileLoaded(a))return!0;
return!1},"~S");c(c$,"clearAllView",function(){for(var a=this.graphSets.size();0<=--a;)this.graphSets.get(a).clearViews()});c(c$,"drawGraph",function(a,b,d,c,f){var h;this.gMain=a;this.display1D=!this.isLinked&&this.getBoolean(JSV.common.ScriptToken.DISPLAY1D);var e=40,p=50,l=this.isPrinting||this.doReset||this.thisWidth!=d||this.thisHeight!=c;l&&(this.taintedAll=!0);this.taintedAll&&this.g2d.fillBackground(a,this.bgcolor);b!==a&&(this.g2d.fillBackground(b,null),this.g2d.setStrokeBold(a,!1));this.isPrinting?
(e*=3,p*=3,this.scalingFactor=10,h=!1):(this.scalingFactor=1,h=this.getBoolean(JSV.common.ScriptToken.COORDINATESON),this.titleOn=this.getBoolean(JSV.common.ScriptToken.TITLEON),this.gridOn=this.getBoolean(JSV.common.ScriptToken.GRIDON));this.titleDrawn=this.doReset=!1;this.thisWidth=d;this.thisHeight=c;for(var k=this.graphSets.size();0<=--k;)this.graphSets.get(k).drawGraphSet(a,b,d,c,this.left,this.right,e,p,l,this.taintedAll);this.titleOn&&(!this.titleDrawn&&this.taintedAll)&&this.drawTitle(a,c*
this.scalingFactor,d*this.scalingFactor,this.getDrawTitle(this.isPrinting));h&&null!=this.coordStr&&this.drawCoordinates(b,e,this.thisWidth-this.right,e-20);f&&this.taintedAll&&(d=null!=this.commonFilePath?this.commonFilePath:1==this.graphSets.size()&&null!=this.currentGraphSet.getTitle(!0)?this.getSpectrum().getFilePath():null,null!=d&&this.printFilePath(a,this.left,c,d));this.isPrinting&&this.printVersion(a,c);this.taintedAll=this.isPrinting||a===b},"~O,~O,~N,~N,~B");c(c$,"drawCoordinates",function(a,
b,d,c){this.g2d.setGraphicsColor(a,this.coordinatesColor);b=this.setFont(a,this.jsvp.getWidth(),0,12,!0);this.g2d.drawString(a,this.coordStr,d-b.stringWidth(this.coordStr),c)},"~O,~N,~N,~N");c(c$,"setFont",function(a,b,d,c,f){return this.g2d.setFont(a,this.getFont(a,b,d,c,f))},"~O,~N,~N,~N,~B");c(c$,"printFilePath",function(a,b,d,c){b*=this.scalingFactor;d*=this.scalingFactor;0<c.indexOf("?")&&(c=c.substring(c.indexOf("?")+1));c=c.substring(c.lastIndexOf("/")+1);c=c.substring(c.lastIndexOf("\\")+
1);this.g2d.setGraphicsColor(a,this.BLACK);var f=this.setFont(a,1E3,0,9,!0);b!=this.left*this.scalingFactor&&(b-=f.stringWidth(c));this.g2d.drawString(a,c,b,d-f.getHeight())},"~O,~N,~N,~S");c(c$,"printVersion",function(a,b){this.g2d.setGraphicsColor(a,this.BLACK);var d=this.setFont(a,100,0,12,!0),c=this.jsvp.getApiPlatform().getDateFormat(!1)+" JSpecView "+JSV.common.JSVersion.VERSION_SHORT,f=d.stringWidth(c);this.g2d.drawString(a,c,(this.thisWidth-this.right)*this.scalingFactor-f,b*this.scalingFactor-
3*d.getHeight())},"~O,~N");c(c$,"drawTitle",function(a,b,d,c){c=c.$replace("\n"," ");var f=this.getFont(a,d,this.isPrinting||this.getBoolean(JSV.common.ScriptToken.TITLEBOLDON)?1:0,14,!0),h=f.stringWidth(c);h>d&&(f=n(14*d/h),10>f&&(f=10),f=this.getFont(a,d,this.isPrinting||this.getBoolean(JSV.common.ScriptToken.TITLEBOLDON)?1:0,f,!0));this.g2d.setGraphicsColor(a,this.titleColor);this.setCurrentFont(this.g2d.setFont(a,f));this.g2d.drawString(a,c,this.isPrinting?this.left*this.scalingFactor:5,b-n(f.getHeight()*
(this.isPrinting?2:0.5)))},"~O,~N,~N,~S");c(c$,"setCurrentFont",function(a){this.currentFont=a},"javajs.awt.Font");c(c$,"getFontHeight",function(){return this.currentFont.getAscent()});c(c$,"getStringWidth",function(a){return this.currentFont.stringWidth(a)},"~S");c(c$,"selectFromEntireSet",function(a){for(var b=0,d=0;b<this.graphSets.size();b++)if(-2147483648==a)this.graphSets.get(b).setSelected(-1);else for(var c=this.graphSets.get(b).spectra,f=0;f<c.size();f++,d++)(0>a||a==d)&&this.graphSets.get(b).setSelected(f)},
"~N");c(c$,"addToList",function(a,b){for(var d=0;d<this.spectra.size();d++)(0>a||d==a)&&b.addLast(this.spectra.get(d))},"~N,JU.List");c(c$,"scaleSelectedBy",function(a){for(var b=this.graphSets.size();0<=--b;)this.graphSets.get(b).scaleSelectedBy(a)},"~N");c(c$,"setCurrentGraphSet",function(a,b,d){b=a.getSplitPoint(b);var c=this.currentGraphSet!==a,f=c||this.currentSplitPoint!=b;this.currentGraphSet=a;this.currentSplitPoint=b;(c||1<a.nSplit&&f)&&this.setSpectrum(this.currentSplitPoint,!0);if(!c&&
(c=a.checkSpectrumClickedEvent(this.mouseX,this.mouseY,d),!c))return;(c||1<a.nSplit&&f)&&this.setSpectrum(this.currentSplitPoint,!0);a=a.getSpectrum();this.notifySubSpectrumChange(a.getSubIndex(),a)},"JSV.common.GraphSet,~N,~N");c(c$,"splitStack",function(a){this.currentGraphSet.splitStack(this.graphSets,a)},"~B");c(c$,"getNumberOfSpectraInCurrentSet",function(){return this.currentGraphSet.nSpectra});c(c$,"getStartingPointIndex",function(a){return this.currentGraphSet.viewData.getStartingPointIndex(a)},
"~N");c(c$,"getEndingPointIndex",function(a){return this.currentGraphSet.viewData.getEndingPointIndex(a)},"~N");c(c$,"haveSelectedSpectrum",function(){return this.currentGraphSet.haveSelectedSpectrum()});c(c$,"getShowAnnotation",function(a){return this.currentGraphSet.getShowAnnotation(a,-1)},"JSV.common.Annotation.AType");c(c$,"showAnnotation",function(a,b){this.currentGraphSet.setShowAnnotation(a,b)},"JSV.common.Annotation.AType,Boolean");c(c$,"setYStackOffsetPercent",function(a){this.currentGraphSet.yStackOffsetPercent=
a},"~N");c(c$,"setSpectrum",function(a,b){this.currentGraphSet.setSpectrum(a,b)},"~N,~B");c(c$,"getSpectrum",function(){return this.currentGraphSet.getSpectrum()});c(c$,"setSpectrum",function(a){this.taintedAll=!0;var b=this.currentGraphSet.getSpectrum();this.currentGraphSet.setSpectrumJDX(a);for(var d=0;d<this.spectra.size();d++)this.spectra.get(d)===b&&this.spectra.set(d,a)},"JSV.common.JDXSpectrum");c(c$,"isShowAllStacked",function(){return this.currentGraphSet.showAllStacked});c(c$,"getCurrentSpectrumIndex",
function(){return this.currentGraphSet.getCurrentSpectrumIndex()});c(c$,"getSpectrumAt",function(a){return this.currentGraphSet.getSpectrumAt(a)},"~N");c(c$,"addHighlight",function(a,b,d,c,f,h,e,p){(null==a?this.currentGraphSet:a).addHighlight(b,d,c,this.g2d.getColor4(f,h,e,p))},"JSV.common.GraphSet,~N,~N,JSV.common.JDXSpectrum,~N,~N,~N,~N");c(c$,"removeHighlight",function(a,b){this.currentGraphSet.removeHighlight(a,b)},"~N,~N");c(c$,"removeAllHighlights",function(){this.currentGraphSet.removeAllHighlights()});
c(c$,"setZoom",function(a,b,d,c){this.currentGraphSet.setZoom(a,b,d,c);this.taintedAll=this.doReset=!0;this.notifyListeners(new JSV.common.ZoomEvent(a,b,d,c))},"~N,~N,~N,~N");c(c$,"resetView",function(){this.currentGraphSet.resetView()});c(c$,"previousView",function(){this.currentGraphSet.previousView()});c(c$,"nextView",function(){this.currentGraphSet.nextView()});c(c$,"getSelectedIntegral",function(){return this.currentGraphSet.getSelectedIntegral()});c(c$,"advanceSubSpectrum",function(a){this.currentGraphSet.advanceSubSpectrum(a)},
"~N");c(c$,"setSelectedIntegral",function(a){this.currentGraphSet.setSelectedIntegral(a)},"~N");c(c$,"scaleYBy",function(a){this.currentGraphSet.scaleYBy(a)},"~N");c(c$,"toPeak",function(a){this.currentGraphSet.toPeak(a)},"~N");c(c$,"getClickedCoordinate",function(){return this.coordClicked});c(c$,"getPickedCoordinates",function(a,b){return JSV.common.Coordinate.getPickedCoordinates(this.coordsClicked,this.coordClicked,a,b)},"JSV.common.Coordinate,JSV.common.Coordinate");c(c$,"shiftSpectrum",function(a,
b){return this.currentGraphSet.shiftSpectrum(a,b)},"~N,~N");c(c$,"findX",function(a,b){this.currentGraphSet.setXPointer(a,b)},"JSV.common.JDXSpectrum,~N");c(c$,"setXPointers",function(a,b,d,c){this.currentGraphSet.setXPointer(a,b);this.currentGraphSet.setXPointer2(d,c)},"JSV.common.JDXSpectrum,~N,JSV.common.JDXSpectrum,~N");c(c$,"isCurrentGraphSet",function(a){return a===this.currentGraphSet},"JSV.common.GraphSet");c(c$,"repaint",function(){this.jsvp.doRepaint(!1)});c(c$,"setToolTipText",function(a){this.jsvp.setToolTipText(a)},
"~S");c(c$,"setHighlightColor",function(a){this.jsvp.getPanelData().setColor(JSV.common.ScriptToken.HIGHLIGHTCOLOR,a)},"javajs.api.GenericColor");c(c$,"getInput",function(a,b,d){return this.jsvp.getInput(a,b,d)},"~S,~S,~S");c(c$,"getFont",function(a,b,d,c,f){c*=this.scalingFactor;f?400>b&&(c=b*c/400):250>b&&(c=b*c/250);b=this.jsvp.getFontFaceID(this.isPrinting?this.printingFontName:this.displayFontName);return this.currentFont=javajs.awt.Font.createFont3D(b,d,c,c,this.jsvp.getApiPlatform(),a)},"~O,~N,~N,~N,~B");
c(c$,"notifySubSpectrumChange",function(a,b){this.notifyListeners(new JSV.common.SubSpecChangeEvent(a,null==b?null:b.getTitleLabel()))},"~N,JSV.common.JDXSpectrum");c(c$,"notifyPeakPickedListeners",function(a){null==a&&(a=new JSV.common.PeakPickEvent(this.jsvp,this.coordClicked,this.getSpectrum().getAssociatedPeakInfo(this.xPixelClicked,this.coordClicked)));this.notifyListeners(a)},"JSV.common.PeakPickEvent");c(c$,"notifyListeners",function(a){for(var b=0;b<this.listeners.size();b++)null!=this.listeners.get(b)&&
this.listeners.get(b).panelEvent(a)},"~O");c(c$,"escapeKeyPressed",function(a){this.currentGraphSet.escapeKeyPressed(a)},"~B");c(c$,"hasFocus",function(){return this.jsvp.hasFocus()});c(c$,"isMouseUp",function(){return this.mouseState===JSV.common.PanelData.Mouse.UP});c(c$,"doMouseMoved",function(a,b){this.mouseX=a;this.mouseY=b;this.mouseState=JSV.common.PanelData.Mouse.UP;this.clickCount=0;var d=JSV.common.GraphSet.findGraphSet(this.graphSets,a,b);null!=d&&d.mouseMovedEvent(a,b)},"~N,~N");c(c$,
"doMousePressed",function(a,b){this.mouseState=JSV.common.PanelData.Mouse.DOWN;var d=JSV.common.GraphSet.findGraphSet(this.graphSets,a,b);null!=d&&(this.setCurrentGraphSet(d,b,0),this.clickCount=++this.clickCount%3,d.checkWidgetEvent(a,b,!0))},"~N,~N");c(c$,"doMouseDragged",function(a,b){this.isIntegralDrag=(new Boolean(this.isIntegralDrag|this.ctrlPressed)).valueOf();this.mouseState=JSV.common.PanelData.Mouse.DOWN;JSV.common.GraphSet.findGraphSet(this.graphSets,a,b)===this.currentGraphSet&&(this.currentGraphSet.checkWidgetEvent(a,
b,!1),this.currentGraphSet.mouseMovedEvent(a,b))},"~N,~N");c(c$,"doMouseReleased",function(a,b,d){this.mouseState=JSV.common.PanelData.Mouse.UP;!(null==this.thisWidget&&null==this.currentGraphSet.pendingMeasurement)&&d&&(this.currentGraphSet.mouseReleasedEvent(a,b),this.thisWidget=null,this.isIntegralDrag=!1,this.integralShiftMode=0)},"~N,~N,~B");c(c$,"doMouseClicked",function(a,b,d){var c=JSV.common.GraphSet.findGraphSet(this.graphSets,a,b);null!=c&&(this.setCurrentGraphSet(c,b,this.clickCount),
c.mouseClickedEvent(a,b,this.clickCount,d),this.repaint())},"~N,~N,~B");c(c$,"hasCurrentMeasurements",function(a){return this.currentGraphSet.hasCurrentMeasurement(a)},"JSV.common.Annotation.AType");c(c$,"getDialog",function(a){return this.currentGraphSet.getDialog(a,-1)},"JSV.common.Annotation.AType");c(c$,"addDialog",function(a,b,d){this.currentGraphSet.addDialog(a,b,d)},"~N,JSV.common.Annotation.AType,JSV.api.AnnotationData");c(c$,"getPeakListing",function(a,b){null!=a&&this.currentGraphSet.getPeakListing(-1,
a,!0);this.currentGraphSet.setPeakListing(b)},"JSV.common.Parameters,Boolean");c(c$,"checkIntegral",function(a,b){this.currentGraphSet.checkIntegral(a,b)},"JSV.common.Parameters,~S");c(c$,"setIntegrationRatios",function(a){this.currentGraphSet.setIntegrationRatios(a)},"~S");c(c$,"getView",function(){return this.currentGraphSet.getCurrentView()});c(c$,"closeAllDialogsExcept",function(a){for(var b=this.graphSets.size();0<=--b;)this.graphSets.get(b).closeDialogsExcept(a)},"JSV.common.Annotation.AType");
c(c$,"removeDialog",function(a){this.currentGraphSet.removeDialog(a)},"JSV.dialog.JSVDialog");c(c$,"normalizeIntegral",function(){var a=this.getSelectedIntegral();if(null!=a){var b=a.text;0==b.length&&(b=""+a.getValue());a=this.getInput("Enter a new value for this integral","Normalize Integral",b);try{this.setSelectedIntegral(Double.parseDouble(a))}catch(d){if(!v(d,Exception))throw d;}}});c(c$,"getDrawTitle",function(a){var b=null;a?b=this.printJobTitle:1==this.nSpectra?b=this.getSpectrum().getPeakTitle():
null!=this.viewTitle?(null!=this.currentGraphSet.getTitle(!1)&&(b=this.getSpectrum().getPeakTitle()),null==b&&(b=this.viewTitle)):b=this.jsvp.getTitle().trim();0<=b.indexOf("\n")&&(b=b.substring(0,b.indexOf("\n")).trim());return b},"~B");c(c$,"getPrintJobTitle",function(a){var b=null;1==this.nSpectra?b=this.getSpectrum().getTitle():null!=this.viewTitle?(1==this.graphSets.size()&&(b=this.currentGraphSet.getTitle(a)),null==b&&(b=this.viewTitle)):b=this.jsvp.getTitle().trim();0<=b.indexOf("\n")&&(b=
b.substring(0,b.indexOf("\n")).trim());return b},"~B");c(c$,"linkSpectra",function(a){a===JSV.common.PanelData.LinkMode.ALL&&(a=2==this.nSpectra?JSV.common.PanelData.LinkMode.AB:3==this.nSpectra?JSV.common.PanelData.LinkMode.ABC:JSV.common.PanelData.LinkMode.NONE);a!==JSV.common.PanelData.LinkMode.NONE&&a.toString().length!=this.nSpectra||this.setGraphSets(a)},"JSV.common.PanelData.LinkMode");c(c$,"doZoomLinked",function(a,b,d,c,f,h){if(!this.linking){this.linking=!0;for(var e=a.getSpectrumAt(0),
p=this.graphSets.size();0<=--p;){var l=this.graphSets.get(p);l!==a&&JSV.common.JDXSpectrum.areXScalesCompatible(e,this.graphSets.get(p).getSpectrumAt(0),!1,!0)&&l.doZoom(b,0,d,0,h,!1,f,!1,c)}this.linking=!1}},"JSV.common.GraphSet,~N,~N,~B,~B,~B");c(c$,"clearLinkViews",function(a){if(!this.linking){this.linking=!0;for(var b=a.getSpectrum(),d=this.graphSets.size();0<=--d;){var c=this.graphSets.get(d);c!==a&&JSV.common.JDXSpectrum.areXScalesCompatible(b,this.graphSets.get(d).getSpectrum(),!1,!0)&&c.clearViews()}this.linking=
!1}},"JSV.common.GraphSet");c(c$,"setlinkedXMove",function(a,b,d){if(!this.linking){this.linking=!0;for(var c=a.getSpectrum(),f=this.graphSets.size();0<=--f;){var h=this.graphSets.get(f);h!==a&&JSV.common.JDXSpectrum.areXScalesCompatible(c,this.graphSets.get(f).getSpectrum(),!1,!0)&&null==h.imageView&&(d?h.setXPixelMovedTo(1.7976931348623157E308,b,0,0):h.setXPixelMovedTo(b,1.7976931348623157E308,0,0))}this.linking=!1}},"JSV.common.GraphSet,~N,~B");c(c$,"set2DCrossHairsLinked",function(a,b,d,c){0.1>
Math.abs(b-d)&&(b=d=1.7976931348623157E308);for(var f=this.graphSets.size();0<=--f;){var h=this.graphSets.get(f);h!==a&&h.set2DXY(b,d,c)}},"JSV.common.GraphSet,~N,~N,~B");c(c$,"dialogsToFront",function(){this.currentGraphSet.dialogsToFront()});c(c$,"setColor",function(a,b){null!=b&&this.options.put(a,JU.CU.toRGBHexString(b));switch(a){case JSV.common.ScriptToken.BACKGROUNDCOLOR:this.jsvp.setBackgroundColor(this.bgcolor=b);this.taintedAll=!0;break;case JSV.common.ScriptToken.COORDINATESCOLOR:this.coordinatesColor=
b;break;case JSV.common.ScriptToken.GRIDCOLOR:this.gridColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.HIGHLIGHTCOLOR:this.highlightColor=b;255==this.highlightColor.getOpacity255()&&this.highlightColor.setOpacity255(150);break;case JSV.common.ScriptToken.INTEGRALPLOTCOLOR:this.integralPlotColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.PEAKTABCOLOR:this.peakTabColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.PLOTCOLOR:for(var d=this.graphSets.size();0<=--d;)this.graphSets.get(d).setPlotColor0(b);
this.taintedAll=!0;break;case JSV.common.ScriptToken.PLOTAREACOLOR:this.plotAreaColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.SCALECOLOR:this.scaleColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.TITLECOLOR:this.titleColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.UNITSCOLOR:this.unitsColor=b;this.taintedAll=!0;break;case JSV.common.ScriptToken.ZOOMBOXCOLOR:this.zoomBoxColor=b;break;case JSV.common.ScriptToken.ZOOMBOXCOLOR2:this.zoomBoxColor2=b;break;default:J.util.Logger.warn("AwtPanel --- unrecognized color: "+
a)}},"JSV.common.ScriptToken,javajs.api.GenericColor");c(c$,"getColor",function(a){switch(a){default:return J.util.Logger.error("awtgraphset missing color "+a),this.BLACK;case JSV.common.ScriptToken.ZOOMBOXCOLOR2:return this.zoomBoxColor2;case JSV.common.ScriptToken.ZOOMBOXCOLOR:return this.zoomBoxColor;case JSV.common.ScriptToken.HIGHLIGHTCOLOR:return this.highlightColor;case JSV.common.ScriptToken.INTEGRALPLOTCOLOR:return this.integralPlotColor;case JSV.common.ScriptToken.GRIDCOLOR:return this.gridColor;
case JSV.common.ScriptToken.PEAKTABCOLOR:return this.peakTabColor;case JSV.common.ScriptToken.PLOTAREACOLOR:return this.plotAreaColor;case JSV.common.ScriptToken.SCALECOLOR:return this.scaleColor;case JSV.common.ScriptToken.TITLECOLOR:return this.titleColor;case JSV.common.ScriptToken.UNITSCOLOR:return this.unitsColor}},"JSV.common.ScriptToken");c(c$,"getOverlayLegendData",function(){for(var a=this.currentGraphSet.nSpectra,b=Array(a),d=this.getSpectrumAt(0).getFilePath(),c=this.getSpectrumAt(a-1).getFilePath(),
d=!d.equals(c),c=0;c<a;c++){var f=Array(3),h=this.getSpectrumAt(c);this.title=h.getTitle();d&&(this.title=JSV.common.JSVFileManager.getName(h.getFilePath())+" - "+this.title);h=this.getCurrentPlotColor(c);f[0]=new Integer(c+1);f[1]=h;f[2]=" "+this.title;b[c]=f}return b});c(c$,"setColorOrFont",function(a,b){if(null==b){for(var d,c=a.elementColors.entrySet().iterator();c.hasNext()&&((d=c.next())||1);)this.setColorOrFont(a,d.getKey());this.setColorOrFont(a,JSV.common.ScriptToken.DISPLAYFONTNAME);this.setColorOrFont(a,
JSV.common.ScriptToken.TITLEFONTNAME)}else{switch(b){case JSV.common.ScriptToken.DISPLAYFONTNAME:this.setFontName(b,a.displayFontName);return;case JSV.common.ScriptToken.TITLEFONTNAME:this.setFontName(b,a.titleFontName);return}this.setColor(b,a.getElementColor(b))}},"JSV.common.ColorParameters,JSV.common.ScriptToken");c(c$,"getCurrentPlotColor",function(a){return this.currentGraphSet.getPlotColor(a)},"~N");c(c$,"setPrint",function(a,b){null==a?(this.options.putAll(this.optionsSaved),this.optionsSaved=
null):(this.printJobTitle=a.title,this.printingFontName=b,this.printGraphPosition=a.position,this.optionsSaved=new java.util.Hashtable,this.optionsSaved.putAll(this.options),this.gridOn=a.showGrid,this.titleOn=a.showTitle,this.setBoolean(JSV.common.ScriptToken.XSCALEON,a.showXScale),this.setBoolean(JSV.common.ScriptToken.XUNITSON,a.showXScale),this.setBoolean(JSV.common.ScriptToken.YSCALEON,a.showYScale),this.setBoolean(JSV.common.ScriptToken.YUNITSON,a.showYScale))},"JSV.common.PrintLayout,~S");
c(c$,"showDialog",function(a){var b=this.getDialog(a);this.closeAllDialogsExcept(a);if(null!=b&&y(b,JSV.dialog.JSVDialog))return b.reEnable();var d=this.getCurrentSpectrumIndex();if(0>d)return this.jsvp.showMessage("To enable "+a+" first select a spectrum by clicking on it.",""+a),null;var c=this.getSpectrum(),f=this.viewer.getDialog(a,c);null==b&&a===JSV.common.Annotation.AType.Measurements&&(b=new JSV.common.MeasurementData(JSV.common.Annotation.AType.Measurements,c));null!=b&&f.setData(b);this.addDialog(d,
a,f);f.reEnable();return f},"JSV.common.Annotation.AType");c(c$,"printPdf",function(a,b){var d=!b.layout.equals("landscape");this.print(a,d?b.imageableHeight:b.imageableWidth,d?b.imageableWidth:b.imageableHeight,b.imageableX,b.imageableY,b.paperHeight,b.paperWidth,d,0)},"JSV.api.JSVGraphics,JSV.common.PrintLayout");c(c$,"print",function(a,b,d,c,f,h,e,p,l){this.g2d=this.g2d0;if(0==l)return this.isPrinting=!0,l=!1,y(a,JSV.api.JSVGraphics)&&(this.g2d=a,a=this.gMain),this.printGraphPosition.equals("default")?
p?(b=450,d=280):(b=280,d=450):this.printGraphPosition.equals("fit to page")?l=!0:p?(b=450,d=280,c=n(n(e-d)/2),f=n(n(h-b)/2)):(b=280,d=450,f=n(n(e-280)/2),c=n(n(h-450)/2)),this.g2d.translateScale(a,c,f,0.1),this.taintedAll=!0,this.drawGraph(a,a,n(d),n(b),l),this.isPrinting=!1,0;this.isPrinting=!1;return 1},"~O,~N,~N,~N,~N,~N,~N,~B,~N");e(c$,"keyPressed",function(a,b){if(this.isPrinting)return!1;this.checkKeyControl(a,!0);switch(a){case 27:case 127:case 8:return this.escapeKeyPressed(27!=a),this.isIntegralDrag=
!1,this.repaint(),!0}var d=0,c=!1;if(0==b)switch(a){case 37:case 39:this.doMouseMoved(39==a?++this.mouseX:--this.mouseX,this.mouseY);this.repaint();c=!0;break;case 33:case 34:d=33==a?JSV.common.GraphSet.RT2:1/JSV.common.GraphSet.RT2;c=!0;break;case 40:case 38:c=40==a?-1:1,null==this.getSpectrumAt(0).getSubSpectra()?this.notifySubSpectrumChange(c,null):(this.advanceSubSpectrum(c),this.repaint()),c=!0}else if(this.checkMod(a,2))switch(a){case 40:case 38:case 45:case 61:d=61==a||38==a?JSV.common.GraphSet.RT2:
1/JSV.common.GraphSet.RT2;c=!0;break;case 37:case 39:this.toPeak(39==a?1:-1),c=!0}0!=d&&(this.scaleYBy(d),this.repaint());return c},"~N,~N");e(c$,"keyReleased",function(a){this.isPrinting||this.checkKeyControl(a,!1)},"~N");e(c$,"keyTyped",function(a,b){if(this.isPrinting)return!1;switch(a){case "n":if(0!=b)break;this.normalizeIntegral();return!0;case 26:if(2!=b)break;this.previousView();this.repaint();return!0;case 25:if(2!=b)break;this.nextView();this.repaint();return!0}return!1},"~N,~N");e(c$,"mouseAction",
function(a,b,d,c,f,h){if(!this.isPrinting)switch(a){case 4:if(!this.checkMod(h,16))break;this.doMousePressed(d,c);break;case 5:this.doMouseReleased(d,c,this.checkMod(h,16));this.repaint();break;case 1:this.doMouseDragged(d,c);this.repaint();break;case 0:this.jsvp.getFocusNow(!1);if(0!=(h&28)){this.doMouseDragged(d,c);this.repaint();break}this.doMouseMoved(d,c);null!=this.coordStr&&this.repaint();break;case 2:if(this.checkMod(h,4)){this.viewer.showMenu(d,c);break}this.ctrlPressed=!1;this.doMouseClicked(d,
c,this.updateControlPressed(h))}},"~N,~N,~N,~N,~N,~N");c(c$,"checkMod",function(a,b){return(a&b)==b},"~N,~N");c(c$,"checkKeyControl",function(a,b){switch(a){case 17:case 157:this.ctrlPressed=b;break;case 16:this.shiftPressed=b}},"~N,~B");c(c$,"updateControlPressed",function(a){return this.ctrlPressed=(new Boolean(this.ctrlPressed|(this.checkMod(a,2)||this.checkMod(a,20)))).valueOf()},"~N");e(c$,"mouseEnterExit",function(a,b,d,c){c?(this.thisWidget=null,this.isIntegralDrag=!1,this.integralShiftMode=
0):this.jsvp.getFocusNow(!1)},"~N,~N,~N,~B");R();c$=A(JSV.common.PanelData,"LinkMode",Enum);c$.getMode=c(c$,"getMode",function(a){if(a.equals("*"))return JSV.common.PanelData.LinkMode.ALL;for(var b,d=0,c=JSV.common.PanelData.LinkMode.values();d<c.length&&((b=c[d])||1);d++)if(b.name().equalsIgnoreCase(a))return b;return JSV.common.PanelData.LinkMode.NONE},"~S");k(c$,"ALL",0,[]);k(c$,"NONE",1,[]);k(c$,"AB",2,[]);k(c$,"ABC",3,[]);c$=Q();R();c$=A(JSV.common.PanelData,"Mouse",Enum);k(c$,"UP",0,[]);k(c$,
"DOWN",1,[]);c$=Q();B(c$,"defaultPrintHeight",450,"defaultPrintWidth",280,"topMargin",40,"bottomMargin",50,"leftMargin",60,"rightMargin",50)}),m("JSV.common"),u(["java.lang.Enum"],"JSV.common.ScriptToken",["java.util.Hashtable","JU.List","$.SB","JSV.common.ScriptTokenizer"],function(){c$=q(function(){this.tip=null;s(this,arguments)},JSV.common,"ScriptToken",Enum);c(c$,"getTip",function(){return"  "+("T"===this.tip?"TRUE/FALSE/TOGGLE":"TF"===this.tip?"TRUE or FALSE":"C"===this.tip?"<color>":this.tip)});
w(c$,function(){});w(c$,function(a){this.tip=a},"~S");c$.getScriptToken=c(c$,"getScriptToken",function(a){if(null==JSV.common.ScriptToken.htParams){JSV.common.ScriptToken.htParams=new java.util.Hashtable;for(var b,d=0,c=JSV.common.ScriptToken.values();d<c.length&&((b=c[d])||1);d++)JSV.common.ScriptToken.htParams.put(b.name(),b)}a=JSV.common.ScriptToken.htParams.get(a.toUpperCase());return null==a?JSV.common.ScriptToken.UNKNOWN:a},"~S");c$.getScriptTokenList=c(c$,"getScriptTokenList",function(a,b){a=
a.toUpperCase();var d=new JU.List,c=JSV.common.ScriptToken.getScriptToken(a);if(b)null!=c&&d.addLast(c);else for(var f,c=JSV.common.ScriptToken.htParams.entrySet().iterator();c.hasNext()&&((f=c.next())||1);)f.getKey().startsWith(a)&&null!=f.getValue().tip&&d.addLast(f.getValue());return d},"~S,~B");c$.getValue=c(c$,"getValue",function(a,b,d){if(!b.hasMoreTokens())return"";switch(a){default:return JSV.common.ScriptTokenizer.nextStringToken(b,!0);case JSV.common.ScriptToken.CLOSE:case JSV.common.ScriptToken.GETPROPERTY:case JSV.common.ScriptToken.INTEGRATION:case JSV.common.ScriptToken.INTEGRATE:case JSV.common.ScriptToken.JMOL:case JSV.common.ScriptToken.LABEL:case JSV.common.ScriptToken.LOAD:case JSV.common.ScriptToken.PEAK:case JSV.common.ScriptToken.PLOTCOLORS:case JSV.common.ScriptToken.YSCALE:case JSV.common.ScriptToken.WRITE:return JSV.common.ScriptToken.removeCommandName(d);
case JSV.common.ScriptToken.SELECT:case JSV.common.ScriptToken.OVERLAY:case JSV.common.ScriptToken.VIEW:case JSV.common.ScriptToken.ZOOM:return JSV.common.ScriptToken.removeCommandName(d).$replace(","," ").trim()}},"JSV.common.ScriptToken,JSV.common.ScriptTokenizer,~S");c$.removeCommandName=c(c$,"removeCommandName",function(a){var b=a.indexOf(" ");return 0>b?"":a.substring(b).trim()},"~S");c$.getKey=c(c$,"getKey",function(a){var b=a.nextToken();if(b.startsWith("#")||b.startsWith("//"))return null;
b.equalsIgnoreCase("SET")&&(b=a.nextToken());return b.toUpperCase()},"JSV.common.ScriptTokenizer");c$.getTokens=c(c$,"getTokens",function(a){var b=new JU.List;for(a=new JSV.common.ScriptTokenizer(a,!1);a.hasMoreTokens();){var d=JSV.common.ScriptTokenizer.nextStringToken(a,!1);if(d.startsWith("//")||d.startsWith("#"))break;b.addLast(d)}return b},"~S");c$.getNameList=c(c$,"getNameList",function(a){if(0==a.size())return"";for(var b=new JU.SB,d=0;d<a.size();d++)b.append(",").append(a.get(d).toString());
return b.toString().substring(1)},"JU.List");c$.htParams=null;k(c$,"UNKNOWN",0,[]);k(c$,"APPLETID",1,[]);k(c$,"APPLETREADYCALLBACKFUNCTIONNAME",2,[]);k(c$,"AUTOINTEGRATE",3,["TF"]);k(c$,"BACKGROUNDCOLOR",4,["C"]);k(c$,"CLOSE",5,["spectrumId or fileName or ALL"]);k(c$,"COMPOUNDMENUON",6,["TF"]);k(c$,"COORDCALLBACKFUNCTIONNAME",7,[]);k(c$,"COORDINATESCOLOR",8,["C"]);k(c$,"COORDINATESON",9,["T"]);k(c$,"DEBUG",10,["TF"]);k(c$,"DISPLAYFONTNAME",11,["fontName"]);k(c$,"DISPLAY1D",12,["T"]);k(c$,"DISPLAY2D",
13,["T"]);k(c$,"ENABLEZOOM",14,["T"]);k(c$,"ENDINDEX",15,[]);k(c$,"FINDX",16,["x-value"]);k(c$,"GETPROPERTY",17,["[ALL] [propertyName]"]);k(c$,"GETSOLUTIONCOLOR",18,[]);k(c$,"GRIDCOLOR",19,["C"]);k(c$,"GRIDON",20,["T"]);k(c$,"HIDDEN",21,["TF"]);k(c$,"HIGHLIGHTCOLOR",22,["C"]);k(c$,"INTEGRALOFFSET",23,["percent"]);k(c$,"INTEGRALRANGE",24,["percent"]);k(c$,"INTEGRATE",25,[]);k(c$,"INTEGRATION",26,["ON/OFF/AUTO/TOGGLE/MIN value/MARK ppm1-ppm2:norm,ppm3-ppm4,... (start with 0-0 to clear)"]);k(c$,"INTEGRALPLOTCOLOR",
27,[]);k(c$,"INTEGRATIONRATIOS",28,[]);k(c$,"INTERFACE",29,[]);k(c$,"IRMODE",30,["A or T or TOGGLE"]);k(c$,"JMOL",31,["...Jmol command..."]);k(c$,"JSV",32,[]);k(c$,"LABEL",33,['x y [color and/or "text"]']);k(c$,"LINK",34,["AB or ABC or NONE or ALL"]);k(c$,"LOAD",35,['[APPEND] "fileName" [first] [last]; use "" to reload current file']);k(c$,"LOADFILECALLBACKFUNCTIONNAME",36,[]);k(c$,"LOADIMAGINARY",37,["T/F - default is to NOT load imaginary spectra"]);k(c$,"MENUON",38,[]);k(c$,"OBSCURE",39,[]);k(c$,
"OVERLAY",40,[]);k(c$,"OVERLAYSTACKED",41,["TF"]);k(c$,"PEAK",42,['<type(IR,CNMR,HNMR,MS, etc)> id=xxx or "match" [ALL], for example: PEAK HNMR id=3']);k(c$,"PEAKCALLBACKFUNCTIONNAME",43,[]);k(c$,"PEAKLIST",44,[" Example: PEAKLIST threshold=20 [%, or include=10] skip=0 interpolate=parabolic [or NONE]"]);k(c$,"PEAKTABCOLOR",45,["C"]);k(c$,"PLOTAREACOLOR",46,["C"]);k(c$,"PLOTCOLOR",47,["C"]);k(c$,"PLOTCOLORS",48,["color,color,color,..."]);k(c$,"PRINT",49,[]);k(c$,"REVERSEPLOT",50,["T"]);k(c$,"SCALEBY",
51,["factor"]);k(c$,"SCALECOLOR",52,["C"]);k(c$,"SCRIPT",53,["filename.jsv"]);k(c$,"SELECT",54,["spectrumID, spectrumID,..."]);k(c$,"SETPEAK",55,["x (ppm) or NONE does peak search, unlike SETX -- NMR only"]);k(c$,"SETX",56,["x (ppm) does no peak search, unlike SETPEAK -- NMR only"]);k(c$,"SHIFTX",57,["dx (ppm) or NONE -- NMR only"]);k(c$,"SHOWERRORS",58,[]);k(c$,"SHOWINTEGRATION",59,["T"]);k(c$,"SHOWKEY",60,["T"]);k(c$,"SHOWMEASUREMENTS",61,["T"]);k(c$,"SHOWMENU",62,[]);k(c$,"SHOWPEAKLIST",63,["T"]);
k(c$,"SHOWPROPERTIES",64,[]);k(c$,"SHOWSOURCE",65,[]);k(c$,"SPECTRUM",66,["spectrumID"]);k(c$,"SPECTRUMNUMBER",67,[]);k(c$,"STACKOFFSETY",68,["percent"]);k(c$,"STARTINDEX",69,[]);k(c$,"SYNCCALLBACKFUNCTIONNAME",70,[]);k(c$,"SYNCID",71,[]);k(c$,"TEST",72,[]);k(c$,"TITLEON",73,["T"]);k(c$,"TITLEBOLDON",74,["T"]);k(c$,"TITLECOLOR",75,["C"]);k(c$,"TITLEFONTNAME",76,["fontName"]);k(c$,"UNITSCOLOR",77,["C"]);k(c$,"VERSION",78,[]);k(c$,"VIEW",79,['spectrumID, spectrumID, ... Example: VIEW 3.1, 3.2  or  VIEW "acetophenone"']);
k(c$,"XSCALEON",80,["T"]);k(c$,"XUNITSON",81,["T"]);k(c$,"YSCALE",82,["[ALL] lowValue highValue"]);k(c$,"YSCALEON",83,["T"]);k(c$,"YUNITSON",84,["T"]);k(c$,"WINDOW",85,[]);k(c$,"WRITE",86,['[XY,DIF,DIFDUP,PAC,FIX,SQZ,AML,CML,JPG,PDF,PNG,SVG] "filename"']);k(c$,"ZOOM",87,["OUT or x1,x2 or x1,y1 x2,y2"]);k(c$,"ZOOMBOXCOLOR",88,[]);k(c$,"ZOOMBOXCOLOR2",89,[])}),m("JSV.common"),u(null,"JSV.common.PeakInfo",["JU.PT"],function(){c$=q(function(){this.px1=this.px0=this.yMax=this.yMin=this.xMax=this.xMin=
0;this._match=this.spectrum=this.id=this.atoms=this.model=this.title=this.filePathForwardSlash=this.file=this.index=this.type2=this.type=this.stringInfo=null;s(this,arguments)},JSV.common,"PeakInfo");w(c$,function(){});w(c$,function(a){this.stringInfo=a;this.type=JU.PT.getQuotedAttribute(a,"type");null==this.type&&(this.type="");this.type=this.type.toUpperCase();var b=this.type.indexOf("/");this.type2=0>b?"":JSV.common.PeakInfo.fixType(this.type.substring(this.type.indexOf("/")+1));this.type=0<=b?
JSV.common.PeakInfo.fixType(this.type.substring(0,b))+"/"+this.type2:JSV.common.PeakInfo.fixType(this.type);this.id=JU.PT.getQuotedAttribute(a,"id");this.index=JU.PT.getQuotedAttribute(a,"index");this.file=JU.PT.getQuotedAttribute(a,"file");System.out.println("pi file="+this.file);this.filePathForwardSlash=null==this.file?null:this.file.$replace("\\","/");this.model=JU.PT.getQuotedAttribute(a,"model");a.contains('baseModel=""')||(this.atoms=JU.PT.getQuotedAttribute(a,"atoms"));this.title=JU.PT.getQuotedAttribute(a,
"title");this._match=JU.PT.getQuotedAttribute(a,"_match");this.xMax=JU.PT.parseFloat(JU.PT.getQuotedAttribute(a,"xMax"));this.xMin=JU.PT.parseFloat(JU.PT.getQuotedAttribute(a,"xMin"));this.yMax=JU.PT.parseFloat(JU.PT.getQuotedAttribute(a,"yMax"));this.yMin=JU.PT.parseFloat(JU.PT.getQuotedAttribute(a,"yMin"))},"~S");c(c$,"isClearAll",function(){return null==this.spectrum});c(c$,"getType",function(){return this.type});c(c$,"getAtoms",function(){return this.atoms});c(c$,"getXMax",function(){return this.xMax});
c(c$,"getXMin",function(){return this.xMin});c(c$,"getYMin",function(){return this.yMin});c(c$,"getYMax",function(){return this.yMax});c(c$,"getX",function(){return(this.xMax+this.xMin)/2});c(c$,"getMatch",function(){return this._match});c$.fixType=c(c$,"fixType",function(a){return a.equals("HNMR")?"1HNMR":a.equals("CNMR")?"13CNMR":a},"~S");e(c$,"toString",function(){return this.stringInfo});c(c$,"getIndex",function(){return this.index});c(c$,"getTitle",function(){return this.title});c(c$,"checkFileIndex",
function(a,b){return b.equals(this.index)&&(a.equals(this.file)||a.equals(this.filePathForwardSlash))},"~S,~S");c(c$,"checkFileTypeModel",function(a,b,d){return a.equals(this.file)&&this.checkModel(d)&&this.type.endsWith(b)},"~S,~S,~S");c(c$,"checkTypeModel",function(a,b){return this.checkType(a)&&this.checkModel(b)},"~S,~S");c(c$,"checkModel",function(a){return null!=a&&a.equals(this.model)},"~S");c(c$,"checkType",function(a){return a.endsWith(this.type)},"~S");c(c$,"checkTypeMatch",function(a){return this.checkType(a.type)&&
(this.checkId(a._match)||this.checkModel(a._match)||0<=this.title.toUpperCase().indexOf(a._match))},"JSV.common.PeakInfo");c(c$,"checkId",function(a){return null!=this.id&&null!=a&&a.toUpperCase().startsWith("ID=")&&a.substring(3).equals(this.id)},"~S");c(c$,"getModel",function(){return this.model});c(c$,"getFilePath",function(){return this.file});c(c$,"autoSelectOnLoad",function(){return this.type.startsWith("GC")});c(c$,"setPixelRange",function(a,b){this.px0=a;this.px1=b},"~N,~N");c(c$,"checkRange",
function(a,b){return(2147483647!=a?this.px0<=a&&this.px1>=a:b>=this.xMin&&b<=this.xMax)?Math.abs(b-this.getX()):1E100},"~N,~N");c(c$,"getXPixel",function(){return n((this.px0+this.px1)/2)});c$.nullPeakInfo=c$.prototype.nullPeakInfo=new JSV.common.PeakInfo}),m("JSV.source"),u(null,"JSV.source.JDXSourceStreamTokenizer",["java.lang.Character","JU.SB","J.util.Logger"],function(){c$=q(function(){this.value=this.label=this.br=null;this.labelLineNo=0;this.line=null;this.lineNo=0;s(this,arguments)},JSV.source,
"JDXSourceStreamTokenizer");w(c$,function(a){this.br=a},"java.io.BufferedReader");c(c$,"peakLabel",function(){return this.nextLabel(!1)});c(c$,"getLabel",function(){return this.nextLabel(!0)});c(c$,"nextLabel",function(a){for(this.value=this.label=null;null==this.line;){try{this.readLine();if(null==this.line)return this.line="",null;this.line=this.line.trim()}catch(b){if(v(b,java.io.IOException))return this.line="",null;throw b;}if(this.line.startsWith("##"))break;this.line=null}var d=this.line.indexOf("=");
0>d?(a&&J.util.Logger.info("BAD JDX LINE -- no '=' (line "+this.lineNo+"): "+this.line),this.label=this.line,a||(this.line="")):(this.label=this.line.substring(0,d).trim(),a&&(this.line=this.line.substring(d+1)));this.labelLineNo=this.lineNo;J.util.Logger.debugging&&J.util.Logger.info(this.label);return JSV.source.JDXSourceStreamTokenizer.cleanLabel(this.label)},"~B");c$.cleanLabel=c(c$,"cleanLabel",function(a){if(null==a)return null;var b,d=new JU.SB;for(b=0;b<a.length;b++)switch(a.charAt(b)){case "/":case "\\":case " ":case "-":case "_":break;
default:d.appendC(a.charAt(b))}return d.toString().toUpperCase()},"~S");c(c$,"getRawLabel",function(){return this.label});c(c$,"getLabelLineNo",function(){return this.labelLineNo});c(c$,"getValue",function(){if(null!=this.value)return this.value;var a=(new JU.SB).append(this.line);0<a.length()&&a.appendC("\n");try{for(;null!=this.readLine()&&!(0<=this.line.indexOf("##")&&this.line.trim().startsWith("##"));)a.append(this.line).appendC("\n")}catch(b){if(v(b,java.io.IOException))b.printStackTrace();
else throw b;}this.value=JSV.source.JDXSourceStreamTokenizer.trimLines(a);J.util.Logger.debugging&&J.util.Logger.info(this.value);return this.value});c(c$,"readLineTrimmed",function(){this.readLine();if(null==this.line)return null;if(0>this.line.indexOf("$$"))return this.line.trim();var a=(new JU.SB).append(this.line);return JSV.source.JDXSourceStreamTokenizer.trimLines(a)});c(c$,"flushLine",function(){var a=(new JU.SB).append(this.line);this.line=null;return JSV.source.JDXSourceStreamTokenizer.trimLines(a)});
c(c$,"readLine",function(){this.line=this.br.readLine();this.lineNo++;return this.line});c$.trimLines=c(c$,"trimLines",function(a){var b=a.length(),d=b-1,c=JSV.source.JDXSourceStreamTokenizer.ptNonWhite(a,0,b);if(c>=b)return"";if("<"==a.charAt(c))return b=a.lastIndexOf(">")+1,0==b&&(b=a.length()),a.toString().substring(c,b);for(var f=ha(b-c,"\x00"),h=0;c<b;c++){var e;switch(e=a.charAt(c)){case "\r":if(c<d&&"\n"==a.charAt(c+1))continue;e="\n";break;case "\n":0<h&&"\n"!=f[h-1]&&(h-=c-JSV.source.JDXSourceStreamTokenizer.ptNonSpaceRev(a,
c)-1);c=JSV.source.JDXSourceStreamTokenizer.ptNonSpace(a,++c,b)-1;break;case "$":if(c<d&&"$"==a.charAt(c+1)){for(c++;++c<b&&0>"\n\r".indexOf(a.charAt(c)););continue}}"\n"==e&&0<h&&"\n"==f[h-1]||(f[h++]=e)}0<h&&"\n"==f[h-1]&&--h;return String.instantialize(f).substring(0,h).trim()},"JU.SB");c$.ptNonWhite=c(c$,"ptNonWhite",function(a,b,d){for(;b<d&&Character.isWhitespace(a.charAt(b));)b++;return b},"JU.SB,~N,~N");c$.ptNonSpace=c(c$,"ptNonSpace",function(a,b,d){for(;b<d&&(" "==a.charAt(b)||"\t"==a.charAt(b));)b++;
return b},"JU.SB,~N,~N");c$.ptNonSpaceRev=c(c$,"ptNonSpaceRev",function(a,b){for(;0<=--b&&(" "==a.charAt(b)||"\t"==a.charAt(b)););return b},"JU.SB,~N")}),ga(["java.io.Closeable","$.Flushable","java.lang.Appendable"],"java.io.Writer",["java.lang.NullPointerException","$.StringIndexOutOfBoundsException"],function(){c$=E(function(){this.lock=null;D(this,arguments)},java.io,"Writer",null,[Appendable,java.io.Closeable,java.io.Flushable]);x(c$,function(){this.lock=this});x(c$,function(a){if(null!=a)this.lock=
a;else throw new NullPointerException;},"~O");c(c$,"write",function(a){this.write(a,0,a.length)},"~A");c(c$,"write",function(a){var b=P(1,"\x00");b[0]=String.fromCharCode(a);this.write(b)},"~N");c(c$,"write",function(a){var b=P(a.length,"\x00");a.getChars(0,b.length,b,0);this.write(b)},"~S");c(c$,"write",function(a,b,d){if(0<=d){var c=P(d,"\x00");a.getChars(b,b+d,c,0);this.write(c)}else throw new StringIndexOutOfBoundsException;},"~S,~N,~N");c(c$,"append",function(a){this.write(a.charCodeAt(0));return this},
"~N");c(c$,"append",function(a){null==a?this.write("null"):this.write(a.toString());return this},"CharSequence");c(c$,"append",function(a,b,d){null==a?this.write("null".substring(b,d)):this.write(a.subSequence(b,d).toString());return this},"CharSequence,~N,~N");Y(c$,"TOKEN_NULL","null")}),ga(["java.io.Writer"],"java.io.BufferedWriter",["java.io.IOException","java.lang.IllegalArgumentException","$.IndexOutOfBoundsException","$.StringIndexOutOfBoundsException"],function(){c$=E(function(){this.buf=this.out=
null;this.pos=0;this.lineSeparator="\r\n";D(this,arguments)},java.io,"BufferedWriter",java.io.Writer);x(c$,function(a){z(this,java.io.BufferedWriter,[a]);this.out=a;this.buf=P(8192,"\x00")},"java.io.Writer");x(c$,function(a,b){z(this,java.io.BufferedWriter,[a]);if(0<b)this.out=a,this.buf=P(b,"\x00");else throw new IllegalArgumentException("K0058");},"java.io.Writer,~N");c(c$,"close",function(){this.isOpen()&&(this.flush(),this.out.close(),this.out=this.buf=null)});c(c$,"flush",function(){if(this.isOpen())0<
this.pos&&this.out.write(this.buf,0,this.pos),this.pos=0,this.out.flush();else throw new java.io.IOException("K005d");});c(c$,"isOpen",($fz=function(){return null!=this.out},$fz.isPrivate=!0,$fz));c(c$,"newLine",function(){this.write("\r\n",0,2)});c(c$,"write",function(a,b,d){if(!this.isOpen())throw new java.io.IOException("K005d");if(0>b||b>a.length-d||0>d)throw new IndexOutOfBoundsException;if(0==this.pos&&d>=this.buf.length)this.out.write(a,b,d);else{var c=this.buf.length-this.pos;d<c&&(c=d);0<
c&&(System.arraycopy(a,b,this.buf,this.pos,c),this.pos+=c);this.pos==this.buf.length&&(this.out.write(this.buf,0,this.buf.length),this.pos=0,d>c&&(b+=c,c=d-c,c>=this.buf.length?this.out.write(a,b,c):(System.arraycopy(a,b,this.buf,this.pos,c),this.pos+=c)))}},"~A,~N,~N");c(c$,"write",function(a){if(this.isOpen())this.pos>=this.buf.length&&(this.out.write(this.buf,0,this.buf.length),this.pos=0),this.buf[this.pos++]=String.fromCharCode(a);else throw new java.io.IOException("K005d");},"~N");c(c$,"write",
function(a,b,d){if(!this.isOpen())throw new java.io.IOException("K005d");if(!(0>=d)){if(b>a.length-d||0>b)throw new StringIndexOutOfBoundsException;if(0==this.pos&&d>=this.buf.length){var c=P(d,"\x00");a.getChars(b,b+d,c,0);this.out.write(c,0,d)}else{var f=this.buf.length-this.pos;d<f&&(f=d);0<f&&(a.getChars(b,b+f,this.buf,this.pos),this.pos+=f);this.pos==this.buf.length&&(this.out.write(this.buf,0,this.buf.length),this.pos=0,d>f&&(b+=f,f=d-f,f>=this.buf.length?(c=P(d,"\x00"),a.getChars(b,b+f,c,0),
this.out.write(c,0,f)):(a.getChars(b,b+f,this.buf,this.pos),this.pos+=f)))}}},"~S,~N,~N")}),m("JSV.api"),F(JSV.api,"JSVGraphics"),m("JSV.common"),u(null,"JSV.common.ScriptTokenizer",["JU.PT"],function(){c$=q(function(){this.str=null;this.pt=-1;this.len=0;this.isCmd=!1;this.doCheck=!0;s(this,arguments)},JSV.common,"ScriptTokenizer");w(c$,function(a,b){this.str=a;this.len=a.length;this.isCmd=b},"~S,~B");c$.nextStringToken=c(c$,"nextStringToken",function(a,b){var d=a.nextToken();return b&&'"'==d.charAt(0)&&
d.endsWith('"')&&1<d.length?JU.PT.trimQuotes(d):d},"JSV.common.ScriptTokenizer,~B");c(c$,"nextToken",function(){this.doCheck&&this.hasMoreTokens();for(var a=this.pt,b='"'==this.str.charAt(this.pt);++this.pt<this.len;){switch(this.str.charAt(this.pt)){case '"':if(b){if(this.isCmd){b=!1;continue}this.pt++;break}this.isCmd&&(b=!0);continue;case " ":if(!this.isCmd&&!b)break;continue;case ";":case "\n":if(this.isCmd&&!b)break;continue;default:continue}break}this.doCheck=!0;return this.str.substring(a,
this.pt)});c(c$,"hasMoreTokens",function(){for(;++this.pt<this.len;){switch(this.str.charAt(this.pt)){case " ":case ";":case "\n":continue}break}this.doCheck=!1;return this.pt<this.len})}),m("JSV.common"),u(["JSV.common.Annotation","$.Coordinate"],"JSV.common.Measurement",null,function(){c$=q(function(){this.pt2=null;this.value=0;s(this,arguments)},JSV.common,"Measurement",JSV.common.Annotation);M(c$,function(){this.pt2=new JSV.common.Coordinate});c(c$,"setM1",function(a,b,d){this.setA(a,b,d,"",!1,
!1,0,6);this.setPt2(this.getXVal(),this.getYVal());return this},"~N,~N,JSV.common.JDXSpectrum");c(c$,"copyM",function(){var a=new JSV.common.Measurement;a.setA(this.getXVal(),this.getYVal(),this.spec,this.text,!1,!1,this.offsetX,this.offsetY);a.setPt2(this.pt2.getXVal(),this.pt2.getYVal());return a});c(c$,"setPt2",function(a,b){this.spec=a;b&&this.setPt2(this.getXVal(),this.getYVal());return this},"JSV.common.JDXSpectrum,~B");c(c$,"setPt2",function(a,b){this.pt2.setXVal(a);this.pt2.setYVal(b);this.value=
Math.abs(a-this.getXVal());this.text=this.spec.setMeasurementText(this)},"~N,~N");c(c$,"getSpectrum",function(){return this.spec});c(c$,"setValue",function(a){this.value=a;this.text=this.spec.setMeasurementText(this)},"~N");c(c$,"getValue",function(){return this.value});c(c$,"getXVal2",function(){return this.pt2.getXVal()});c(c$,"getYVal2",function(){return this.pt2.getYVal()});e(c$,"addSpecShift",function(a){this.setXVal(this.getXVal()+a);this.pt2.setXVal(this.pt2.getXVal()+a)},"~N");c(c$,"setYVal2",
function(a){this.pt2.setYVal(a)},"~N");c(c$,"overlaps",function(a,b){return Math.min(this.getXVal(),this.getXVal2())<Math.max(a,b)&&Math.max(this.getXVal(),this.getXVal2())>Math.min(a,b)},"~N,~N");e(c$,"toString",function(){return"["+this.getXVal()+","+this.pt2.getXVal()+"]"})}),m("JSV.common"),u(["JSV.common.Measurement"],"JSV.common.Integral",null,function(){c$=A(JSV.common,"Integral",JSV.common.Measurement);c(c$,"setInt",function(a,b,d,c,f,h){this.setA(a,b,d,"",!1,!1,0,6);this.setPt2(f,h);this.setValue(c);
return this},"~N,~N,JSV.common.JDXSpectrum,~N,~N,~N")}),m("JSV.exception"),u(["java.lang.Exception"],"JSV.exception.JSpecViewException",null,function(){c$=A(JSV.exception,"JSpecViewException",Exception)}),m("JSV.dialog"),u(["JSV.api.AnnotationData","JSV.common.Annotation"],"JSV.dialog.JSVDialog",["java.lang.Double","JU.DF","$.PT","JSV.common.IntegralData","$.PeakData"],function(){c$=q(function(){this.myParams=this.xyData=this.combo1=this.txt3=this.txt2=this.txt1=this.jsvp=this.dialog=this.manager=
this.$spec=this.viewer=this.title=this.type=this.options=this.optionKey=null;this.precision=1;this.showHideButton=this.loc=null;this.defaultVisible=this.isNumeric=this.addApplyBtn=this.addCombo1=this.addClearBtn=!1;this.tableData=this.graphSetKey=this.subType=null;this.addUnits=!1;this.unitPtr=this.formatOptions=this.unitOptions=null;this.isON=!0;this.lastNorm=1;this.iSelected=this.iRowColSelected=-1;this.skipCreate=!1;this.iColSelected=this.iRowSelected=-1;s(this,arguments)},JSV.dialog,"JSVDialog",
JSV.common.Annotation,JSV.api.AnnotationData);c(c$,"setParams",function(a,b,d){this.title=a;this.viewer=b;this.$spec=d;this.manager=b.getDialogManager();this.jsvp=b.selectedPanel;this.myParams=b.getPlatformInterface("Parameters").setName("dialogParams");this.subType=null==d?"!":d.getTypeLabel();this.optionKey=this.type+"_"+this.subType;this.options=this.manager.getDialogOptions();null!=d&&(a=d.getDefaultAnnotationInfo(this.type),this.options.put(this.optionKey,a),this.unitOptions=a[0],this.formatOptions=
a[1],this.unitPtr=this.options.get(this.optionKey+"_unitPtr"),null==this.unitPtr&&(this.unitPtr=a[2]));switch(this.type){case JSV.common.Annotation.AType.Integration:this.addApplyBtn=this.defaultVisible=this.addClearBtn=this.isNumeric=!0;break;case JSV.common.Annotation.AType.Measurements:this.defaultVisible=this.addCombo1=this.addClearBtn=this.isNumeric=!0;break;case JSV.common.Annotation.AType.PeakList:this.defaultVisible=this.addApplyBtn=this.isNumeric=!0;break;case JSV.common.Annotation.AType.Views:this.defaultVisible=
!0}this.initDialog();return this},"~S,JSV.common.JSViewer,JSV.common.JDXSpectrum");c(c$,"initDialog",function(){this.dialog=this.manager.getDialog(this);this.restoreDialogPosition(this.jsvp,this.getPosXY());this.dialog.setTitle(this.title);this.layoutDialog()});c(c$,"layoutDialog",function(){this.dialog.startLayout();this.addUniqueControls();this.isNumeric&&(this.getUnitOptions(),this.addCombo1&&(this.combo1=this.dialog.addSelectOption("cmbUnits","Units",this.unitOptions,this.unitPtr.intValue(),this.addUnits)),
this.addApplyBtn&&this.dialog.addButton("btnApply","Apply"),this.showHideButton=this.dialog.addButton("btnShow","Show"),this.addClearBtn&&this.dialog.addButton("btnClear","Clear"));this.dialog.endLayout();this.checkEnables();this.dialog.setVisible(this.defaultVisible)});c(c$,"callbackAD",function(a,b){if(a.equals("tableSelect"))this.tableSelect(b);else if(a.equals("btnClear"))this.clear();else if(a.equals("btnApply"))this.eventApply();else if(a.equals("btnShow")){var d=this.dialog.getText(this.showHideButton);
this.eventShowHide(d.equals("Show"))}else if(a.equals("cmbUnits"))this.setPrecision(this.dialog.getSelectedIndex(this.combo1));else if(a.startsWith("txt"))this.eventApply();else if(a.equals("windowClosing"))return this.done(),!0;null!=this.jsvp&&this.jsvp.doRepaint(!0);return!0},"~S,~S");c(c$,"addUniqueControls",function(){},"JSV.dialog.DialogManager");e(c$,"getAType",function(){return this.type});e(c$,"getGraphSetKey",function(){return this.graphSetKey});e(c$,"setGraphSetKey",function(a){this.graphSetKey=
a},"~S");e(c$,"getSpectrum",function(){return this.$spec});e(c$,"getState",function(){return this.isON});e(c$,"setState",function(a){this.isON=a},"~B");c(c$,"checkEnables",function(){var a=this.checkVisible();this.dialog.setText(this.showHideButton,a?"Hide":"Show")});c(c$,"createTable",function(a,b,d){this.tableData=a;this.dialog.createTable(a,b,d)},"~A,~A,~A");c(c$,"setTableSelectionEnabled",function(a){this.dialog.setCellSelectionEnabled(a)},"~B");c(c$,"getParameters",function(){return this.myParams});
c(c$,"showMessage",function(a,b,d){this.manager.showMessageDialog(this.dialog,a,b,d)},"~S,~S,~N");c(c$,"setThreshold",function(a){this.dialog.setText(this.txt1,this.getThreasholdText(a))},"~N");c(c$,"setComboSelected",function(a){this.dialog.setSelectedIndex(this.combo1,a)},"~N");c(c$,"applyFromFields",function(){this.apply(null)});c(c$,"reEnable",function(){this.paramsReEnable();return this});c(c$,"dispose",function(){this.dialog.dispose()});c(c$,"setVisible",function(a){this.dialog.setVisible(a)},
"~B");e(c$,"isVisible",function(){return this.dialog.isVisible()});c(c$,"selectTableRow",function(a){this.dialog.selectTableRow(a)},"~N");c(c$,"repaint",function(){this.dialog.repaint()});c(c$,"setFields",function(){switch(this.type){case JSV.common.Annotation.AType.PeakList:this.myParams=this.xyData.getParameters(),this.setThreshold(this.myParams.peakListThreshold),this.setComboSelected(this.myParams.peakListInterpolation.equals("none")?1:0),this.createData()}});c(c$,"update",function(a,b,d){this.selectTableRow(-1);
switch(this.type){case JSV.common.Annotation.AType.Integration:this.loadData();this.checkEnables();break;case JSV.common.Annotation.AType.Measurements:this.loadData();this.checkEnables();break;case JSV.common.Annotation.AType.PeakList:20<d&&this.applyFromFields();if(null==this.xyData||null==a||20<d)break;d=0;var c=1E100;a=a.getXVal();var f=this.xyData;b=Math.abs(b/20);for(var h=f.size();0<=--h;){var e=Math.abs(a-f.get(h).getXVal());e<c&&(c=e,d=h)}c<b&&(this.selectTableRow(f.size()-2-d),this.repaint())}},
"JSV.common.Coordinate,~N,~N");c(c$,"getPeakData",function(){var a=new JSV.common.PeakData(JSV.common.Annotation.AType.PeakList,this.$spec);a.setPeakList(this.myParams,this.precision,this.jsvp.getPanelData().getView());this.xyData=a;return null});e(c$,"getData",function(){null==this.xyData&&this.createData();return this.xyData});c(c$,"setData",function(a){this.myParams=a.getParameters();this.xyData=a},"JSV.api.AnnotationData");e(c$,"setSpecShift",function(a){null!=this.xyData&&this.xyData.setSpecShift(a)},
"~N");c(c$,"setType",function(a){this.type=a;switch(a){case JSV.common.Annotation.AType.Measurements:this.addUnits=!0}},"JSV.common.Annotation.AType");c(c$,"apply",function(a){try{switch(this.type){case JSV.common.Annotation.AType.Integration:var b=Double.parseDouble(a[0]),d=Double.parseDouble(a[1]);this.myParams.integralOffset=b;this.myParams.integralRange=d;this.myParams.integralDrawAll=!1;this.getData().update(this.myParams);break;case JSV.common.Annotation.AType.NONE:return;case JSV.common.Annotation.AType.PeakList:this.skipCreate||
(this.setThreshold(NaN),this.createData()),this.skipCreate=!1}this.loadData();this.checkEnables();this.jsvp.doRepaint(!0)}catch(c){if(!v(c,Exception))throw c;}},"~A");c(c$,"done",function(){null!=this.jsvp&&null!=this.$spec&&this.jsvp.getPanelData().removeDialog(this);null!=this.xyData&&this.xyData.setState(this.isON);this.saveDialogPosition(this.getPosXY());this.dispose();this.jsvp.doRepaint(!0)});c(c$,"restoreDialogPosition",function(a,b){if(null!=a){-2147483648==b[0]&&(b[0]=0,b[1]=-20);var d=this.manager.getLocationOnScreen(a),
c=a.getHeight();this.loc=[Math.max(0,d[0]+b[0]),Math.max(0,d[1]+c+b[1])];this.dialog.setIntLocation(this.loc)}},"JSV.api.JSVPanel,~A");c(c$,"saveDialogPosition",function(a){try{var b=this.manager.getLocationOnScreen(this.dialog);a[0]+=b[0]-this.loc[0];a[1]+=b[1]-this.loc[1]}catch(d){if(!v(d,Exception))throw d;}},"~A");c(c$,"getThreasholdText",function(a){if(Double.isNaN(a)){a=this.jsvp.getPanelData();var b=a.getSpectrum().isInverted()?0.1:0.9,d=a.getClickedCoordinate();a=null==d?(a.getView().minYOnScale*
b+a.getView().maxYOnScale)*(1-b):d.getYVal()}return" "+JU.DF.formatDecimalDbl(a,1E3>a?2:-2)},"~N");c(c$,"checkVisible",function(){return this.viewer.selectedPanel.getPanelData().getShowAnnotation(this.type)});c(c$,"getUnitOptions",function(){var a=this.optionKey+"_format";null==this.options.get(a)&&this.options.put(a,Integer.$valueOf(this.formatOptions[null==this.unitPtr?0:this.unitPtr.intValue()]))});c(c$,"eventApply",function(){switch(this.type){case JSV.common.Annotation.AType.PeakList:this.createData(),
this.skipCreate=!0}this.applyFromFields()});c(c$,"eventShowHide",function(a){(this.isON=a)&&this.eventApply();this.jsvp.doRepaint(!0);this.checkEnables()},"~B");c(c$,"clear",function(){this.setState(!0);null!=this.xyData&&(this.xyData.clear(),this.applyFromFields())});c(c$,"paramsReEnable",function(){switch(this.type){case JSV.common.Annotation.AType.PeakList:this.skipCreate=!0}this.setVisible(!0);this.isON=!0;this.applyFromFields()});c(c$,"tableCellSelect",function(a,b){var d=this.tableData[a][1],
c=1E3*this.iRowSelected+this.iColSelected;if(c!=this.iRowColSelected){this.iRowColSelected=c;this.selectTableRow(this.iRowSelected);try{switch(this.type){case JSV.common.Annotation.AType.Integration:for(c=0;c<this.xyData.size();c++)if(JU.DF.formatDecimalDbl(this.xyData.get(c).getXVal(),2).equals(d)){this.iSelected=c;this.jsvp.getPanelData().setXPointers(this.$spec,this.xyData.get(c).getXVal(),this.$spec,this.xyData.get(c).getXVal2());this.jsvp.doRepaint(!0);break}this.checkEnables();break;case JSV.common.Annotation.AType.PeakList:try{switch(b){case 6:case 5:case 4:var f=
Double.parseDouble(d),h=Double.parseDouble(this.tableData[a+3-b][1]);this.jsvp.getPanelData().setXPointers(this.$spec,f,this.$spec,h);break;default:this.jsvp.getPanelData().findX(this.$spec,Double.parseDouble(d))}}catch(e){if(v(e,Exception))this.jsvp.getPanelData().findX(this.$spec,1E100);else throw e;}this.jsvp.doRepaint(!1);break;case JSV.common.Annotation.AType.OverlayLegend:this.jsvp.getPanelData().setSpectrum(a,!1)}}catch(p){if(!v(p,Exception))throw p;}}},"~N,~N");c(c$,"loadData",function(){var a,
b,d;switch(this.type){case JSV.common.Annotation.AType.Integration:null==this.xyData&&this.createData();this.iSelected=-1;a=this.xyData.getMeasurementListArray(null);b=this.xyData.getDataHeader();d=[40,65,65,50];this.createTable(a,b,d);break;case JSV.common.Annotation.AType.Measurements:if(null==this.xyData)break;a=this.xyData.getMeasurementListArray(this.dialog.getSelectedItem(this.combo1).toString());b=this.xyData.getDataHeader();d=[40,65,65,50];this.createTable(a,b,d);break;case JSV.common.Annotation.AType.PeakList:null==
this.xyData&&this.createData();a=this.xyData.getMeasurementListArray(null);b=this.xyData.getDataHeader();d=[40,65,50,50,50,50,50];this.createTable(a,b,d);this.setTableSelectionEnabled(!0);break;case JSV.common.Annotation.AType.OverlayLegend:b=["No.","Plot Color","Title"],a=this.viewer.selectedPanel.getPanelData().getOverlayLegendData(),d=[30,60,250],this.createTable(a,b,d),this.setTableSelectionEnabled(!0)}});c(c$,"createData",function(){switch(this.type){case JSV.common.Annotation.AType.Integration:this.xyData=
new JSV.common.IntegralData(this.$spec,this.myParams);this.iSelected=-1;break;case JSV.common.Annotation.AType.PeakList:try{var a=Double.parseDouble(this.dialog.getText(this.txt1));this.myParams.peakListThreshold=a;this.myParams.peakListInterpolation=this.dialog.getSelectedItem(this.combo1).toString();this.myParams.precision=this.precision;var b=new JSV.common.PeakData(JSV.common.Annotation.AType.PeakList,this.$spec);b.setPeakList(this.myParams,this.precision,this.jsvp.getPanelData().getView());this.xyData=
b;this.loadData()}catch(d){if(!v(d,Exception))throw d;}}});c(c$,"setPrecision",function(a){this.precision=this.formatOptions[a]},"~N");c(c$,"tableSelect",function(a){if("true".equals(this.getField(a,"adjusting")))this.iColSelected=this.iRowSelected=-1;else{var b=JU.PT.parseInt(this.getField(a,"index"));switch("ROW COL ROWCOL".indexOf(this.getField(a,"selector"))){case 8:this.iColSelected=JU.PT.parseInt(this.getField(a,"index2"));case 0:this.iRowSelected=b;break;case 4:this.iColSelected=b}0<=this.iColSelected&&
0<=this.iRowSelected&&this.tableCellSelect(this.iRowSelected,this.iColSelected)}},"~S");c(c$,"getField",function(a,b){a+="&";var d="&"+b+"=",c=a.indexOf(d);return 0>c?null:a.substring(c+d.length,a.indexOf("&",c+1))},"~S,~S")}),m("JSV.api"),F(JSV.api,"XYScaleConverter"),m("JSV.common"),u("java.lang.Enum JSV.api.XYScaleConverter java.util.Hashtable JU.BS $.List JSV.common.Coordinate JSV.dialog.JSVDialog".split(" "),"JSV.common.GraphSet","java.lang.Boolean $.Double $.Float JU.DF $.PT JSV.common.Annotation $.ColorParameters $.ColoredAnnotation $.ImageView $.Integral $.IntegralData $.JDXSpectrum $.Measurement $.MeasurementData $.PanelData $.Parameters $.PeakData $.PeakPickEvent $.PlotWidget $.ScaleData $.ScriptToken $.ViewData J.util.Logger".split(" "),
function(){c$=q(function(){this.gs2dLinkedY=this.gs2dLinkedX=null;this.cur1D2Locked=!1;this.spectra=this.highlights=null;this.allowStacking=this.isSplittable=!0;this.widgets=this.graphsTemp=this.pendingIntegral=this.pendingMeasurement=this.lastAnnotation=this.selectedSpectrumIntegrals=this.selectedSpectrumMeasurements=this.annotations=this.splitPointers=null;this.haveSingleYScale=this.isLinked=!1;this.iSpectrumClicked=this.iSpectrumMovedTo=0;this.iSpectrumSelected=-1;this.stackSelected=!1;this.viewData=
this.bsSelected=null;this.reversePlot=!1;this.nSplit=1;this.yStackOffsetPercent=0;this.showAllStacked=!0;this.pd=this.imageView=this.viewList=null;this.sticky2Dcursor=!1;this.nSpectra=0;this.fracY=this.fracX=1;this.fY0=this.fX0=0;this.cur2Dy=this.cur1D2x2=this.cur1D2x1=this.cur2Dx1=this.cur2Dx0=this.pin2Dy01=this.pin2Dx01=this.pin2Dy1=this.pin2Dy0=this.pin2Dx1=this.pin2Dx0=this.pin1Dy01=this.pin1Dx01=this.pin1Dy1=this.pin1Dy0=this.pin1Dx1=this.pin1Dx0=this.zoomBox2D=this.zoomBox1D=null;this.xPixels0=
this.xPixel10=this.yPixels=this.xPixels=this.yPixel000=this.yPixel11=this.xPixel11=this.yPixel00=this.xPixel00=this.yHArrows=this.xHArrows=this.xVArrows=this.yPixel1=this.xPixel1=this.yPixel0=this.xPixel0=0;this.allowStackedYScale=!0;this.drawXAxisLeftToRight=!1;this.xAxisLeftToRight=!0;this.iPreviousSpectrumClicked=-1;this.zoomEnabled=this.$haveSelectedSpectrum=!1;this.currentZoomIndex=0;this.lastClickX=NaN;this.lastPixelX=2147483647;this.bottom=this.left=this.top=this.right=this.width=this.height=
0;this.coordTemp=this.piMouseOver=null;this.FONT_PLAIN=0;this.FONT_BOLD=1;this.FONT_ITALIC=2;this.is2DSpectrum=!1;this.selectedIntegral=this.selectedMeasurement=null;this.lastXMax=NaN;this.lastSpecClicked=-1;this.inPlotMove=!1;this.xPixelMovedTo2=this.xPixelMovedTo=-1;this.xValueMovedTo=this.yValueMovedTo=0;this.haveLeftRightArrows=!1;this.yPixelPlot1=this.yPixelPlot0=this.xPixelPlot0=this.xPixelPlot1=0;this.nextClickForSetPeak=!1;this.mapX=null;na("JSV.common.GraphSet.Highlight")||JSV.common.GraphSet.$GraphSet$Highlight$();
this.triggered=!0;this.gMain=this.g2d=this.plotColors=this.image2D=this.jsvp=this.aIntegrationRatios=this.dialogs=null;s(this,arguments)},JSV.common,"GraphSet",null,JSV.api.XYScaleConverter);M(c$,function(){this.highlights=new JU.List;this.spectra=new JU.List;this.splitPointers=[0];this.graphsTemp=new JU.List;this.bsSelected=new JU.BS;this.coordTemp=new JSV.common.Coordinate;this.mapX=new java.util.Hashtable});w(c$,function(a){this.pd=a;this.jsvp=a.jsvp;this.g2d=a.g2d},"JSV.common.PanelData");c(c$,
"setSpectrumMovedTo",function(a){return this.iSpectrumMovedTo=a},"~N");c(c$,"setSpectrumClicked",function(a){this.stackSelected=this.showAllStacked;if(0>a||this.iSpectrumClicked!=a)this.lastClickX=NaN,this.lastPixelX=2147483647;this.iSpectrumClicked=this.setSpectrumSelected(this.setSpectrumMovedTo(a))},"~N");c(c$,"setSpectrumSelected",function(a){var b=a!=this.iSpectrumSelected;this.iSpectrumSelected=a;b&&this.getCurrentView();return this.iSpectrumSelected},"~N");c(c$,"closeDialogsExcept",function(a){if(null!=
this.dialogs)for(var b,d=this.dialogs.entrySet().iterator();d.hasNext()&&((b=d.next())||1);){var c=b.getValue();y(c,JSV.dialog.JSVDialog)&&(a===JSV.common.Annotation.AType.NONE||c.getAType()!==a)&&c.setVisible(!1)}},"JSV.common.Annotation.AType");c(c$,"dispose",function(){this.widgets=this.graphsTemp=this.imageView=this.pendingMeasurement=this.lastAnnotation=this.annotations=this.viewList=this.viewData=this.spectra=null;this.disposeImage();if(null!=this.dialogs)for(var a,b=this.dialogs.entrySet().iterator();b.hasNext()&&
((a=b.next())||1);){var d=a.getValue();y(d,JSV.dialog.JSVDialog)&&d.dispose()}this.dialogs=null});c(c$,"isDrawNoSpectra",function(){return-2147483648==this.iSpectrumSelected});c(c$,"getFixedSelectedSpectrumIndex",function(){return Math.max(this.iSpectrumSelected,0)});c(c$,"getSpectrum",function(){return this.getSpectrumAt(this.getFixedSelectedSpectrumIndex()).getCurrentSubSpectrum()});c(c$,"getSpectrumAt",function(a){return this.spectra.get(a)},"~N");c(c$,"getSpectrumIndex",function(a){for(var b=
this.spectra.size();0<=--b;)if(this.spectra.get(b)===a)return b;return-1},"JSV.common.JDXSpectrum");c(c$,"addSpec",function(a){this.spectra.addLast(a);this.nSpectra++},"JSV.common.JDXSpectrum");c(c$,"splitStack",function(a,b){b&&this.isSplittable?(this.nSplit=this.nSpectra,this.showAllStacked=!1,this.setSpectrumClicked(0)):(this.nSplit=1,this.splitPointers[0]=0,this.showAllStacked=this.allowStacking&&!b,this.setSpectrumClicked(-1));this.stackSelected=!1;JSV.common.GraphSet.setFractionalPositions(this.pd,
a,JSV.common.PanelData.LinkMode.NONE)},"JU.List,~B");c(c$,"setPositionForFrame",function(a){var b=this.height-50;this.xPixel00=n(this.width*this.fX0);this.xPixel11=n(this.xPixel00+this.width*this.fracX-1);this.xHArrows=this.xPixel00+25;this.xVArrows=this.xPixel11-n(this.right/2);this.xPixel0=this.xPixel00+n(this.left*(1-this.fX0));this.xPixel10=this.xPixel1=this.xPixel11-this.right;this.xPixels0=this.xPixels=this.xPixel1-this.xPixel0+1;this.yPixel000=(0==this.fY0?25:0)+n(this.height*this.fY0);this.yPixel00=
this.yPixel000+n(b*this.fracY*a);this.yPixel11=this.yPixel00+n(b*this.fracY)-1;this.yHArrows=this.yPixel11-12;this.yPixel0=this.yPixel00+n(this.top/2);this.yPixel1=this.yPixel11-n(this.bottom/2);this.yPixels=this.yPixel1-this.yPixel0+1;null!=this.imageView&&this.is2DSpectrum&&(this.setImageWindow(),this.pd.display1D?(this.xPixels=n(Math.floor(0.8*(this.pd.display1D?1*(this.xPixels0-this.imageView.xPixels)/this.xPixels0:1)*this.xPixels0)),this.xPixel1=this.xPixel0+this.xPixels-1):(this.xPixels=0,this.xPixel1=
this.imageView.xPixel0-30))},"~N");c(c$,"hasPoint",function(a,b){return a>=this.xPixel00&&a<=this.xPixel11&&b>=this.yPixel000&&b<=this.yPixel11*this.nSplit},"~N,~N");c(c$,"isInPlotRegion",function(a,b){return a>=this.xPixel0&&a<=this.xPixel1&&b>=this.yPixel0&&b<=this.yPixel1},"~N,~N");c(c$,"getSplitPoint",function(a){return Math.min(n((a-this.yPixel000)/(this.yPixel11-this.yPixel00)),this.nSplit-1)},"~N");c(c$,"isSplitWidget",function(a,b){return this.isSplittable&&a>=this.xPixel11-20&&b>=this.yPixel00+
1&&a<=this.xPixel11-10&&b<=this.yPixel00+11},"~N,~N");c(c$,"initGraphSet",function(a,b){null==JSV.common.GraphSet.veryLightGrey&&(JSV.common.GraphSet.veryLightGrey=this.g2d.getColor3(200,200,200));this.setPlotColors(JSV.common.ColorParameters.defaultPlotColors);this.xAxisLeftToRight=this.getSpectrumAt(0).shouldDisplayXAxisIncreasing();this.setDrawXAxis();var d=H(this.nSpectra,0),c=H(this.nSpectra,0);this.bsSelected.setBits(0,this.nSpectra);this.allowStackedYScale=!0;0>=b&&(b=2147483647);this.isSplittable=
1<this.nSpectra;this.showAllStacked=(this.allowStacking=this.spectra.get(0).isStackable())&&1<this.nSpectra;for(var f=0;f<this.nSpectra;f++){var h=this.spectra.get(f).getXYCoords().length-1;d[f]=JSV.common.Coordinate.intoRange(a,0,h);c[f]=JSV.common.Coordinate.intoRange(b,0,h);this.allowStackedYScale=(new Boolean(this.allowStackedYScale&(this.spectra.get(f).getYUnits().equals(this.spectra.get(0).getYUnits())&&this.spectra.get(f).getUserYFactor()==this.spectra.get(0).getUserYFactor()))).valueOf()}this.getView(0,
0,0,0,d,c,null,null);this.viewList=new JU.List;this.viewList.addLast(this.viewData)},"~N,~N");c(c$,"getView",function(a,b,d,c,f,h,e,p){var l=0==this.graphsTemp.size()?this.spectra:this.graphsTemp,k=this.getSpectrumAt(0).getSubSpectra(),n=null==k||2==k.size()&&k.get(1).isImaginary(),m=!this.getSpectrumAt(0).is1D();n&&d==c?l=this.spectra:d==c&&(this.viewData=new JSV.common.ViewData(k,d,c,this.getSpectrum().isContinuous()),l=null);null!=l&&(this.viewData=new JSV.common.ViewData(l,d,c,f,h,this.getSpectrumAt(0).isContinuous(),
m),a!=b&&this.getScale().setXRange(a,b));null!=e&&(JSV.common.ScaleData.copyScaleFactors(e,this.viewData.getScaleData()),null!=p&&JSV.common.ScaleData.copyYScales(p,this.viewData.getScaleData()),this.getCurrentView())},"~N,~N,~N,~N,~A,~A,~A,~A");c(c$,"isNearby",function(a,b,d,c){var f=a.getXVal(),h=d.toPixelX(f);a=this.toPixelY(a.getYVal());f=b.getXVal();d=d.toPixelX(f);b=this.toPixelY(b.getYVal());return Math.abs(h-d)+Math.abs(a-b)<c},"JSV.common.Coordinate,JSV.common.Coordinate,JSV.api.XYScaleConverter,~N");
c(c$,"setReversePlot",function(a){(this.reversePlot=a)&&this.closeDialogsExcept(JSV.common.Annotation.AType.NONE);this.setDrawXAxis()},"~B");c(c$,"setDrawXAxis",function(){this.drawXAxisLeftToRight=(new Boolean(this.xAxisLeftToRight^this.reversePlot)).valueOf();for(var a=0;a<this.spectra.size();a++)this.spectra.get(a).setExportXAxisDirection(this.drawXAxisLeftToRight)});c(c$,"fixX",function(a){return JSV.common.Coordinate.intoRange(a,this.xPixel0,this.xPixel1)},"~N");c(c$,"isInTopBar",function(a,
b){return a==this.fixX(a)&&b>this.pin1Dx0.yPixel0-2&&b<this.pin1Dx0.yPixel1},"~N,~N");c(c$,"isInTopBar2D",function(a,b){return null!=this.imageView&&a==this.imageView.fixX(a)&&b>this.pin2Dx0.yPixel0-2&&b<this.pin2Dx0.yPixel1},"~N,~N");c(c$,"isInRightBar",function(a,b){return b==this.fixY(b)&&a>this.pin1Dy0.xPixel1&&a<this.pin1Dy0.xPixel0+2},"~N,~N");c(c$,"isInRightBar2D",function(a,b){return null!=this.imageView&&b==this.fixY(b)&&a>this.pin2Dy0.xPixel1&&a<this.pin2Dy0.xPixel0+2},"~N,~N");c(c$,"getScale",
function(){return this.viewData.getScale()});c(c$,"getXPixels",function(){return this.xPixels});c(c$,"getXPixel0",function(){return this.xPixel0});e(c$,"getYPixels",function(){return this.yPixels});e(c$,"toX",function(a){return null!=this.imageView&&this.imageView.isXWithinRange(a)?this.imageView.toX(a):this.getScale().toX(this.fixX(a),this.xPixel1,this.drawXAxisLeftToRight)},"~N");c(c$,"toX0",function(a){return this.viewList.get(0).getScale().toX0(this.fixX(a),this.xPixel0,this.xPixel1,this.drawXAxisLeftToRight)},
"~N");c(c$,"toPixelX",function(a){return this.getScale().toPixelX(a,this.xPixel0,this.xPixel1,this.drawXAxisLeftToRight)},"~N");c(c$,"toPixelX0",function(a){return this.viewList.get(0).getScale().toPixelX0(a,this.xPixel0,this.xPixel1,this.drawXAxisLeftToRight)},"~N");e(c$,"toY",function(a){return this.getScale().toY(a,this.yPixel0)},"~N");c(c$,"toPixelY",function(a){return this.getScale().toPixelY(a,this.yPixel1)},"~N");c(c$,"toY0",function(a){return this.viewList.get(0).getScale().toY0(this.fixY(a),
this.yPixel0,this.yPixel1)},"~N");c(c$,"toPixelY0",function(a){return this.fixY(this.viewList.get(0).getScale().toPixelY0(a,this.yPixel0,this.yPixel1))},"~N");c(c$,"fixY",function(a){return JSV.common.Coordinate.intoRange(a,this.yPixel0,this.yPixel1)},"~N");c(c$,"toPixelYint",function(a){return this.yPixel1-n(Double.isNaN(a)?-2147483648:this.yPixels*a)},"~N");c(c$,"findAnnotation2D",function(a){for(var b=this.annotations.size();0<=--b;){var d=this.annotations.get(b);if(this.isNearby(d,a,this.imageView,
10))return d}return null},"JSV.common.Coordinate");c(c$,"addAnnotation",function(a,b){null==this.annotations&&(this.annotations=new JU.List);for(var d=!1,c=this.annotations.size();0<=--c;)if(a.is2D?this.isNearby(this.annotations.get(c),a,this.imageView,10):a.equals(this.annotations.get(c)))d=!0,this.annotations.remove(c);0<a.text.length&&(!d||!b)&&this.annotations.addLast(a)},"JSV.common.Annotation,~B");c(c$,"setImageWindow",function(){this.imageView.setPixelWidthHeight(n((this.pd.display1D?0.6:1)*
this.xPixels0),this.yPixels);this.imageView.setXY0(this.getSpectrumAt(0),n(Math.floor(this.xPixel10-this.imageView.xPixels)),this.yPixel0)});c(c$,"findNearestMaxMin",function(){if(1<this.nSpectra&&0>this.iSpectrumClicked)return!1;this.xValueMovedTo=this.getSpectrum().findXForPeakNearest(this.xValueMovedTo);this.setXPixelMovedTo(this.xValueMovedTo,1.7976931348623157E308,0,0);return!0});c(c$,"setXPixelMovedTo",function(a,b,d,c){1.7976931348623157E308==a&&1.7976931348623157E308==b?(this.xPixelMovedTo=
d,this.xPixelMovedTo2=c,this.isLinked&&this.sticky2Dcursor&&this.pd.setlinkedXMove(this,this.toX(this.xPixelMovedTo),!1)):(1.7976931348623157E308!=a&&(this.xPixelMovedTo=this.toPixelX(a),this.fixX(this.xPixelMovedTo)!=this.xPixelMovedTo&&(this.xPixelMovedTo=-1),this.xPixelMovedTo2=-1,1E10!=a&&this.setSpectrumClicked(this.getFixedSelectedSpectrumIndex())),1.7976931348623157E308!=b&&(this.xPixelMovedTo2=this.toPixelX(b)))},"~N,~N,~N,~N");c(c$,"processPendingMeasurement",function(a,b,d){if(this.isInPlotRegion(a,
b)){var c=this.toX(a),f=this.toY(b),h=c;switch(d){case 0:this.pendingMeasurement.setPt2(this.toX(a),this.toY(b));break;case 3:case 2:if(0>this.iSpectrumClicked)break;var e=this.spectra.get(this.iSpectrumClicked);this.setScale(this.iSpectrumClicked);3!=d&&(d=this.findMeasurement(this.selectedSpectrumMeasurements,a,b,1),null!=d?(c=d.getXVal(),f=d.getYVal()):null!=(d=this.findMeasurement(this.selectedSpectrumMeasurements,a,b,2))?(c=d.getXVal2(),f=d.getYVal2()):c=this.getNearestPeak(e,c,f));this.pendingMeasurement=
(new JSV.common.Measurement).setM1(c,f,e);this.pendingMeasurement.setPt2(h,f);this.pd.repaint();break;case 1:case -2:case -3:if(null==this.pendingMeasurement)break;this.setScale(this.getSpectrumIndex(this.pendingMeasurement.spec));3!=d&&this.findNearestMaxMin()&&(a=this.xPixelMovedTo);c=this.toX(a);f=this.toY(b);this.pendingMeasurement.setPt2(c,f);0==this.pendingMeasurement.text.length?this.pendingMeasurement=null:(this.setMeasurement(this.pendingMeasurement),1==d?(this.setSpectrumClicked(this.getSpectrumIndex(this.pendingMeasurement.spec)),
this.pendingMeasurement=(new JSV.common.Measurement).setM1(c,f,this.pendingMeasurement.spec)):this.pendingMeasurement=null);this.pd.repaint();break;case 5:this.findNearestMaxMin()?(a=this.getFixedSelectedSpectrumIndex(),Double.isNaN(this.lastXMax)||this.lastSpecClicked!=a||null==this.pendingMeasurement?(this.lastXMax=this.xValueMovedTo,this.lastSpecClicked=a,this.pendingMeasurement=(new JSV.common.Measurement).setM1(this.xValueMovedTo,this.yValueMovedTo,this.spectra.get(a))):(this.pendingMeasurement.setPt2(this.xValueMovedTo,
this.yValueMovedTo),0<this.pendingMeasurement.text.length&&this.setMeasurement(this.pendingMeasurement),this.pendingMeasurement=null,this.lastXMax=NaN)):this.lastXMax=NaN}}else this.pendingMeasurement=null},"~N,~N,~N");c(c$,"checkIntegralNormalizationClick",function(a,b){if(null==this.selectedSpectrumIntegrals)return!1;var d=this.findMeasurement(this.selectedSpectrumIntegrals,a,b,-5);if(null==d)return!1;this.selectedIntegral=d;this.pd.normalizeIntegral();this.updateDialog(JSV.common.Annotation.AType.Integration,
-1);this.setSpectrumClicked(this.getSpectrumIndex(d.spec));return!0},"~N,~N");c(c$,"getNearestPeak",function(a,b,d){var c=JSV.common.Coordinate.getNearestXWithYAbove(a.getXYCoords(),b,d,a.isInverted(),!1);a=JSV.common.Coordinate.getNearestXWithYAbove(a.getXYCoords(),b,d,a.isInverted(),!0);return Double.isNaN(c)?a:Double.isNaN(a)?c:Math.abs(c-b)<Math.abs(a-b)?c:a},"JSV.common.JDXSpectrum,~N,~N");c(c$,"findMeasurement",function(a,b,d,c){if(null==a||0==a.size())return null;if(0==c){var f=this.findMeasurement(a,
b,d,-1);return null!=f||y(a.get(0),JSV.common.Integral)?f:this.findMeasurement(a,b,d,-2)}for(var h=a.size();0<=--h;){var f=a.get(h),e,p,l,k;y(f,JSV.common.Integral)?(e=p=this.toPixelX(f.getXVal2()),l=this.toPixelYint(f.getYVal()),k=this.toPixelYint(f.getYVal2())):(e=this.toPixelX(f.getXVal()),p=this.toPixelX(f.getXVal2()),l=k=-2==c?this.yPixel1-2:this.toPixelY(f.getYVal()));switch(c){case 1:if(4>Math.abs(b-e)+Math.abs(d-l))return f;break;case 2:if(4>Math.abs(b-p)+Math.abs(d-k))return f;break;case -5:l=
k=n((l+k)/2),p=e+20;default:if(JSV.common.GraphSet.isOnLine(b,d,e,l,p,k))return f}}return null},"JSV.common.MeasurementData,~N,~N,~N");c(c$,"setMeasurement",function(a){var b=this.getSpectrumIndex(a.spec),d=this.getDialog(JSV.common.Annotation.AType.Measurements,b);null==d&&this.addDialog(b,JSV.common.Annotation.AType.Measurements,d=new JSV.common.MeasurementData(JSV.common.Annotation.AType.Measurements,a.spec));d.getData().addLast(a.copyM());this.updateDialog(JSV.common.Annotation.AType.Measurements,
-1)},"JSV.common.Measurement");c(c$,"checkArrowUpDownClick",function(a,b){var d=!1,c=this.isArrowClick(a,b,JSV.common.GraphSet.ArrowType.UP)?JSV.common.GraphSet.RT2:this.isArrowClick(a,b,JSV.common.GraphSet.ArrowType.DOWN)?1/JSV.common.GraphSet.RT2:0;if(0!=c){1<this.nSplit&&this.setSpectrumSelected(this.iSpectrumMovedTo);if((1==this.nSpectra||0<=this.iSpectrumSelected)&&this.spectra.get(this.getFixedSelectedSpectrumIndex()).isTransmittance())c=1/c;this.viewData.scaleSpectrum(null==this.imageView?
this.iSpectrumSelected:-2,c);d=!0}else this.isArrowClick(a,b,JSV.common.GraphSet.ArrowType.RESET)&&(this.clearViews(),this.showAllStacked&&!this.stackSelected&&this.closeDialogsExcept(JSV.common.Annotation.AType.NONE),this.viewData.resetScaleFactors(),this.updateDialogs(),d=!0);d&&(null!=this.imageView&&(this.update2dImage(!1),this.resetPinsFromView()),this.pd.taintedAll=!0);return d},"~N,~N");c(c$,"checkArrowLeftRightClick",function(a,b){if(this.haveLeftRightArrows){var d=this.isArrowClick(a,b,JSV.common.GraphSet.ArrowType.LEFT)?
-1:this.isArrowClick(a,b,JSV.common.GraphSet.ArrowType.RIGHT)?1:0;if(0!=d)return this.setSpectrumClicked((this.iSpectrumSelected+d)%this.nSpectra),!0;if(this.isArrowClick(a,b,JSV.common.GraphSet.ArrowType.HOME))return this.showAllStacked?(this.showAllStacked=!1,this.setSpectrumClicked(this.getFixedSelectedSpectrumIndex())):(this.showAllStacked=this.allowStacking,this.setSpectrumSelected(-1),this.stackSelected=!1),!0}return!1},"~N,~N");c(c$,"isArrowClick",function(a,b,d){switch(d){case JSV.common.GraphSet.ArrowType.UP:case JSV.common.GraphSet.ArrowType.DOWN:case JSV.common.GraphSet.ArrowType.RESET:return d=
n((this.yPixel00+this.yPixel11)/2)+15*(d===JSV.common.GraphSet.ArrowType.UP?-1:d===JSV.common.GraphSet.ArrowType.DOWN?1:0),10>Math.abs(this.xVArrows-a)&&10>Math.abs(d-b);case JSV.common.GraphSet.ArrowType.LEFT:case JSV.common.GraphSet.ArrowType.RIGHT:case JSV.common.GraphSet.ArrowType.HOME:return d=this.xHArrows+15*(d===JSV.common.GraphSet.ArrowType.LEFT?-1:d===JSV.common.GraphSet.ArrowType.RIGHT?1:0),10>Math.abs(d-a)&&10>Math.abs(this.yHArrows-b)}return!1},"~N,~N,JSV.common.GraphSet.ArrowType");
c(c$,"setWidgetValueByUser",function(a){var b;b=a===this.cur2Dy?""+this.imageView.toSubspectrumIndex(a.yPixel0):a===this.pin1Dx01?""+Math.min(this.pin1Dx0.getXVal(),this.pin1Dx1.getXVal())+" - "+Math.max(this.pin1Dx0.getXVal(),this.pin1Dx1.getXVal()):a===this.pin1Dy01?""+Math.min(this.pin1Dy0.getYVal(),this.pin1Dy1.getYVal())+" - "+Math.max(this.pin1Dy0.getYVal(),this.pin1Dy1.getYVal()):a===this.pin2Dx01?""+Math.min(this.pin2Dx0.getXVal(),this.pin2Dx1.getXVal())+" - "+Math.max(this.pin2Dx0.getXVal(),
this.pin2Dx1.getXVal()):a===this.pin2Dy01?""+n(Math.min(this.pin2Dy0.getYVal(),this.pin2Dy1.getYVal()))+" - "+n(Math.max(this.pin2Dy0.getYVal(),this.pin2Dy1.getYVal())):""+a.getValue();b=this.pd.getInput("New value?","Set Slider",b);if(null!=b){b=b.trim();try{if(a===this.pin1Dx01||a===this.pin1Dy01||a===this.pin2Dx01||a===this.pin2Dy01){var d=b.indexOf("-",1);if(!(0>d)){var c=Double.$valueOf(b.substring(0,d)).doubleValue(),f=Double.$valueOf(b.substring(d+1)).doubleValue();a===this.pin1Dx01?this.doZoom(c,
this.pin1Dy0.getYVal(),f,this.pin1Dy1.getYVal(),!0,!1,!1,!0,!0):a===this.pin1Dy01?this.doZoom(this.pin1Dx0.getXVal(),c,this.pin1Dx1.getXVal(),f,null==this.imageView,null==this.imageView,!1,!1,!0):a===this.pin2Dx01?(this.imageView.setView0(this.imageView.toPixelX0(c),this.pin2Dy0.yPixel0,this.imageView.toPixelX0(f),this.pin2Dy1.yPixel0),this.doZoom(c,this.pin1Dy0.getYVal(),f,this.pin1Dy1.getYVal(),!1,!1,!1,!0,!0)):a===this.pin2Dy01&&(this.imageView.setView0(this.pin2Dx0.xPixel0,this.imageView.toPixelY0(c),
this.pin2Dx1.xPixel0,this.imageView.toPixelY0(f)),this.doZoom(this.imageView.toX(this.imageView.xPixel0),this.getScale().minY,this.imageView.toX(this.imageView.xPixel0+this.imageView.xPixels-1),this.getScale().maxY,!1,!1,!1,!1,!0))}}else{var h=Double.$valueOf(b).doubleValue();a.isXtype?(f=a===this.pin1Dx0||a===this.cur2Dx0||a===this.pin2Dx0?this.pin1Dx1.getXVal():this.pin1Dx0.getXVal(),this.doZoom(h,0,f,0,!a.is2D,!1,!1,!0,!0)):a===this.cur2Dy?this.setCurrentSubSpectrum(n(h)):a===this.pin2Dy0||a===
this.pin2Dy1?(f=a===this.pin2Dy0?this.pin2Dy1.yPixel0:this.pin2Dy0.yPixel0,this.imageView.setView0(this.pin2Dx0.xPixel0,this.imageView.subIndexToPixelY(n(h)),this.pin2Dx1.xPixel0,f)):(f=a===this.pin1Dy0?this.pin1Dy1.getYVal():this.pin1Dy0.getYVal(),this.doZoom(this.pin1Dx0.getXVal(),h,this.pin1Dx1.getXVal(),f,null==this.imageView,null==this.imageView,!1,!1,!0))}}catch(e){if(!v(e,Exception))throw e;}}},"JSV.common.PlotWidget");c(c$,"removeAllHighlights",function(a){if(null==a)this.highlights.clear();
else for(var b=this.highlights.size();0<=--b;)this.highlights.get(b).spectrum===a&&this.highlights.remove(b)},"JSV.common.JDXSpectrum");c(c$,"setCoordClicked",function(a,b,d){0==d&&(this.nextClickForSetPeak=!1);if(Double.isNaN(b))return this.pd.coordClicked=null,this.pd.coordsClicked=null;this.pd.coordClicked=(new JSV.common.Coordinate).set(this.lastClickX=b,d);this.pd.coordsClicked=this.getSpectrum().getXYCoords();this.pd.xPixelClicked=this.lastPixelX=a;return this.pd.coordClicked},"~N,~N,~N");c(c$,
"setWidgets",function(a,b,d){if(a||null==this.pin1Dx0)null==this.zoomBox1D?this.newPins():this.resetPinPositions();this.setDerivedPins(b);this.setPinSliderPositions(d)},"~B,~N,~B");c(c$,"newPins",function(){this.zoomBox1D=new JSV.common.PlotWidget("zoomBox1D");this.pin1Dx0=new JSV.common.PlotWidget("pin1Dx0");this.pin1Dx1=new JSV.common.PlotWidget("pin1Dx1");this.pin1Dy0=new JSV.common.PlotWidget("pin1Dy0");this.pin1Dy1=new JSV.common.PlotWidget("pin1Dy1");this.pin1Dx01=new JSV.common.PlotWidget("pin1Dx01");
this.pin1Dy01=new JSV.common.PlotWidget("pin1Dy01");this.cur1D2x1=new JSV.common.PlotWidget("cur1D2x1");this.cur1D2x1.color=JSV.common.ScriptToken.PEAKTABCOLOR;this.cur1D2x2=new JSV.common.PlotWidget("cur1D2x2");this.cur1D2x2.color=JSV.common.ScriptToken.PEAKTABCOLOR;if(null!=this.imageView){this.zoomBox2D=new JSV.common.PlotWidget("zoomBox2D");this.pin2Dx0=new JSV.common.PlotWidget("pin2Dx0");this.pin2Dx1=new JSV.common.PlotWidget("pin2Dx1");this.pin2Dy0=new JSV.common.PlotWidget("pin2Dy0");this.pin2Dy1=
new JSV.common.PlotWidget("pin2Dy1");this.pin2Dx01=new JSV.common.PlotWidget("pin2Dx01");this.pin2Dy01=new JSV.common.PlotWidget("pin2Dy01");this.cur2Dx0=new JSV.common.PlotWidget("cur2Dx0");this.cur2Dx1=new JSV.common.PlotWidget("cur2Dx1");this.cur2Dy=new JSV.common.PlotWidget("cur2Dy");this.pin2Dy0.setY(0,this.imageView.toPixelY0(0));var a=this.getSpectrumAt(0).getSubSpectra().size();this.pin2Dy1.setY(a,this.imageView.toPixelY0(a))}this.setWidgetX(this.pin1Dx0,this.getScale().minX);this.setWidgetX(this.pin1Dx1,
this.getScale().maxX);this.setWidgetY(this.pin1Dy0,this.getScale().minY);this.setWidgetY(this.pin1Dy1,this.getScale().maxY);this.widgets=[this.zoomBox1D,this.zoomBox2D,this.pin1Dx0,this.pin1Dx01,this.pin1Dx1,this.pin1Dy0,this.pin1Dy01,this.pin1Dy1,this.pin2Dx0,this.pin2Dx01,this.pin2Dx1,this.pin2Dy0,this.pin2Dy01,this.pin2Dy1,this.cur2Dx0,this.cur2Dx1,this.cur2Dy,this.cur1D2x1,this.cur1D2x2]});c(c$,"setWidgetX",function(a,b){a.setX(b,this.toPixelX0(b))},"JSV.common.PlotWidget,~N");c(c$,"setWidgetY",
function(a,b){a.setY(b,this.toPixelY0(b))},"JSV.common.PlotWidget,~N");c(c$,"resetPinsFromView",function(){null!=this.pin1Dx0&&(this.setWidgetX(this.pin1Dx0,this.getScale().minXOnScale),this.setWidgetX(this.pin1Dx1,this.getScale().maxXOnScale),this.setWidgetY(this.pin1Dy0,this.getScale().minYOnScale),this.setWidgetY(this.pin1Dy1,this.getScale().maxYOnScale))});c(c$,"resetPinPositions",function(){this.resetX(this.pin1Dx0);this.resetY(this.pin1Dy0);this.resetY(this.pin1Dy1);null==this.imageView?(null!=
this.gs2dLinkedX&&this.resetX(this.cur1D2x1),null!=this.gs2dLinkedY&&this.resetX(this.cur1D2x2)):(this.pin2Dy0.setY(this.pin2Dy0.getYVal(),this.imageView.toPixelY0(this.pin2Dy0.getYVal())),this.pin2Dy1.setY(this.pin2Dy1.getYVal(),this.imageView.toPixelY0(this.pin2Dy1.getYVal())))});c(c$,"resetX",function(a){this.setWidgetX(a,a.getXVal())},"JSV.common.PlotWidget");c(c$,"resetY",function(a){this.setWidgetY(a,a.getYVal())},"JSV.common.PlotWidget");c(c$,"setPinSliderPositions",function(a){this.pin1Dx0.yPixel0=
this.pin1Dx1.yPixel0=this.pin1Dx01.yPixel0=this.yPixel0-5;this.pin1Dx0.yPixel1=this.pin1Dx1.yPixel1=this.pin1Dx01.yPixel1=this.yPixel0;this.cur1D2x1.yPixel1=this.cur1D2x2.yPixel1=this.yPixel0-5;this.cur1D2x1.yPixel0=this.cur1D2x2.yPixel0=this.yPixel1+6;null==this.imageView?(this.pin1Dy0.xPixel0=this.pin1Dy1.xPixel0=this.pin1Dy01.xPixel0=this.xPixel1+5,this.pin1Dy0.xPixel1=this.pin1Dy1.xPixel1=this.pin1Dy01.xPixel1=this.xPixel1):(this.pin1Dy0.xPixel0=this.pin1Dy1.xPixel0=this.pin1Dy01.xPixel0=this.imageView.xPixel1+
15,this.pin1Dy0.xPixel1=this.pin1Dy1.xPixel1=this.pin1Dy01.xPixel1=this.imageView.xPixel1+10,this.pin2Dx0.yPixel0=this.pin2Dx1.yPixel0=this.pin2Dx01.yPixel0=this.yPixel0-5,this.pin2Dx0.yPixel1=this.pin2Dx1.yPixel1=this.pin2Dx01.yPixel1=this.yPixel0,this.pin2Dy0.xPixel0=this.pin2Dy1.xPixel0=this.pin2Dy01.xPixel0=this.imageView.xPixel1+5,this.pin2Dy0.xPixel1=this.pin2Dy1.xPixel1=this.pin2Dy01.xPixel1=this.imageView.xPixel1,this.cur2Dx0.yPixel0=this.cur2Dx1.yPixel0=this.yPixel1+6,this.cur2Dx0.yPixel1=
this.cur2Dx1.yPixel1=this.yPixel0-5,this.cur2Dx0.yPixel0=this.cur2Dx1.yPixel0=this.yPixel1+6,this.cur2Dx1.yPixel1=this.cur2Dx1.yPixel1=this.yPixel0-5,this.cur2Dy.xPixel0=a?n((this.xPixel1+this.imageView.xPixel0)/2):this.imageView.xPixel0-6,this.cur2Dy.xPixel1=this.imageView.xPixel1+5)},"~B");c(c$,"setDerivedPins",function(a){this.triggered=!0;null!=this.gs2dLinkedX&&this.cur1D2x1.setX(this.cur1D2x1.getXVal(),this.toPixelX(this.cur1D2x1.getXVal()));null!=this.gs2dLinkedY&&this.cur1D2x2.setX(this.cur1D2x2.getXVal(),
this.toPixelX(this.cur1D2x2.getXVal()));this.pin1Dx01.setX(0,n((this.pin1Dx0.xPixel0+this.pin1Dx1.xPixel0)/2));this.pin1Dy01.setY(0,n((this.pin1Dy0.yPixel0+this.pin1Dy1.yPixel0)/2));this.pin1Dx01.setEnabled(Math.min(this.pin1Dx0.xPixel0,this.pin1Dx1.xPixel0)>this.xPixel0||Math.max(this.pin1Dx0.xPixel0,this.pin1Dx1.xPixel0)<this.xPixel1);this.pin1Dy01.setEnabled(Math.min(this.pin1Dy0.yPixel0,this.pin1Dy1.yPixel0)>Math.min(this.toPixelY(this.getScale().minY),this.toPixelY(this.getScale().maxY))||Math.max(this.pin1Dy0.yPixel0,
this.pin1Dy1.yPixel0)<Math.max(this.toPixelY(this.getScale().minY),this.toPixelY(this.getScale().maxY)));if(null!=this.imageView){var b=this.pin1Dx0.getXVal();this.cur2Dx0.setX(b,this.imageView.toPixelX(b));b=this.pin1Dx1.getXVal();this.cur2Dx1.setX(b,this.imageView.toPixelX(b));b=this.imageView.toX(this.imageView.xPixel0);this.pin2Dx0.setX(b,this.imageView.toPixelX0(b));b=this.imageView.toX(this.imageView.xPixel1);this.pin2Dx1.setX(b,this.imageView.toPixelX0(b));this.pin2Dx01.setX(0,n((this.pin2Dx0.xPixel0+
this.pin2Dx1.xPixel0)/2));b=this.imageView.imageHeight-1-this.imageView.yView1;this.pin2Dy0.setY(b,this.imageView.toPixelY0(b));b=this.imageView.imageHeight-1-this.imageView.yView2;this.pin2Dy1.setY(b,this.imageView.toPixelY0(b));this.pin2Dy01.setY(0,n((this.pin2Dy0.yPixel0+this.pin2Dy1.yPixel0)/2));this.cur2Dy.yPixel0=this.cur2Dy.yPixel1=this.imageView.subIndexToPixelY(a);this.pin2Dx01.setEnabled(Math.min(this.pin2Dx0.xPixel0,this.pin2Dx1.xPixel0)!=this.imageView.xPixel0||Math.max(this.pin2Dx0.xPixel0,
this.pin2Dx1.xPixel1)!=this.imageView.xPixel1);this.pin2Dy01.setEnabled(Math.min(this.pin2Dy0.yPixel0,this.pin2Dy1.yPixel0)!=this.yPixel0||Math.max(this.pin2Dy0.yPixel0,this.pin2Dy1.yPixel1)!=this.yPixel1)}},"~N");c(c$,"doZoom",function(a,b,d,c,f,h,e,p,l){a==d?(a=this.getScale().minXOnScale,d=this.getScale().maxXOnScale):this.isLinked&&p&&this.pd.doZoomLinked(this,a,d,l,e,f);a>d&&(p=a,a=d,d=p);b>c&&(p=b,b=c,c=p);p=!f&&null!=this.imageView&&(this.imageView.minZ!=b||this.imageView.maxZ!=c);if(this.zoomEnabled||
p){if(e){if(!this.getScale().isInRangeX(a)&&!this.getScale().isInRangeX(d))return;this.getScale().isInRangeX(a)?this.getScale().isInRangeX(d)||(d=this.getScale().maxX):a=this.getScale().minX}this.pd.taintedAll=!0;e=this.viewData.getScaleData();var k=H(this.nSpectra,0),n=H(this.nSpectra,0);this.graphsTemp.clear();var m=this.getSpectrumAt(0).getSubSpectra(),m=null==m||2==m.size();if(this.getSpectrumAt(0).is1D()&&!m){if(this.graphsTemp.addLast(this.getSpectrum()),!JSV.common.ScaleData.setDataPointIndices(this.graphsTemp,
a,d,3,k,n))return}else if(!JSV.common.ScaleData.setDataPointIndices(this.spectra,a,d,3,k,n))return;if(m=b==c)f=!p&&f?f=this.getScale().spectrumScaleFactor:1,1E-4>Math.abs(f-1)&&(b=this.getScale().minYOnScale,c=this.getScale().maxYOnScale);f=null;if(m||h)this.getCurrentView(),f=this.viewData.getNewScales(this.iSpectrumSelected,m,b,c);this.getView(a,d,b,c,k,n,e,f);this.setXPixelMovedTo(1E10,1.7976931348623157E308,0,0);this.setWidgetX(this.pin1Dx0,a);this.setWidgetX(this.pin1Dx1,d);this.setWidgetY(this.pin1Dy0,
b);this.setWidgetY(this.pin1Dy1,c);null==this.imageView?this.updateDialogs():(a=this.getSpectrumAt(0).getSubIndex(),d=this.imageView.fixSubIndex(a),d!=a&&this.setCurrentSubSpectrum(d),p&&this.update2dImage(!1));l&&this.addCurrentZoom()}},"~N,~N,~N,~N,~B,~B,~B,~B,~B");c(c$,"updateDialogs",function(){this.updateDialog(JSV.common.Annotation.AType.PeakList,-1);this.updateDialog(JSV.common.Annotation.AType.Measurements,-1)});c(c$,"setCurrentSubSpectrum",function(a){var b=this.getSpectrumAt(0);a=b.setCurrentSubSpectrum(a);
b.isForcedSubset()&&this.viewData.setXRangeForSubSpectrum(this.getSpectrum().getXYCoords());this.pd.notifySubSpectrumChange(a,this.getSpectrum())},"~N");c(c$,"addCurrentZoom",function(){if(this.viewList.size()>this.currentZoomIndex+1)for(var a=this.viewList.size()-1;a>this.currentZoomIndex;a--)this.viewList.remove(a);this.viewList.addLast(this.viewData);this.currentZoomIndex++});c(c$,"setZoomTo",function(a){this.currentZoomIndex=a;this.viewData=this.viewList.get(a);this.resetPinsFromView()},"~N");
c(c$,"clearViews",function(){this.isLinked&&this.pd.clearLinkViews(this);this.setZoom(0,0,0,0);for(var a=this.viewList.size();1<=--a;)this.viewList.remove(a)});c(c$,"drawAll",function(a,b,d,c,f){this.g2d=this.pd.g2d;this.gMain=a;var h=this.getSpectrumAt(0).getSubIndex();this.is2DSpectrum=!this.getSpectrumAt(0).is1D()&&(this.isLinked||this.pd.getBoolean(JSV.common.ScriptToken.DISPLAY2D))&&(null!=this.imageView||this.get2DImage());null!=this.imageView&&f&&(this.pd.isPrinting&&this.g2d!==this.pd.g2d0&&
this.g2d.newGrayScaleImage(a,this.image2D,this.imageView.imageWidth,this.imageView.imageHeight,this.imageView.getBuffer()),this.is2DSpectrum&&this.setPositionForFrame(d),this.draw2DImage());var e=this.stackSelected||!this.showAllStacked?this.iSpectrumSelected:-1,p=!this.showAllStacked||1==this.nSpectra||0<=e,l=null==this.imageView||this.pd.display1D,k=0<=e?1:0,n=this.getFixedSelectedSpectrumIndex();if(l&&f&&(this.fillBox(a,this.xPixel0,this.yPixel0,this.xPixel1,this.yPixel1,JSV.common.ScriptToken.PLOTAREACOLOR),
0>e)){p=!0;for(e=0;e<this.nSpectra;e++)this.doPlot(e,d)&&0!=k++&&(p=(new Boolean(p&this.viewData.areYScalesSame(e-1,e))).valueOf())}var m=1==this.nSpectra?0:!this.showAllStacked?this.iSpectrumMovedTo:this.iSpectrumSelected;if(f){var e=!this.isLinked&&this.isSplittable&&(!this.isSplittable||1==this.nSplit||this.pd.currentSplitPoint==d),t=this.pd.isCurrentGraphSet(this)&&this.zoomEnabled&&this.spectra.get(0).isScalable()&&(e||1==this.nSpectra)&&(1==this.nSplit||this.pd.currentSplitPoint==this.iSpectrumMovedTo)&&
!this.isDrawNoSpectra();this.drawFrame(a,m,e,this.isSplittable,t)}if(this.pd.isCurrentGraphSet(this)&&d==this.pd.currentSplitPoint&&(2>k||0<=this.iSpectrumSelected))this.$haveSelectedSpectrum=!0;this.haveSingleYScale=this.showAllStacked&&1<this.nSpectra?this.allowStackedYScale&&p:!0;if(l){p=S(this.yPixels*(this.yStackOffsetPercent/100));this.haveLeftRightArrows=!1;for(t=e=0;e<this.nSpectra;e++)if(this.doPlot(e,d)){var m=this.stackSelected&&0<=this.iSpectrumSelected&&this.iSpectrumSelected!=e,r=!this.reversePlot&&
this.getShowAnnotation(JSV.common.Annotation.AType.Integration,e)&&(!this.showAllStacked||this.iSpectrumSelected==e)?this.getDialog(JSV.common.Annotation.AType.Integration,e).getData():null;this.setScale(e);var s=this.spectra.get(e);1<this.nSplit&&(n=e);var u=!m&&(1==this.nSplit||this.showAllStacked||this.iSpectrumSelected==d),q=u&&this.$haveSelectedSpectrum&&e==n;u&&(this.resetPinsFromView(),this.drawWidgets(b,h,c,l,q,!1));this.haveSingleYScale&&(e==n&&f)&&(this.drawGrid(a),this.pd.isPrinting&&1<
this.nSplit&&this.drawSpectrumSource(a,e));u&&this.drawWidgets(b,h,!1,l,q,!0);this.haveSingleYScale&&(!this.isDrawNoSpectra()&&e==n&&(1==this.nSpectra||0<=this.iSpectrumSelected))&&this.drawHighlightsAndPeakTabs(b,e);if(f){if((1==k&&0>this.iSpectrumSelected||this.iSpectrumSelected==e&&this.pd.isCurrentGraphSet(this))&&this.pd.titleOn&&!this.pd.titleDrawn)this.pd.drawTitle(a,this.height,this.width,this.pd.getDrawTitle(this.pd.isPrinting)),this.pd.titleDrawn=!0;this.haveSingleYScale&&e==n&&(this.pd.getBoolean(JSV.common.ScriptToken.YSCALEON)&&
this.drawYScale(a,this),this.pd.getBoolean(JSV.common.ScriptToken.YUNITSON)&&this.drawYUnits(a));this.drawSpectrum(a,e,t,m,r)}this.drawMeasurements(b,e);null!=this.pendingMeasurement&&this.pendingMeasurement.spec===s&&this.drawMeasurement(b,this.pendingMeasurement);(1<this.nSplit?e==this.iSpectrumMovedTo:this.isLinked||e==n)&&(!this.pd.isPrinting&&0<=this.xPixelMovedTo&&s.isContinuous())&&this.drawSpectrumPointer(b,s,r);1<this.nSpectra&&(1==this.nSplit&&this.pd.isCurrentGraphSet(this)&&f)&&(this.haveLeftRightArrows=
!0,this.pd.isPrinting||(this.setScale(0),m=this.iSpectrumSelected,2!=this.nSpectra&&(this.setPlotColor(a,(m+this.nSpectra-1)%this.nSpectra),this.fillArrow(a,JSV.common.GraphSet.ArrowType.LEFT,this.yHArrows,this.xHArrows-9,!0),this.setCurrentBoxColor(a),this.fillArrow(a,JSV.common.GraphSet.ArrowType.LEFT,this.yHArrows,this.xHArrows-9,!1)),0<=m&&(this.setPlotColor(a,m),this.fillCircle(a,this.xHArrows,this.yHArrows,!0)),this.setCurrentBoxColor(a),this.fillCircle(a,this.xHArrows,this.yHArrows,!1),this.setPlotColor(a,
(m+1)%this.nSpectra),this.fillArrow(a,JSV.common.GraphSet.ArrowType.RIGHT,this.yHArrows,this.xHArrows+9,!0),this.setCurrentBoxColor(a),this.fillArrow(a,JSV.common.GraphSet.ArrowType.RIGHT,this.yHArrows,this.xHArrows+9,!1)));t-=p}f&&(this.pd.getBoolean(JSV.common.ScriptToken.XSCALEON)&&this.drawXScale(a,this),this.pd.getBoolean(JSV.common.ScriptToken.XUNITSON)&&this.drawXUnits(a))}else f&&(this.pd.getBoolean(JSV.common.ScriptToken.XSCALEON)&&this.drawXScale(a,this.imageView),this.pd.getBoolean(JSV.common.ScriptToken.YSCALEON)&&
this.drawYScale(a,this.imageView),0<=h&&this.draw2DUnits(a)),this.drawWidgets(b,h,c,l,!0,!1),this.drawWidgets(b,h,c,l,!0,!0);null!=this.annotations&&this.drawAnnotations(b,this.annotations,null)},"~O,~O,~N,~B,~B");c(c$,"drawSpectrumSource",function(a,b){this.pd.printFilePath(a,this.pd.thisWidth-this.pd.right,this.yPixel0,this.spectra.get(b).getFilePath())},"~O,~N");c(c$,"doPlot",function(a,b){var d=this.stackSelected&&0<=this.iSpectrumSelected&&this.iSpectrumSelected!=a,c=this.showAllStacked||-1==
this.iSpectrumSelected||this.iSpectrumSelected==a;return 1<this.nSplit?a==b:c&&(!this.pd.isPrinting||!d)},"~N,~N");c(c$,"drawSpectrumPointer",function(a,b,d){this.setColorFromToken(a,JSV.common.ScriptToken.PEAKTABCOLOR);var c=this.pd.integralShiftMode;null!=d&&((!this.pd.ctrlPressed||this.pd.isIntegralDrag)&&!this.isOnSpectrum(this.pd.mouseX,this.pd.mouseY,-1)?d=null:0==c&&(c=this.getShiftMode(this.pd.mouseX,this.pd.mouseY)));var f=this.yValueMovedTo;this.yValueMovedTo=null==d?b.getYValueAt(this.xValueMovedTo):
d.getPercentYValueAt(this.xValueMovedTo);this.setCoordStr(this.xValueMovedTo,this.yValueMovedTo);0!=c?(this.setPlotColor(a,0),b=0>c?this.yPixelPlot0:this.yPixelPlot1,this.drawHandle(a,0>c?this.xPixelPlot1:this.xPixelPlot0,b,!1)):(null!=d&&this.g2d.setStrokeBold(a,!0),Double.isNaN(f)||null!=this.pendingMeasurement?(this.g2d.drawLine(a,this.xPixelMovedTo,this.yPixel0,this.xPixelMovedTo,this.yPixel1),0<=this.xPixelMovedTo2&&this.g2d.drawLine(a,this.xPixelMovedTo2,this.yPixel0,this.xPixelMovedTo2,this.yPixel1),
this.yValueMovedTo=NaN):(b=null==d?this.toPixelY(this.yValueMovedTo):this.toPixelYint(this.yValueMovedTo/100),b==this.fixY(b)&&this.g2d.drawLine(a,this.xPixelMovedTo,b-10,this.xPixelMovedTo,b+10)),null!=d&&this.g2d.setStrokeBold(a,!1))},"~O,JSV.common.JDXSpectrum,JSV.common.IntegralData");c(c$,"setScale",function(a){this.viewData.setScale(a,this.xPixels,this.yPixels,this.spectra.get(a).isInverted())},"~N");c(c$,"draw2DUnits",function(a){var b=this.getSpectrumAt(0).nucleusX,d=this.getSpectrumAt(0).nucleusY;
this.setColorFromToken(a,JSV.common.ScriptToken.PLOTCOLOR);this.drawUnits(a,b,this.imageView.xPixel1+5*this.pd.scalingFactor,this.yPixel1,1,1);this.drawUnits(a,d,this.imageView.xPixel0-5*this.pd.scalingFactor,this.yPixel0,1,0)},"~O");c(c$,"drawPeakTabs",function(a,b){var d=1==this.nSpectra||0<=this.iSpectrumSelected?b.getPeakList():null;if(null!=d&&0<d.size()){null!=this.piMouseOver&&this.piMouseOver.spectrum===b&&this.pd.isMouseUp()?(this.g2d.setGraphicsColor(a,this.g2d.getColor4(240,240,240,140)),
this.drawPeak(a,this.piMouseOver,!0),b.setHighlightedPeak(this.piMouseOver)):b.setHighlightedPeak(null);this.setColorFromToken(a,JSV.common.ScriptToken.PEAKTABCOLOR);for(var c=d.size();0<=--c;)this.drawPeak(a,d.get(c),!1)}},"~O,JSV.common.JDXSpectrum");c(c$,"drawPeak",function(a,b,d){if(!this.pd.isPrinting){var c=b.getXMin(),f=b.getXMax();c!=f&&this.drawBar(a,b,c,f,null,d)}},"~O,JSV.common.PeakInfo,~B");c(c$,"drawWidgets",function(a,b,d,c,f,h){this.setWidgets(d,b,c);if(!this.pd.isPrinting||!(null==
this.imageView?!this.cur1D2Locked:this.sticky2Dcursor)){!this.pd.isPrinting&&!h&&(c?(this.fillBox(a,this.xPixel0,this.pin1Dx0.yPixel1,this.xPixel1,this.pin1Dx1.yPixel1+2,JSV.common.ScriptToken.GRIDCOLOR),this.fillBox(a,this.pin1Dx0.xPixel0,this.pin1Dx0.yPixel1,this.pin1Dx1.xPixel0,this.pin1Dx1.yPixel1+2,JSV.common.ScriptToken.PLOTCOLOR)):(this.fillBox(a,this.imageView.xPixel0,this.pin2Dx0.yPixel1,this.imageView.xPixel1,this.pin2Dx0.yPixel1+2,JSV.common.ScriptToken.GRIDCOLOR),this.fillBox(a,this.pin2Dx0.xPixel0,
this.pin2Dx0.yPixel1,this.pin2Dx1.xPixel0,this.pin2Dx1.yPixel1+2,JSV.common.ScriptToken.PLOTCOLOR),this.fillBox(a,this.pin2Dy0.xPixel1,this.yPixel1,this.pin2Dy1.xPixel1+2,this.yPixel0,JSV.common.ScriptToken.GRIDCOLOR),this.fillBox(a,this.pin2Dy0.xPixel1,this.pin2Dy0.yPixel1,this.pin2Dy1.xPixel1+2,this.pin2Dy1.yPixel0,JSV.common.ScriptToken.PLOTCOLOR)),this.fillBox(a,this.pin1Dy0.xPixel1,this.yPixel1,this.pin1Dy1.xPixel1+2,this.yPixel0,JSV.common.ScriptToken.GRIDCOLOR),f&&this.fillBox(a,this.pin1Dy0.xPixel1,
this.pin1Dy0.yPixel1,this.pin1Dy1.xPixel1+2,this.pin1Dy1.yPixel0,JSV.common.ScriptToken.PLOTCOLOR));for(b=0;b<this.widgets.length;b++)if(d=this.widgets[b],!(null==d||!d.isPinOrCursor&&!this.zoomEnabled)){var e=d===this.cur1D2x1||d===this.cur1D2x2||d===this.cur2Dx0||d===this.cur2Dx1||d===this.cur2Dy;if((d.isPin||!d.isPinOrCursor)!=h){if(d.is2D){if(d===this.cur2Dx0&&!c)continue}else{var p=d===this.pin1Dy0||d===this.pin1Dy1||d===this.pin1Dy01;if(null!=this.imageView&&c==p||p&&!f||d===this.cur1D2x1&&
null==this.gs2dLinkedX||d===this.cur1D2x2&&null==this.gs2dLinkedY||d===this.zoomBox1D&&(this.pd.isIntegralDrag||0!=this.pd.integralShiftMode))if(!this.isLinked||null!=this.imageView)continue}if(!this.pd.isPrinting||e)d.isPinOrCursor?(this.setColorFromToken(a,d.color),this.g2d.drawLine(a,d.xPixel0,d.yPixel0,d.xPixel1,d.yPixel1),d.isVisible=!0,d.isPin&&this.drawHandle(a,d.xPixel0,d.yPixel0,!d.isEnabled)):d.xPixel1!=d.xPixel0&&this.fillBox(a,d.xPixel0,d.yPixel0,d.xPixel1,d.yPixel1,d===this.zoomBox1D&&
this.pd.shiftPressed?JSV.common.ScriptToken.ZOOMBOXCOLOR2:JSV.common.ScriptToken.ZOOMBOXCOLOR)}}}},"~O,~N,~B,~B,~B,~B");c(c$,"drawBar",function(a,b,d,c,f,h){d=this.toPixelX(d);c=this.toPixelX(c);if(d>c){var e=d;d=c;c=e}d=this.fixX(d);c=this.fixX(c);3>c-d&&(d-=2,c+=2);null!=b&&b.setPixelRange(d,c);this.fillBox(a,d,this.yPixel0,c,this.yPixel0+(h?this.yPixels:5),f);null!=b&&!h&&(d=n((d+c)/2),this.fillBox(a,d-1,this.yPixel0,d+1,this.yPixel0+7,f))},"~O,JSV.common.PeakInfo,~N,~N,JSV.common.ScriptToken,~B");
c(c$,"drawSpectrum",function(a,b,d,c,f){var h=this.spectra.get(b);this.drawPlot(a,b,h.getXYCoords(),h.isContinuous(),d,c,null);null!=f&&(this.haveIntegralDisplayed(b)&&this.drawPlot(a,b,this.getIntegrationGraph(b).getXYCoords(),!0,d,!1,f),this.drawIntegralValues(a,b,d));null!=this.getIntegrationRatios(b)&&this.drawAnnotations(a,this.getIntegrationRatios(b),JSV.common.ScriptToken.INTEGRALPLOTCOLOR)},"~O,~N,~N,~B,JSV.common.IntegralData");c(c$,"getMeasurements",function(a,b){var d=this.getDialog(a,
b);return null==d||0==d.getData().size()||!d.getState()?null:d.getData()},"JSV.common.Annotation.AType,~N");c(c$,"drawPlot",function(a,b,d,c,f,h,e){var p=null!=e;e=null==e?null:e.getBitSet();var l=!p&&!h&&null!=this.pendingIntegral&&this.pendingIntegral.spec===this.spectra.get(b);h=h?-2:p?-1:!this.allowStacking?0:b;this.setPlotColor(a,h);var k=!0,n=this.toPixelY(0),l=(new Boolean(l&n==this.fixY(n))).valueOf(),m=this.viewData.getStartingPointIndex(b);b=this.viewData.getEndingPointIndex(b);if(c){b--;
var t=!l&&this.g2d.canDoLineTo();t&&this.g2d.doStroke(a,!0);var r=!1;for(c=m;c<=b;c++){var s=d[c],u=d[c+1],q=p?this.toPixelYint(s.getYVal()):this.toPixelY(s.getYVal());if(-2147483648!=q){var v=p?this.toPixelYint(u.getYVal()):this.toPixelY(u.getYVal());if(-2147483648!=v){var w=this.toPixelX(s.getXVal()),x=this.toPixelX(u.getXVal()),q=this.fixY(f+q),v=this.fixY(f+v);p&&(c==m&&(this.xPixelPlot1=w,this.yPixelPlot0=q),this.xPixelPlot0=x,this.yPixelPlot1=v);if(!(x==w&&q==v))if(l&&this.pendingIntegral.overlaps(s.getXVal(),
u.getXVal()))this.setColorFromToken(a,JSV.common.ScriptToken.INTEGRALPLOTCOLOR),this.g2d.drawLine(a,w,n,w,q),this.setPlotColor(a,h);else if(!(q==v&&(q==this.yPixel0||q==this.yPixel1)))if(null!=e&&e.get(c)!=k&&(k=e.get(c),!this.pd.isPrinting&&0!=this.pd.integralShiftMode?this.setPlotColor(a,0):k?this.setColorFromToken(a,JSV.common.ScriptToken.INTEGRALPLOTCOLOR):this.setPlotColor(a,-3)),!this.pd.isPrinting||k)r?this.g2d.lineTo(a,x,v):(this.g2d.drawLine(a,w,q,x,v),r=t)}}}t&&this.g2d.doStroke(a,!1)}else{for(c=
m;c<=b;c++)p=d[c],v=this.toPixelY(p.getYVal()),-2147483648!=v&&(w=this.toPixelX(p.getXVal()),q=this.toPixelY(Math.max(this.getScale().minYOnScale,0)),q=this.fixY(f+q),v=this.fixY(f+v),q==v&&(q==this.yPixel0||q==this.yPixel1)||this.g2d.drawLine(a,w,q,w,v));this.getScale().isYZeroOnScale()&&(d=f+this.toPixelY(this.getScale().spectrumYRef),d==this.fixY(d)&&this.g2d.drawLine(a,this.xPixel1,d,this.xPixel0,d))}},"~O,~N,~A,~B,~N,~B,JSV.common.IntegralData");c(c$,"drawFrame",function(a,b,d,c,f){if(!this.pd.gridOn||
this.pd.isPrinting)if(this.setColorFromToken(a,JSV.common.ScriptToken.GRIDCOLOR),this.g2d.drawRect(a,this.xPixel0,this.yPixel0,this.xPixels,this.yPixels),this.pd.isPrinting)return;this.setCurrentBoxColor(a);f&&(0<=b&&(this.setPlotColor(a,b),this.fillArrow(a,JSV.common.GraphSet.ArrowType.UP,this.xVArrows,n((this.yPixel00+this.yPixel11)/2)-9,!0),this.fillArrow(a,JSV.common.GraphSet.ArrowType.DOWN,this.xVArrows,n((this.yPixel00+this.yPixel11)/2)+9,!0),this.setCurrentBoxColor(a)),this.fillArrow(a,JSV.common.GraphSet.ArrowType.UP,
this.xVArrows,n((this.yPixel00+this.yPixel11)/2)-9,!1),this.fillCircle(a,this.xVArrows,n((this.yPixel00+this.yPixel11)/2),!1),this.fillArrow(a,JSV.common.GraphSet.ArrowType.DOWN,this.xVArrows,n((this.yPixel00+this.yPixel11)/2)+9,!1));if(null==this.imageView&&d){b=this.xPixel00+10;d=this.xPixel11-10;f=this.yPixel00+1;var e=this.yPixel11-2;this.g2d.drawLine(a,b,f,d,f);this.g2d.drawLine(a,d,f,d,e);this.g2d.drawLine(a,b,e,d,e);c&&this.fillBox(a,this.xPixel11-20,this.yPixel00+1,this.xPixel11-10,this.yPixel00+
11,null)}},"~O,~N,~B,~B,~B");c(c$,"drawGrid",function(a){if(this.pd.gridOn&&null==this.imageView){this.setColorFromToken(a,JSV.common.ScriptToken.GRIDCOLOR);var b;if(Double.isNaN(this.getScale().firstX)){b=this.getScale().maxXOnScale+this.getScale().steps[0]/2;for(var d=this.getScale().minXOnScale;d<b;d+=this.getScale().steps[0]){var c=this.toPixelX(d);this.g2d.drawLine(a,c,this.yPixel0,c,this.yPixel1)}}else{b=1.0001*this.getScale().maxXOnScale;for(d=this.getScale().firstX;d<=b;d+=this.getScale().steps[0])c=
this.toPixelX(d),this.g2d.drawLine(a,c,this.yPixel0,c,this.yPixel1)}for(d=this.getScale().firstY;d<this.getScale().maxYOnScale+this.getScale().steps[1]/2;d+=this.getScale().steps[1])b=this.toPixelY(d),b==this.fixY(b)&&this.g2d.drawLine(a,this.xPixel0,b,this.xPixel1,b)}},"~O");c(c$,"drawXScale",function(a,b){this.setColorFromToken(a,JSV.common.ScriptToken.SCALECOLOR);this.pd.isPrinting&&this.g2d.drawLine(a,b.getXPixel0(),this.yPixel1,b.getXPixel0()+b.getXPixels()-1,this.yPixel1);for(var d=this.getScale().precision[0],
c=this.pd.setFont(a,b.getXPixels(),0,this.pd.isPrinting?10:12,!1),f=this.yPixel1,e=this.yPixel1+4*this.pd.scalingFactor,j=this.yPixel1+2*this.pd.scalingFactor,c=c.getHeight(),p=b.toPixelX(this.getScale().steps[0])-b.toPixelX(0),l=Math.abs(0.95*p),k=this.getScale().firstX-this.getScale().steps[0],m=1.0001*(this.getScale().maxXOnScale+this.getScale().steps[0]),r=0;2>r;r++){1==r&&JSV.common.ScaleData.fixScale(this.mapX);for(var t=1E10,q=k;q<=m;q+=this.getScale().steps[0]){var p=b.toPixelX(q),s=Double.$valueOf(q),
u;switch(r){case 0:u=JU.DF.formatDecimalDbl(q,d);this.mapX.put(s,u);this.drawTick(a,p,f,e,b);p=Math.abs(t-q);t=this.getScale().minorTickCounts[0];if(0!=t){p/=t;for(u=1;u<t;u++)this.drawTick(a,b.toPixelX(q-u*p),f,j,b)}t=q;continue;case 1:u=this.mapX.get(s);if(null==u||p!=b.fixX(p))continue;var s=this.pd.getStringWidth(u),v=p+n(s/2)==b.fixX(p+n(s/2))?2:0;0<v&&this.g2d.drawString(a,u,p-n(s/v),e+c);q+=Math.floor(s/l)*this.getScale().steps[0]}}}this.mapX.clear()},"~O,JSV.api.XYScaleConverter");c(c$,"drawTick",
function(a,b,d,c,f){b==f.fixX(b)&&this.g2d.drawLine(a,b,d,b,c)},"~O,~N,~N,~N,JSV.api.XYScaleConverter");c(c$,"drawYScale",function(a,b){var d=b.getScale(),c=d.precision[1],f=this.pd.setFont(a,b.getXPixels(),0,this.pd.isPrinting?10:12,!1).getHeight(),e=d.maxYOnScale+d.steps[1]/2,j=-2147483648;this.setColorFromToken(a,JSV.common.ScriptToken.SCALECOLOR);for(var p=0;2>p;p++){1==p&&JSV.common.ScaleData.fixScale(this.mapX);for(var l=d.firstY;l<e;l+=d.steps[1]){var k=Double.$valueOf(l),m=b.getXPixel0(),
q=b.toPixelY(l);if(q==b.fixY(q)){var t;0==p&&this.g2d.drawLine(a,m,q,m-3*this.pd.scalingFactor,q);if(!(Math.abs(q-j)<=f))switch(j=q,p){case 0:t=JU.DF.formatDecimalDbl(l,c);this.mapX.put(k,t);break;case 1:t=this.mapX.get(k);if(null==t)continue;t.startsWith("0")&&t.contains("E")&&(t="0");this.g2d.drawString(a,t,m-4*this.pd.scalingFactor-this.pd.getStringWidth(t),q+n(f/3))}}}}this.mapX.clear()},"~O,JSV.api.XYScaleConverter");c(c$,"drawXUnits",function(a){var b=this.spectra.get(0).getAxisLabel(!0);null!=
b&&this.drawUnits(a,b,this.xPixel1+25*this.pd.scalingFactor,this.yPixel1+5*this.pd.scalingFactor,1,1)},"~O");c(c$,"drawUnits",function(a,b,d,c,f,e){this.setColorFromToken(a,JSV.common.ScriptToken.UNITSCOLOR);this.pd.setFont(a,(null==this.imageView?this:this.imageView).getXPixels(),2,10,!1);this.g2d.drawString(a,b,n(d-this.pd.getStringWidth(b)*f),n(c+this.pd.getFontHeight()*e))},"~O,~S,~N,~N,~N,~N");c(c$,"drawYUnits",function(a){var b=this.spectra.get(0).getAxisLabel(!1);null!=b&&this.drawUnits(a,
b,(this.pd.isPrinting?30:5)*this.pd.scalingFactor,this.yPixel0+(this.pd.isPrinting?0:5)*this.pd.scalingFactor,0,-1)},"~O");c(c$,"drawHighlightsAndPeakTabs",function(a,b){var d=this.getMeasurements(JSV.common.Annotation.AType.PeakList,b),c=this.spectra.get(b);if(this.pd.isPrinting)null!=d&&(this.setColorFromToken(a,JSV.common.ScriptToken.PEAKTABCOLOR),this.printPeakList(a,c,d));else{if(null==d){for(var f=0;f<this.highlights.size();f++){var e=this.highlights.get(f);e.spectrum===c&&(this.pd.setHighlightColor(e.color),
this.drawBar(a,null,e.x1,e.x2,JSV.common.ScriptToken.HIGHLIGHTCOLOR,!0))}this.drawPeakTabs(a,c)}if(null!=d){c=c.isInverted()?this.yPixel1-10*this.pd.scalingFactor:this.yPixel0;this.setColorFromToken(a,JSV.common.ScriptToken.PEAKTABCOLOR);for(f=d.size();0<=--f;)e=d.get(f),e=this.toPixelX(e.getXVal()),this.g2d.drawLine(a,e,c,e,c+10*this.pd.scalingFactor);this.isVisible(this.getDialog(JSV.common.Annotation.AType.PeakList,b))&&(c=this.toPixelY(d.getThresh()),c==this.fixY(c)&&!this.pd.isPrinting&&this.g2d.drawLine(a,
this.xPixel0,c,this.xPixel1,c))}}},"~O,~N");c(c$,"printPeakList",function(a,b,d){var c=d.getMeasurementListArray(null);if(0!=c.length){this.pd.setFont(a,this.xPixels,0,8,!1);for(var f=this.pd.getFontHeight(),e=H(d.size(),0),j=H(d.size(),0),p=0,l=5*this.pd.scalingFactor,k=10*this.pd.scalingFactor,m=15*this.pd.scalingFactor,q=25*this.pd.scalingFactor,t=0;t<c.length;t++)j[t]=this.toPixelX(Double.parseDouble(c[t][1])),0==t?e[t]=j[t]:(e[t]=Math.max(e[t-1]+f,j[t]+f),p+=e[t]-j[t]);p/=2*c.length;e[0]-p<this.xPixel0+
q&&(p=e[0]-(this.xPixel0+q));for(t=0;t<c.length;t++)e[t]-=p;t=b.isInverted();b=this.pd.getStringWidth("99.9999");for(var p=6<=c[0].length?this.pd.getStringWidth("99.99"):0,q=t?-1:1,r=(t?this.yPixel1:this.yPixel0)+q*(p+b+m),t=0;t<c.length;t++)this.g2d.drawLine(a,e[t],r,e[t],r+l*q),this.g2d.drawLine(a,e[t],r+l*q,j[t],r+k*q),this.g2d.drawLine(a,j[t],r+k*q,j[t],r+m*q),0<p&&0<c[t][4].length&&this.g2d.drawLine(a,n((e[t]+e[t-1])/2),r-b+l,n((e[t]+e[t-1])/2),r-b-l);r-=2*q*this.pd.scalingFactor;0<p&&(this.drawStringRotated(a,
-90,e[0]-m,r,"  ppm"),this.drawStringRotated(a,-90,e[0]-m,r-b-l," Hz"));for(t=d.size();0<=--t;)this.drawStringRotated(a,-90*q,e[t]+n(q*f/3),r,c[t][1]),0<p&&0<c[t][4].length&&(d=n((e[t]+e[t-1])/2)+n(f/3),this.drawStringRotated(a,-90,d,r-b-l,c[t][4]))}},"~O,JSV.common.JDXSpectrum,JSV.common.PeakData");c(c$,"drawStringRotated",function(a,b,d,c,f){this.g2d.drawStringRotated(a,f,d,c,b)},"~O,~N,~N,~N,~S");c(c$,"drawAnnotations",function(a,b,d){this.pd.setFont(a,this.xPixels,1,12,!1);for(var c=b.size();0<=
--c;){var f=b.get(c);this.setAnnotationColor(a,f,d);var e=(f.is2D?this.imageView:this).toPixelX(f.getXVal()),j=f.isPixels()?n(this.yPixel0+10*this.pd.scalingFactor-f.getYVal()):f.is2D?this.imageView.subIndexToPixelY(n(f.getYVal())):this.toPixelY(f.getYVal());this.g2d.drawString(a,f.text,e+f.offsetX*this.pd.scalingFactor,j-f.offsetY*this.pd.scalingFactor)}},"~O,JU.List,JSV.common.ScriptToken");c(c$,"drawIntegralValues",function(a,b,d){var c=this.getMeasurements(JSV.common.Annotation.AType.Integration,
b);if(null!=c){this.pd.isPrinting?this.pd.setFont(a,this.xPixels,0,8,!1):this.pd.setFont(a,this.xPixels,1,12,!1);this.setColorFromToken(a,JSV.common.ScriptToken.INTEGRALPLOTCOLOR);var f=this.pd.getFontHeight();this.g2d.setStrokeBold(a,!0);for(var e=c.size();0<=--e;){var j=c.get(e);if(0!=j.getValue()){var p=this.toPixelX(j.getXVal2()),l=d*this.pd.scalingFactor+this.toPixelYint(j.getYVal()),k=d*this.pd.scalingFactor+this.toPixelYint(j.getYVal2());p!=this.fixX(p)||(l!=this.fixY(l)||k!=this.fixY(k))||
(this.pd.isPrinting||this.g2d.drawLine(a,p,l,p,k),this.g2d.drawString(a,"  "+j.text,p,n((l+k)/2)+n(f/3)))}}this.g2d.setStrokeBold(a,!1)}b==this.getFixedSelectedSpectrumIndex()&&(this.selectedSpectrumIntegrals=c)},"~O,~N,~N");c(c$,"drawMeasurements",function(a,b){var d=this.getMeasurements(JSV.common.Annotation.AType.Measurements,b);if(null!=d)for(var c=d.size();0<=--c;)this.drawMeasurement(a,d.get(c));b==this.getFixedSelectedSpectrumIndex()&&(this.selectedSpectrumMeasurements=d)},"~O,~N");c(c$,"drawMeasurement",
function(a,b){if(!(0==b.text.length&&b!==this.pendingMeasurement)){this.pd.setFont(a,this.xPixels,1,12,!1);this.g2d.setGraphicsColor(a,b===this.pendingMeasurement?this.pd.getColor(JSV.common.ScriptToken.HIGHLIGHTCOLOR):this.pd.BLACK);var d=this.toPixelX(b.getXVal()),c=this.toPixelY(b.getYVal()),f=this.toPixelX(b.getXVal2());if(!Double.isNaN(b.getXVal())&&!(d!=this.fixX(d)||f!=this.fixX(f))){var e=2<=Math.abs(d-f),j=this.getScale().isYZeroOnScale()&&b.spec.isHNMR(),p=n((d+f)/2);this.g2d.setStrokeBold(a,
!0);e&&this.g2d.drawLine(a,d,c,f,c);j&&this.g2d.drawLine(a,d+1,this.yPixel1-1,f,this.yPixel1-1);this.g2d.setStrokeBold(a,!1);e&&this.g2d.drawString(a,b.text,p+b.offsetX,c-b.offsetY);j&&(this.g2d.drawLine(a,d,this.yPixel1,d,this.yPixel1-6*this.pd.scalingFactor),this.g2d.drawLine(a,f,this.yPixel1,f,this.yPixel1-6*this.pd.scalingFactor))}}},"~O,JSV.common.Measurement");c(c$,"getPinSelected",function(a,b){if(null!=this.widgets)for(var d=0;d<this.widgets.length;d++)if(null!=this.widgets[d]&&this.widgets[d].isPinOrCursor&&
this.widgets[d].selected(a,b))return this.widgets[d];return null},"~N,~N");c(c$,"set2DCrossHairs",function(a,b){var d;if(a==this.imageView.fixX(a)&&b==this.fixY(b)&&(this.pin1Dx1.setX(d=this.imageView.toX(a),this.toPixelX(d)),this.cur2Dx1.setX(d,a),this.setCurrentSubSpectrum(this.imageView.toSubspectrumIndex(b)),this.isLinked)){var c=this.imageView.toY(b);this.pd.set2DCrossHairsLinked(this,d,c,!this.sticky2Dcursor)}},"~N,~N");c(c$,"reset2D",function(a){a?(this.imageView.setView0(this.imageView.xPixel0,
this.pin2Dy0.yPixel0,this.imageView.xPixel1,this.pin2Dy1.yPixel0),this.doZoom(0,this.getScale().minY,0,this.getScale().maxY,!0,!1,!1,!1,!0)):this.imageView.setView0(this.pin2Dx0.xPixel0,this.imageView.yPixel0,this.pin2Dx1.xPixel0,this.imageView.yPixel1)},"~B");c(c$,"setAnnotationText",function(a){var b=this.pd.getInput("New text?","Set Label",a.text);if(null==b)return!1;0==b.length?this.annotations.removeObj(a):a.text=b;return!0},"JSV.common.Annotation");c(c$,"checkIntegral",function(a,b,d){var c=
this.getDialog(JSV.common.Annotation.AType.Integration,-1);null!=c&&(a=c.getData().addIntegralRegion(a,b),d&&y(c,JSV.dialog.JSVDialog)&&c.update(null,0,0),this.selectedSpectrumIntegrals=null,this.pendingIntegral=d?null:a)},"~N,~N,~B");c(c$,"setToolTipForPixels",function(a,b){var d=this.getPinSelected(a,b),c=this.getScale().precision[0],f=this.getScale().precision[1];if(null!=d)this.setStartupPinTip()||(d===this.pin1Dx01||d===this.pin2Dx01?c=JU.DF.formatDecimalDbl(Math.min(this.pin1Dx0.getXVal(),this.pin1Dx1.getXVal()),
c)+" - "+JU.DF.formatDecimalDbl(Math.max(this.pin1Dx0.getXVal(),this.pin1Dx1.getXVal()),c):d===this.pin1Dy01?c=JU.DF.formatDecimalDbl(Math.min(this.pin1Dy0.getYVal(),this.pin1Dy1.getYVal()),f)+" - "+JU.DF.formatDecimalDbl(Math.max(this.pin1Dy0.getYVal(),this.pin1Dy1.getYVal()),f):d===this.cur2Dy?(d=this.imageView.toSubspectrumIndex(d.yPixel0),c=this.get2DYLabel(d,c)):c=d===this.pin2Dy01?""+n(Math.min(this.pin2Dy0.getYVal(),this.pin2Dy1.getYVal()))+" - "+n(Math.max(this.pin2Dy0.getYVal(),this.pin2Dy1.getYVal())):
d.isXtype?JU.DF.formatDecimalDbl(d.getXVal(),c):d.is2D?""+n(d.getYVal()):JU.DF.formatDecimalDbl(d.getYVal(),f),this.pd.setToolTipText(c));else{if(null!=this.imageView){if(this.imageView.fixX(a)==a&&this.fixY(b)==b){d=this.imageView.toSubspectrumIndex(b);c=JU.DF.formatDecimalDbl(this.imageView.toX(a),c)+" "+this.getSpectrum().getAxisLabel(!0)+",  "+this.get2DYLabel(d,c);this.pd.setToolTipText(this.pd.display1D?c:"");this.pd.coordStr=c;return}if(!this.pd.display1D){this.pd.setToolTipText("");this.pd.coordStr=
"";return}}var d=this.toX(this.fixX(a)),c=null!=this.imageView&&this.imageView.isXWithinRange(a)?this.imageView.toSubspectrumIndex(this.fixY(b)):this.toY(this.fixY(b)),f=this.setCoordStr(d,c),e=this.getFixedSelectedSpectrumIndex();this.isInPlotRegion(a,b)?1!=this.nSpectra&&this.haveIntegralDisplayed(e)&&(c=this.getIntegrationGraph(e).getPercentYValueAt(d),f+=", "+JU.DF.formatDecimalDbl(c,1)):c=NaN;this.pd.setToolTipText(null!=this.pendingMeasurement||null!=this.selectedMeasurement||null!=this.selectedIntegral?
this.pd.hasFocus()?"Press ESC to delete "+(null!=this.selectedIntegral?"integral, DEL to delete all visible, or N to normalize":null==this.pendingMeasurement?'"'+this.selectedMeasurement.text+'" or DEL to delete all visible':"measurement"):"":Double.isNaN(c)?null:f)}},"~N,~N");c(c$,"setCoordStr",function(a,b){var d=JU.DF.formatDecimalDbl(a,this.getScale().precision[0]);this.pd.coordStr="("+d+(this.haveSingleYScale||0<=this.iSpectrumSelected?", "+JU.DF.formatDecimalDbl(b,this.getScale().precision[1]):
"")+")";return d},"~N,~N");c(c$,"setStartupPinTip",function(){if(null==this.pd.startupPinTip)return!1;this.pd.setToolTipText(this.pd.startupPinTip);this.pd.startupPinTip=null;return!0});c(c$,"get2DYLabel",function(a,b){var d=this.getSpectrumAt(0).getSubSpectra().get(a);return JU.DF.formatDecimalDbl(d.getY2D(),b)+(d.y2DUnits.equals("HZ")?" HZ ("+JU.DF.formatDecimalDbl(d.getY2DPPM(),b)+" PPM)":"")},"~N,~N");c(c$,"isOnSpectrum",function(a,b,d){var c=null,f=!0,e=0>d;if(e){c=this.getDialog(JSV.common.Annotation.AType.Integration,
-1);if(null==c)return!1;c=c.getData().getXYCoords();d=this.getFixedSelectedSpectrumIndex()}else{this.setScale(d);var j=this.spectra.get(d),c=j.xyCoords,f=j.isContinuous()}var j=d*S(this.yPixels*(this.yStackOffsetPercent/100)),p=this.viewData.getStartingPointIndex(d);d=this.viewData.getEndingPointIndex(d);if(f)for(f=p;f<d;f++){var l=c[f],k=c[f+1],p=this.toPixelX(l.getXVal()),m=this.toPixelX(k.getXVal()),l=e?this.toPixelYint(l.getYVal()):this.toPixelY(l.getYVal()),k=e?this.toPixelYint(k.getYVal()):
this.toPixelY(k.getYVal());if(!(-2147483648==l||-2147483648==k))if(l=j+this.fixY(l),k=j+this.fixY(k),JSV.common.GraphSet.isOnLine(a,b,p,l,m,k))return!0}else for(f=p;f<=d;f++)if(e=c[f],k=this.toPixelY(e.getYVal()),-2147483648!=k&&(p=this.toPixelX(e.getXVal()),l=this.toPixelY(Math.max(this.getScale().minYOnScale,0)),l=this.fixY(l),k=this.fixY(k),!(l==k&&(l==this.yPixel0||l==this.yPixel1))&&JSV.common.GraphSet.isOnLine(a,b,p,l,p,k)))return!0;return!1},"~N,~N,~N");c$.distance=c(c$,"distance",function(a,
b){return Math.sqrt(a*a+b*b)},"~N,~N");c$.findCompatibleGraphSet=c(c$,"findCompatibleGraphSet",function(a,b){for(var d=0;d<a.size();d++)if(JSV.common.JDXSpectrum.areXScalesCompatible(b,a.get(d).getSpectrum(),!1,!1))return a.get(d);return null},"JU.List,JSV.common.JDXSpectrum");c$.isGoodEvent=c(c$,"isGoodEvent",function(a,b,d){return null==b?5<Math.abs(a.xPixel1-a.xPixel0)&&5<Math.abs(a.yPixel1-a.yPixel0):d?5<Math.abs(a.xPixel0-b.xPixel0):5<Math.abs(a.yPixel0-b.yPixel0)},"JSV.common.PlotWidget,JSV.common.PlotWidget,~B");
c$.isOnLine=c(c$,"isOnLine",function(a,b,d,c,f,e){var j=Math.abs(d-a);if(2>j&&2>Math.abs(c-b))return!0;var p=f-a;if(2>Math.abs(p)&&2>Math.abs(e-b))return!0;var l=c-e;if(2<Math.abs(l)&&c<b==e<b)return!1;var k=d-f;return 2<Math.abs(k)&&d<a==f<a?!1:JSV.common.GraphSet.distance(j,c-b)+JSV.common.GraphSet.distance(p,b-e)<JSV.common.GraphSet.distance(k,l)+2},"~N,~N,~N,~N,~N,~N");c$.setFractionalPositions=c(c$,"setFractionalPositions",function(a,b,d){var c=b.size(),f=0,e=0;a.isLinked=d!==JSV.common.PanelData.LinkMode.NONE;
if(d===JSV.common.PanelData.LinkMode.NONE){for(var j=0;j<c;j++)d=b.get(j),f+=(d.getSpectrumAt(0).is1D(),1)*d.nSplit;f=1/f;for(j=0;j<c;j++)d=b.get(j),d.isLinked=!1,a=d.getSpectrumAt(0).is1D()?f:1*f,d.fX0=0,d.fY0=e,d.fracX=1,d.fracY=a,e+=a*d.nSplit}else{var f=null,p=-1;if(2==c||3==c)for(j=0;j<c;j++)if(d=b.get(j),!d.getSpectrum().is1D()){f=d;0<=p&&(j=-2);p=j;break}if(-2==p||-1==p&&2!=c)JSV.common.GraphSet.setFractionalPositions(a,b,JSV.common.PanelData.LinkMode.NONE);else for(j=0;j<c;j++)d=b.get(j),
d.isLinked=!0,a=d.getSpectrumAt(0),a.is1D()?(null!=f&&(p=f.getSpectrumAt(0),JSV.common.JDXSpectrum.areLinkableX(a,p)&&(d.gs2dLinkedX=f),JSV.common.JDXSpectrum.areLinkableY(a,p)&&(d.gs2dLinkedY=f)),d.fX0=0,d.fY0=e,d.fracX=null==f?1:0.5,d.fracY=3==c||null==f?0.5:1,e+=0.5):(d.fX0=0.5,d.fY0=0,d.fracX=0.5,d.fracY=1)}},"JSV.common.PanelData,JU.List,JSV.common.PanelData.LinkMode");c(c$,"addAnnotation",function(a,b){if(0==a.size()||1==a.size()&&a.get(0).equalsIgnoreCase("none"))return this.lastAnnotation=
this.annotations=null;4>a.size()&&null==this.lastAnnotation&&(this.lastAnnotation=this.getAnnotation((this.getScale().maxXOnScale+this.getScale().minXOnScale)/2,(this.getScale().maxYOnScale+this.getScale().minYOnScale)/2,b,!1,!1,0,0));var d=this.getAnnotation(a,this.lastAnnotation);if(null==d)return null;if(null==this.annotations&&1==a.size()&&'"'==a.get(0).charAt(0))return d=d.text,this.getSpectrum().setTitle(d),d;this.lastAnnotation=d;this.addAnnotation(d,!1);return null},"JU.List,~S");c(c$,"addHighlight",
function(a,b,d,c){null==d&&(d=this.getSpectrumAt(0));a=ma(JSV.common.GraphSet.Highlight,this,null,a,b,d,null==c?this.pd.getColor(JSV.common.ScriptToken.HIGHLIGHTCOLOR):c);this.highlights.contains(a)||this.highlights.addLast(a)},"~N,~N,JSV.common.JDXSpectrum,javajs.api.GenericColor");c(c$,"addPeakHighlight",function(a){for(var b=this.spectra.size();0<=--b;){var d=this.spectra.get(b);this.removeAllHighlights(d);if(!(null==a||a.isClearAll()||d!==a.spectrum)){var c=a.toString();if(null!=c){var f=JU.PT.getQuotedAttribute(c,
"xMin"),c=JU.PT.getQuotedAttribute(c,"xMax");if(null==f||null==c)break;f=JU.PT.parseFloat(f);c=JU.PT.parseFloat(c);if(Float.isNaN(f)||Float.isNaN(c))break;this.pd.addHighlight(this,f,c,d,200,200,200,200);d.setSelectedPeak(a);!this.getScale().isInRangeX(f)&&!(this.getScale().isInRangeX(c)||f<this.getScale().minX&&this.getScale().maxX<c)&&this.setZoomTo(0)}}}},"JSV.common.PeakInfo");c(c$,"advanceSubSpectrum",function(a){var b=this.getSpectrumAt(0);a=b.advanceSubSpectrum(a);b.isForcedSubset()&&this.viewData.setXRangeForSubSpectrum(this.getSpectrum().getXYCoords());
this.pd.notifySubSpectrumChange(a,this.getSpectrum())},"~N");c(c$,"checkSpectrumClickedEvent",function(a,b,d){if(this.nextClickForSetPeak)return!1;if(0<d&&this.checkArrowLeftRightClick(a,b))return!0;if(1<d||(null!=this.pendingMeasurement||!this.isInPlotRegion(a,b))||0==d&&(d=this.isOnSpectrum(a,b,-1),this.pd.integralShiftMode=d?this.getShiftMode(a,b):0,this.pd.isIntegralDrag=0==this.pd.integralShiftMode&&(d||this.haveIntegralDisplayed(-1)&&null!=this.findMeasurement(this.getIntegrationGraph(-1),a,
b,0)),System.out.println("pd.isIntegralDrag set in checkSPelick "+this.pd.isIntegralDrag),0!=this.pd.integralShiftMode)||!this.showAllStacked)return!1;this.stackSelected=!1;for(d=0;d<this.nSpectra;d++)if(this.isOnSpectrum(a,b,d))return a=d!=this.iSpectrumSelected,this.setSpectrumClicked(this.iPreviousSpectrumClicked=d),a;if(this.isDialogOpen())return!1;this.setSpectrumClicked(-1);return this.stackSelected=!1},"~N,~N,~N");c(c$,"getShiftMode",function(a,b){return this.isStartEndIntegral(a,!1)?b:this.isStartEndIntegral(a,
!0)?-b:0},"~N,~N");c(c$,"isDialogOpen",function(){return this.isVisible(this.getDialog(JSV.common.Annotation.AType.Integration,-1))||this.isVisible(this.getDialog(JSV.common.Annotation.AType.Measurements,-1))||this.isVisible(this.getDialog(JSV.common.Annotation.AType.PeakList,-1))});c(c$,"isStartEndIntegral",function(a,b){return b?20>this.xPixelPlot1-a:20>a-this.xPixelPlot0},"~N,~B");c(c$,"checkWidgetEvent",function(a,b,d){if(this.zoomEnabled&&this.triggered)if(this.triggered=!1,d)2==this.pd.clickCount&&
null==this.pendingMeasurement?(-1==this.iSpectrumClicked&&0<=this.iPreviousSpectrumClicked&&this.setSpectrumClicked(this.iPreviousSpectrumClicked),this.processPendingMeasurement(a,b,2)):null==this.pendingMeasurement&&(d=this.getPinSelected(a,b),null==d&&(b=this.fixY(b),a<this.xPixel1?(this.pd.shiftPressed&&this.setSpectrumClicked(this.iPreviousSpectrumClicked),a=this.fixX(a),this.zoomBox1D.setX(this.toX(a),a),this.zoomBox1D.yPixel0=b,d=this.zoomBox1D):null!=this.imageView&&a<this.imageView.xPixel1&&
(this.zoomBox2D.setX(this.imageView.toX(a),this.imageView.fixX(a)),this.zoomBox2D.yPixel0=b,d=this.zoomBox2D)),this.pd.thisWidget=d);else if(this.nextClickForSetPeak=!1,d=this.pd.thisWidget,null!=d)if(d===this.zoomBox1D)this.zoomBox1D.xPixel1=this.fixX(a),this.zoomBox1D.yPixel1=this.fixY(b),this.pd.isIntegralDrag&&this.zoomBox1D.xPixel0!=this.zoomBox1D.xPixel1&&this.checkIntegral(this.zoomBox1D.getXVal(),this.toX(this.zoomBox1D.xPixel1),!1);else if(d===this.zoomBox2D)this.zoomBox2D.xPixel1=this.imageView.fixX(a),
this.zoomBox2D.yPixel1=this.fixY(b);else if(d===this.cur2Dy)b=this.fixY(b),this.cur2Dy.yPixel0=this.cur2Dy.yPixel1=b,this.setCurrentSubSpectrum(this.imageView.toSubspectrumIndex(b));else if(!(d===this.cur2Dx0||d===this.cur2Dx1))if(d===this.pin1Dx0||d===this.pin1Dx1||d===this.pin1Dx01){a=this.fixX(a);d.setX(this.toX0(a),a);if(d===this.pin1Dx01){d=a-n((this.pin1Dx0.xPixel0+this.pin1Dx1.xPixel0)/2);a=this.pin1Dx0.xPixel0+d;b=this.pin1Dx1.xPixel0+d;if(0==d||this.fixX(a)!=a||this.fixX(b)!=b)return;this.pin1Dx0.setX(this.toX0(a),
a);this.pin1Dx1.setX(this.toX0(b),b)}this.doZoom(this.pin1Dx0.getXVal(),0,this.pin1Dx1.getXVal(),0,!0,!1,!1,!0,!1)}else if(d===this.pin1Dy0||d===this.pin1Dy1||d===this.pin1Dy01){b=this.fixY(b);d.setY(this.toY0(b),b);if(d===this.pin1Dy01){d=b-n((this.pin1Dy0.yPixel0+this.pin1Dy1.yPixel0)/2)+1;b=this.pin1Dy0.yPixel0+d;a=this.pin1Dy1.yPixel0+d;d=this.toY0(b);var c=this.toY0(a);if(Math.min(d,c)==this.getScale().minY||Math.max(d,c)==this.getScale().maxY)return;this.pin1Dy0.setY(d,b);this.pin1Dy1.setY(c,
a)}this.doZoom(0,this.pin1Dy0.getYVal(),0,this.pin1Dy1.getYVal(),null==this.imageView,null==this.imageView,!1,!1,!1)}else if(d===this.pin2Dx0||d===this.pin2Dx1||d===this.pin2Dx01){a=this.imageView.fixX(a);d.setX(this.imageView.toX0(a),a);if(d===this.pin2Dx01){d=a-n((this.pin2Dx0.xPixel0+this.pin2Dx1.xPixel0)/2)+1;a=this.pin2Dx0.xPixel0+d;b=this.pin2Dx1.xPixel0+d;if(this.imageView.fixX(a)!=a||this.imageView.fixX(b)!=b)return;this.pin2Dx0.setX(this.imageView.toX0(a),a);this.pin2Dx1.setX(this.imageView.toX0(b),
b)}JSV.common.GraphSet.isGoodEvent(this.pin2Dx0,this.pin2Dx1,!0)?(this.imageView.setView0(this.pin2Dx0.xPixel0,this.pin2Dy0.yPixel0,this.pin2Dx1.xPixel0,this.pin2Dy1.yPixel0),this.doZoom(this.pin2Dx0.getXVal(),this.getScale().minY,this.pin2Dx1.getXVal(),this.getScale().maxY,!1,!1,!1,!0,!1)):this.reset2D(!0)}else if(d===this.pin2Dy0||d===this.pin2Dy1||d===this.pin2Dy01){b=this.fixY(b);d.setY(this.imageView.toSubspectrumIndex(b),b);if(d===this.pin2Dy01){d=b-n((this.pin2Dy0.yPixel0+this.pin2Dy1.yPixel0)/
2)+1;b=this.pin2Dy0.yPixel0+d;a=this.pin2Dy1.yPixel0+d;if(b!=this.fixY(b)||a!=this.fixY(a))return;this.pin2Dy0.setY(this.imageView.toSubspectrumIndex(b),b);this.pin2Dy1.setY(this.imageView.toSubspectrumIndex(a),a)}JSV.common.GraphSet.isGoodEvent(this.pin2Dy0,this.pin2Dy1,!1)?this.imageView.setView0(this.pin2Dx0.xPixel0,this.pin2Dy0.yPixel0,this.pin2Dx1.xPixel1,this.pin2Dy1.yPixel1):this.reset2D(!1)}},"~N,~N,~B");c(c$,"clearIntegrals",function(){this.checkIntegral(NaN,0,!1)});c(c$,"clearMeasurements",
function(){this.removeDialog(this.getFixedSelectedSpectrumIndex(),JSV.common.Annotation.AType.Measurements)});c$.createGraphSetsAndSetLinkMode=c(c$,"createGraphSetsAndSetLinkMode",function(a,b,d,c,f,e){for(var j=new JU.List,p=0;p<d.size();p++){var l=d.get(p),k=e===JSV.common.PanelData.LinkMode.NONE?JSV.common.GraphSet.findCompatibleGraphSet(j,l):null;null==k&&j.addLast(k=new JSV.common.GraphSet(b.getPanelData()));k.addSpec(l)}JSV.common.GraphSet.setFractionalPositions(a,j,e);for(p=j.size();0<=--p;)j.get(p).initGraphSet(c,
f),J.util.Logger.info("JSVGraphSet "+(p+1)+" nSpectra = "+j.get(p).nSpectra);return j},"JSV.common.PanelData,JSV.api.JSVPanel,JU.List,~N,~N,JSV.common.PanelData.LinkMode");c(c$,"drawGraphSet",function(a,b,d,c,f,e,j,p,l,k){this.zoomEnabled=this.pd.getBoolean(JSV.common.ScriptToken.ENABLEZOOM);this.height=c*this.pd.scalingFactor;this.width=d*this.pd.scalingFactor;this.left=f*this.pd.scalingFactor;this.right=e*this.pd.scalingFactor;this.top=j*this.pd.scalingFactor;this.bottom=p*this.pd.scalingFactor;
this.$haveSelectedSpectrum=!1;this.selectedSpectrumMeasurements=this.selectedSpectrumIntegrals=null;if(!this.pd.isPrinting&&null!=this.widgets)for(d=0;d<this.widgets.length;d++)null!=this.widgets[d]&&(this.widgets[d].isVisible=!1);for(d=0;d<this.nSplit;d++)this.setPositionForFrame(d),this.drawAll(a,b,d,l||1<this.nSplit,k);this.setPositionForFrame(1<this.nSplit?this.pd.currentSplitPoint:0)},"~O,~O,~N,~N,~N,~N,~N,~N,~B,~B");c(c$,"escapeKeyPressed",function(a){null!=this.zoomBox1D&&(this.zoomBox1D.xPixel0=
this.zoomBox1D.xPixel1=0);null!=this.zoomBox2D&&(this.zoomBox2D.xPixel0=this.zoomBox2D.xPixel1=0);this.inPlotMove&&(null!=this.pendingMeasurement?this.pendingMeasurement=null:(this.pendingMeasurement=this.pd.thisWidget=null,null!=this.selectedSpectrumMeasurements&&null!=this.selectedMeasurement&&(a?this.selectedSpectrumMeasurements.clear(this.getScale().minXOnScale,this.getScale().maxXOnScale):this.selectedSpectrumMeasurements.removeObj(this.selectedMeasurement),this.selectedMeasurement=null,this.updateDialog(JSV.common.Annotation.AType.Measurements,
-1)),null!=this.selectedSpectrumIntegrals&&null!=this.selectedIntegral&&(a?this.selectedSpectrumIntegrals.clear(this.getScale().minXOnScale,this.getScale().maxXOnScale):this.selectedSpectrumIntegrals.removeObj(this.selectedIntegral),this.selectedIntegral=null,this.updateDialog(JSV.common.Annotation.AType.Integration,-1))))},"~B");c$.findGraphSet=c(c$,"findGraphSet",function(a,b,d){for(var c=a.size();0<=--c;)if(a.get(c).hasPoint(b,d))return a.get(c);return null},"JU.List,~N,~N");c(c$,"findMatchingPeakInfo",
function(a){for(var b=null,d=0;d<this.spectra.size()&&null==(b=this.spectra.get(d).findMatchingPeakInfo(a));d++);return b},"JSV.common.PeakInfo");c(c$,"getCurrentSpectrumIndex",function(){return 1==this.nSpectra?0:this.iSpectrumSelected});c(c$,"getSelectedIntegral",function(){return this.selectedIntegral});c(c$,"getShowAnnotation",function(a,b){var d=this.getDialog(a,b);return null!=d&&d.getState()},"JSV.common.Annotation.AType,~N");c(c$,"hasFileLoaded",function(a){for(var b=this.spectra.size();0<=
--b;)if(this.spectra.get(b).getFilePathForwardSlash().equals(a))return!0;return!1},"~S");c(c$,"haveSelectedSpectrum",function(){return this.$haveSelectedSpectrum});c(c$,"mouseClickedEvent",function(a,b,d,c){this.selectedIntegral=this.selectedMeasurement=null;var f=this.nextClickForSetPeak;this.nextClickForSetPeak=!1;if(!this.checkArrowUpDownClick(a,b))if(this.lastClickX=NaN,this.lastPixelX=2147483647,this.isSplitWidget(a,b))this.splitStack(this.pd.graphSets,1==this.nSplit);else{var e=this.getPinSelected(a,
b);if(null!=e)this.setWidgetValueByUser(e);else if(e=null!=this.imageView&&a==this.imageView.fixX(a)&&b==this.fixY(b),2==d&&(-1==this.iSpectrumClicked&&0<=this.iPreviousSpectrumClicked)&&this.setSpectrumClicked(this.iPreviousSpectrumClicked),!e&&c)this.setSpectrumClicked(this.iPreviousSpectrumClicked),null!=this.pendingMeasurement?this.processPendingMeasurement(a,b,-3):0<=this.iSpectrumClicked&&this.processPendingMeasurement(a,b,3);else if(this.lastXMax=NaN,2==d)e?(this.sticky2Dcursor&&this.addAnnotation(this.getAnnotation(this.imageView.toX(a),
this.imageView.toSubspectrumIndex(b),this.pd.coordStr,!1,!0,5,5),!0),this.sticky2Dcursor=!this.sticky2Dcursor,this.set2DCrossHairs(a,b)):this.isInTopBar(a,b)?this.doZoom(this.toX0(this.xPixel0),0,this.toX0(this.xPixel1),0,!0,!1,!1,!0,!0):this.isInRightBar(a,b)?this.doZoom(this.getScale().minXOnScale,this.viewList.get(0).getScale().minYOnScale,this.getScale().maxXOnScale,this.viewList.get(0).getScale().maxYOnScale,!0,!0,!1,!1,!1):this.isInTopBar2D(a,b)?this.reset2D(!0):this.isInRightBar2D(a,b)?this.reset2D(!1):
null!=this.pendingMeasurement?this.processPendingMeasurement(a,b,-2):0<=this.iSpectrumClicked&&this.processPendingMeasurement(a,b,2);else if(e){if(null!=this.annotations&&(d=(new JSV.common.Coordinate).set(this.imageView.toX(a),this.imageView.toSubspectrumIndex(b)),d=this.findAnnotation2D(d),null!=d&&this.setAnnotationText(d)))return;this.sticky2Dcursor=!1;this.set2DCrossHairs(a,b)}else{if(this.isInPlotRegion(a,b)){if(null!=this.selectedSpectrumIntegrals&&this.checkIntegralNormalizationClick(a,b))return;
if(null!=this.pendingMeasurement){this.processPendingMeasurement(a,b,1);return}this.setCoordClicked(a,this.toX(a),this.toY(b));this.updateDialog(JSV.common.Annotation.AType.PeakList,-1);if(f){this.shiftSpectrum(NaN,NaN);return}}else this.setCoordClicked(0,NaN,0);this.pd.notifyPeakPickedListeners(null)}}},"~N,~N,~N,~B");c(c$,"updateDialog",function(a,b){var d=this.getDialog(a,b);if(null!=d&&this.isVisible(d)){var c=this.toX(this.xPixel1)-this.toX(this.xPixel0),f=this.getSpectrum().isInverted()?this.yPixel1-
this.pd.mouseY:this.pd.mouseY-this.yPixel0;d.update(this.pd.coordClicked,c,f)}},"JSV.common.Annotation.AType,~N");c(c$,"isVisible",function(a){return y(a,JSV.dialog.JSVDialog)&&a.isVisible()},"JSV.api.AnnotationData");c(c$,"mouseReleasedEvent",function(a,b){if(null!=this.pendingMeasurement)2>Math.abs(this.toPixelX(this.pendingMeasurement.getXVal())-a)&&(this.pendingMeasurement=null),this.processPendingMeasurement(a,b,-2),this.setToolTipForPixels(a,b);else if(0!=this.pd.integralShiftMode)this.pd.integralShiftMode=
0,this.zoomBox1D.xPixel1=this.zoomBox1D.xPixel0;else{0<=this.iSpectrumMovedTo&&this.setScale(this.iSpectrumMovedTo);var d=this.pd.thisWidget;if(this.pd.isIntegralDrag)JSV.common.GraphSet.isGoodEvent(this.zoomBox1D,null,!0)&&this.checkIntegral(this.toX(this.zoomBox1D.xPixel0),this.toX(this.zoomBox1D.xPixel1),!0),this.zoomBox1D.xPixel1=this.zoomBox1D.xPixel0=0,this.pendingIntegral=null,this.pd.isIntegralDrag=!1;else if(d===this.zoomBox2D)JSV.common.GraphSet.isGoodEvent(this.zoomBox2D,null,!0)&&(this.imageView.setZoom(this.zoomBox2D.xPixel0,
this.zoomBox2D.yPixel0,this.zoomBox2D.xPixel1,this.zoomBox2D.yPixel1),this.zoomBox2D.xPixel1=this.zoomBox2D.xPixel0,this.doZoom(this.imageView.toX(this.imageView.xPixel0),this.getScale().minY,this.imageView.toX(this.imageView.xPixel0+this.imageView.xPixels-1),this.getScale().maxY,!1,!1,!1,!0,!0));else if(d===this.zoomBox1D){if(JSV.common.GraphSet.isGoodEvent(this.zoomBox1D,null,!0)){var d=this.zoomBox1D.xPixel1,c=this.pd.shiftPressed;this.doZoom(this.toX(this.zoomBox1D.xPixel0),c?this.toY(this.zoomBox1D.yPixel0):
0,this.toX(d),c?this.toY(this.zoomBox1D.yPixel1):0,!0,c,!0,!0,!0);this.zoomBox1D.xPixel1=this.zoomBox1D.xPixel0}}else(d===this.pin1Dx0||d===this.pin1Dx1||d===this.cur2Dx0||d===this.cur2Dx1)&&this.addCurrentZoom()}},"~N,~N");c(c$,"mouseMovedEvent",function(a,b){if(1<this.nSpectra){var d=this.getSplitPoint(b);this.setPositionForFrame(d);this.setSpectrumMovedTo(1<this.nSplit?d:this.iSpectrumSelected);0<=this.iSpectrumMovedTo&&this.setScale(this.iSpectrumMovedTo)}this.inPlotMove=this.isInPlotRegion(a,
b);this.setXPixelMovedTo(1.7976931348623157E308,1.7976931348623157E308,this.inPlotMove?a:-1,-1);this.inPlotMove&&(this.xValueMovedTo=this.toX(this.xPixelMovedTo),this.yValueMovedTo=this.getSpectrum().getYValueAt(this.xValueMovedTo));if(0!=this.pd.integralShiftMode){var d=this.getDialog(JSV.common.Annotation.AType.Integration,-1),c=d.getData().getXYCoords(),c=c[0<this.pd.integralShiftMode?c.length-1:0].getYVal();d.getData().shiftY(this.pd.integralShiftMode,this.toPixelYint(c)+b-(0<this.pd.integralShiftMode?
this.yPixelPlot1:this.yPixelPlot0),this.yPixel0,this.yPixels)}else this.pd.isIntegralDrag||(null!=this.pendingMeasurement?(this.processPendingMeasurement(a,b,0),this.setToolTipForPixels(a,b)):(this.selectedMeasurement=this.inPlotMove&&null!=this.selectedSpectrumMeasurements?this.findMeasurement(this.selectedSpectrumMeasurements,a,b,0):null,this.selectedIntegral=null,this.inPlotMove&&(null!=this.selectedSpectrumIntegrals&&null==this.selectedMeasurement)&&(this.selectedIntegral=this.findMeasurement(this.selectedSpectrumIntegrals,
a,b,0),null==this.selectedIntegral&&(this.selectedIntegral=this.findMeasurement(this.selectedSpectrumIntegrals,a,b,-5))),this.setToolTipForPixels(a,b),null==this.imageView?(this.piMouseOver=null,d=1<this.nSplit?this.iSpectrumMovedTo:this.iSpectrumClicked,!this.isDrawNoSpectra()&&0<=d&&(d=this.spectra.get(d),null!=d.getPeakList()&&(this.coordTemp.setXVal(this.toX(a)),this.coordTemp.setYVal(this.toY(b)),this.piMouseOver=d.findPeakByCoord(a,this.coordTemp)))):!this.pd.display1D&&this.sticky2Dcursor&&
this.set2DCrossHairs(a,b)))},"~N,~N");c(c$,"nextView",function(){this.currentZoomIndex+1<this.viewList.size()&&this.setZoomTo(this.currentZoomIndex+1)});c(c$,"previousView",function(){0<this.currentZoomIndex&&this.setZoomTo(this.currentZoomIndex-1)});c(c$,"resetView",function(){this.setZoomTo(0)});c(c$,"removeAllHighlights",function(){this.removeAllHighlights(null)});c(c$,"removeHighlight",function(a){this.highlights.remove(a)},"~N");c(c$,"removeHighlight",function(a,b){for(var d=this.highlights.size();0<=
--d;){var c=this.highlights.get(d);c.x1==a&&c.x2==b&&this.highlights.remove(d)}},"~N,~N");c(c$,"scaleYBy",function(a){if(null!=this.imageView||this.zoomEnabled)this.viewData.scaleSpectrum(null==this.imageView?this.iSpectrumSelected:-2,a),null!=this.imageView&&(this.update2dImage(!1),this.resetPinsFromView()),this.pd.refresh()},"~N");c(c$,"selectSpectrum",function(a,b,d){for(var c=!1,f=this.spectra.size();0<=--f;)if((null==a||this.getSpectrumAt(f).getFilePathForwardSlash().equals(a))&&this.getSpectrumAt(f).matchesPeakTypeModel(b,
d))this.setSpectrumSelected(f),1<this.nSplit&&this.splitStack(this.pd.graphSets,!0),c=!0;1<this.nSpectra&&(!c&&0<=this.iSpectrumSelected&&!this.pd.isCurrentGraphSet(this))&&this.setSpectrumSelected(-2147483648);return c},"~S,~S,~S");c(c$,"selectPeakByFileIndex",function(a,b){for(var d,c=this.spectra.size();0<=--c;)if(null!=(d=this.getSpectrumAt(c).selectPeakByFileIndex(a,b)))return d;return null},"~S,~S");c(c$,"setSelected",function(a){0>a?(this.bsSelected.clearAll(),this.setSpectrumClicked(-1)):
(this.bsSelected.set(a),this.setSpectrumClicked(1==this.bsSelected.cardinality()?a:-1),1<this.nSplit&&0<=a&&(this.pd.currentSplitPoint=a))},"~N");c(c$,"setSelectedIntegral",function(a){var b=this.selectedIntegral.getSpectrum();this.getIntegrationGraph(this.getSpectrumIndex(b)).setSelectedIntegral(this.selectedIntegral,a)},"~N");c(c$,"setShowAnnotation",function(a,b){var d=this.getDialog(a,-1);if(null==d)null!=b&&b!==Boolean.TRUE||(a===JSV.common.Annotation.AType.PeakList||a===JSV.common.Annotation.AType.Integration||
a===JSV.common.Annotation.AType.Measurements)&&this.pd.showDialog(a);else if(null==b)y(d,JSV.dialog.JSVDialog)?d.setVisible(!1):d.setState(!d.getState());else{var c=b.booleanValue();d.setState(c);(c||y(d,JSV.dialog.JSVDialog))&&this.pd.showDialog(a)}},"JSV.common.Annotation.AType,Boolean");c(c$,"checkIntegral",function(a,b){if(!this.getSpectrum().canIntegrate()||this.reversePlot)return!1;var d=this.getFixedSelectedSpectrumIndex(),c=this.getDialog(JSV.common.Annotation.AType.Integration,-1);if(null==
b)return!0;switch(JSV.common.IntegralData.IntMode.getMode(b.toUpperCase())){case JSV.common.IntegralData.IntMode.ON:this.integrate(d,a);break;case JSV.common.IntegralData.IntMode.OFF:this.integrate(d,null);break;case JSV.common.IntegralData.IntMode.TOGGLE:this.integrate(d,null==c?a:null);break;case JSV.common.IntegralData.IntMode.AUTO:null==c&&(this.checkIntegral(a,"ON"),c=this.getDialog(JSV.common.Annotation.AType.Integration,-1));null!=c&&c.getData().autoIntegrate();break;case JSV.common.IntegralData.IntMode.LIST:this.pd.showDialog(JSV.common.Annotation.AType.Integration);
break;case JSV.common.IntegralData.IntMode.MARK:null==c&&(this.checkIntegral(a,"ON"),c=this.getDialog(JSV.common.Annotation.AType.Integration,-1));null!=c&&c.getData().addMarks(b.substring(4).trim());break;case JSV.common.IntegralData.IntMode.MIN:if(null!=c)try{var f=Double.parseDouble(JSV.common.ScriptToken.getTokens(b).get(1));c.getData().setMinimumIntegral(f)}catch(e){if(!v(e,Exception))throw e;}break;case JSV.common.IntegralData.IntMode.UPDATE:null!=c&&c.getData().update(a)}this.updateDialog(JSV.common.Annotation.AType.Integration,
-1);return!0},"JSV.common.Parameters,~S");c(c$,"setSpectrum",function(a,b){b?1<this.nSplit&&this.setSpectrumClicked(a):(this.setSpectrumClicked(a),this.showAllStacked=this.stackSelected=!1)},"~N,~B");c(c$,"setSpectrumJDX",function(a){var b=this.getFixedSelectedSpectrumIndex();this.spectra.remove(b);this.spectra.add(b,a);this.pendingMeasurement=null;this.clearViews();this.viewData.newSpectrum(this.spectra)},"JSV.common.JDXSpectrum");c(c$,"setZoom",function(a,b,d,c){this.setZoomTo(0);0==a&&0==d&&0==
b&&0==c?(this.newPins(),this.imageView=null,this.getScale(),this.getScale()):this.doZoom(a,b,d,c,!0,b!=c,!1,!0,!0)},"~N,~N,~N,~N");c(c$,"shiftSpectrum",function(a,b){var d=this.getSpectrum();if(!d.isNMR()||!d.is1D())return!1;if(1.7976931348623157E308==b||1.7976931348623157E308==a)a=-d.addSpecShift(0);else{if(4.9E-324==b)return this.nextClickForSetPeak=!0,this.jsvp.showMessage("Click on or beside a peak to set its chemical shift.","Set Reference"),!1;if(Double.isNaN(a)||4.9E-324==a){var c=4.9E-324==
a?this.lastClickX:this.getNearestPeak(d,this.lastClickX,this.toY(this.pd.mouseY));if(Double.isNaN(c))return!1;if(Double.isNaN(b))try{var f=this.pd.getInput("New chemical shift (set blank to reset)","Set Reference",""+c).trim();b=0==f.length?c-d.addSpecShift(0):Double.parseDouble(f)}catch(e){if(v(e,Exception))return!1;throw e;}a=b-c}}if(0==a)return!1;d.addSpecShift(a);if(null!=this.annotations)for(c=this.annotations.size();0<=--c;)this.annotations.get(c).spec===d&&this.annotations.get(c).addSpecShift(a);
if(null!=this.dialogs)for(var j,c=this.dialogs.entrySet().iterator();c.hasNext()&&((j=c.next())||1);)j.getValue().getSpectrum()===d&&j.getValue().setSpecShift(a);this.getScale().addSpecShift(a);Double.isNaN(this.lastClickX)||(this.lastClickX+=a);this.updateDialogs();this.doZoom(0,this.getScale().minYOnScale,0,this.getScale().maxYOnScale,!0,!0,!1,!0,!1);this.pd.repaint();return!0},"~N,~N");c(c$,"toPeak",function(a){a*=this.drawXAxisLeftToRight?1:-1;Double.isNaN(this.lastClickX)&&(this.lastClickX=this.lastPixelX=
0);var b=this.getSpectrum(),d=this.setCoordClicked(this.lastPixelX,this.lastClickX,0);a=b.setNextPeak(d,a);0>a||(a=b.getPeakList().get(a),b.setSelectedPeak(a),this.setCoordClicked(a.getXPixel(),a.getX(),0),this.pd.notifyPeakPickedListeners(new JSV.common.PeakPickEvent(this.jsvp,this.pd.coordClicked,a)))},"~N");c(c$,"scaleSelectedBy",function(a){for(var b=this.bsSelected.nextSetBit(0);0<=b;b=this.bsSelected.nextSetBit(b+1))this.viewData.scaleSpectrum(b,a)},"~N");e(c$,"toString",function(){return"gs: "+
this.nSpectra+" "+this.spectra+" "+this.spectra.get(0).getFilePath()});c(c$,"setXPointer",function(a,b){null!=a&&this.setSpectrumClicked(this.getSpectrumIndex(a));this.xValueMovedTo=this.lastClickX=b;this.lastPixelX=this.toPixelX(b);this.setXPixelMovedTo(b,1.7976931348623157E308,0,0);this.yValueMovedTo=NaN},"JSV.common.JDXSpectrum,~N");c(c$,"setXPointer2",function(a,b){null!=a&&this.setSpectrumClicked(this.getSpectrumIndex(a));this.setXPixelMovedTo(1.7976931348623157E308,b,0,0)},"JSV.common.JDXSpectrum,~N");
c(c$,"hasCurrentMeasurement",function(a){return null!=(a===JSV.common.Annotation.AType.Integration?this.selectedSpectrumIntegrals:this.selectedSpectrumMeasurements)},"JSV.common.Annotation.AType");c(c$,"getDialog",function(a,b){-1==b&&(b=this.getCurrentSpectrumIndex());return null==this.dialogs||0>b?null:this.dialogs.get(a+"_"+b)},"JSV.common.Annotation.AType,~N");c(c$,"removeDialog",function(a,b){null!=this.dialogs&&0<=a&&this.dialogs.remove(b+"_"+a)},"~N,JSV.common.Annotation.AType");c(c$,"addDialog",
function(a,b,d){null==this.dialogs&&(this.dialogs=new java.util.Hashtable);a=b+"_"+a;d.setGraphSetKey(a);this.dialogs.put(a,d);return d},"~N,JSV.common.Annotation.AType,JSV.api.AnnotationData");c(c$,"removeDialog",function(a){var b=a.getGraphSetKey();this.dialogs.remove(b);a=a.getData();null!=a&&this.dialogs.put(b,a)},"JSV.dialog.JSVDialog");c(c$,"getPeakListing",function(a,b,d){0>a&&(a=this.getCurrentSpectrumIndex());if(0>a)return null;var c=this.getDialog(JSV.common.Annotation.AType.PeakList,-1);
if(null==c){if(!d)return null;this.addDialog(a,JSV.common.Annotation.AType.PeakList,c=new JSV.common.PeakData(JSV.common.Annotation.AType.PeakList,this.getSpectrum()))}c.getData().setPeakList(b,-2147483648,this.viewData.getScale());y(c,JSV.dialog.JSVDialog)&&c.setFields();return c.getData()},"~N,JSV.common.Parameters,~B");c(c$,"setPeakListing",function(a){var b=this.getDialog(JSV.common.Annotation.AType.PeakList,-1),d=y(b,JSV.dialog.JSVDialog)?b:null;(null==a?null==d||!d.isVisible():a.booleanValue())?
this.pd.showDialog(JSV.common.Annotation.AType.PeakList):y(b,JSV.dialog.JSVDialog)&&b.setVisible(!1)},"Boolean");c(c$,"haveIntegralDisplayed",function(a){a=this.getDialog(JSV.common.Annotation.AType.Integration,a);return null!=a&&a.getState()},"~N");c(c$,"getIntegrationGraph",function(a){a=this.getDialog(JSV.common.Annotation.AType.Integration,a);return null==a?null:a.getData()},"~N");c(c$,"setIntegrationRatios",function(a){var b=this.getFixedSelectedSpectrumIndex();null==this.aIntegrationRatios&&
(this.aIntegrationRatios=Array(this.nSpectra));this.aIntegrationRatios[b]=JSV.common.IntegralData.getIntegrationRatiosFromString(this.getSpectrum(),a)},"~S");c(c$,"getIntegrationRatios",function(a){return null==this.aIntegrationRatios?null:this.aIntegrationRatios[a]},"~N");c(c$,"integrate",function(a,b){var d=this.getSpectrumAt(a);if(null==b||!d.canIntegrate())return this.removeDialog(a,JSV.common.Annotation.AType.Integration),!1;this.addDialog(a,JSV.common.Annotation.AType.Integration,new JSV.common.IntegralData(d,
b));return!0},"~N,JSV.common.Parameters");c(c$,"getIntegration",function(a,b,d){0>a&&(a=this.getCurrentSpectrumIndex());if(0>a)return null;var c=this.getDialog(JSV.common.Annotation.AType.Integration,-1);if(null==c){if(!d)return null;c=this.addDialog(a,JSV.common.Annotation.AType.Integration,new JSV.common.IntegralData(this.getSpectrum(),b))}return c.getData()},"~N,JSV.common.Parameters,~B");c(c$,"getMeasurementInfo",function(a,b){var d;switch(a){case JSV.common.Annotation.AType.PeakList:d=this.getPeakListing(b,
null,!1);break;case JSV.common.Annotation.AType.Integration:d=this.getIntegration(b,null,!1);break;default:return null}if(null==d)return null;var c=new java.util.Hashtable;d.getInfo(c);return c},"JSV.common.Annotation.AType,~N");c(c$,"getInfo",function(a,b){var d=new java.util.Hashtable;if("viewInfo".equalsIgnoreCase(a))return this.getScale().getInfo(d);var c=new JU.List;d.put("spectra",c);for(var f=0;f<this.nSpectra;f++)if(!(0<=b&&f!=b)){var e=this.spectra.get(f),j=e.getInfo(a);if(0<=b&&null!=a&&
(2==j.size()||a.equalsIgnoreCase("id")))return 2==j.size()&&j.remove("id"),j;JSV.common.Parameters.putInfo(a,j,"type",e.getDataType());JSV.common.Parameters.putInfo(a,j,"titleLabel",e.getTitleLabel());JSV.common.Parameters.putInfo(a,j,"filePath",e.getFilePath().$replace("\\","/"));JSV.common.Parameters.putInfo(a,j,"PeakList",JSV.common.Parameters.isMatch(a,"PeakList")?this.getMeasurementInfo(JSV.common.Annotation.AType.PeakList,f):null);JSV.common.Parameters.putInfo(a,j,"Integration",JSV.common.Parameters.isMatch(a,
"Integration")?this.getMeasurementInfo(JSV.common.Annotation.AType.Integration,f):null);if(0<=b)return j;c.addLast(j)}return d},"~S,~N");c(c$,"getTitle",function(a){return 1==this.nSpectra||0<=this.iSpectrumSelected&&(!a||1==this.nSplit)?this.getSpectrum().getTitle():null},"~B");c(c$,"getCurrentView",function(){this.setScale(this.getFixedSelectedSpectrumIndex());return this.viewData.getScale()});c(c$,"set2DXY",function(a,b,d){null!=this.gs2dLinkedX&&this.cur1D2x1.setX(a,this.toPixelX(a));null!=this.gs2dLinkedY&&
this.cur1D2x2.setX(b,this.toPixelX(b));this.cur1D2Locked=d},"~N,~N,~B");c(c$,"dialogsToFront",function(){if(null!=this.dialogs)for(var a,b=this.dialogs.entrySet().iterator();b.hasNext()&&((a=b.next())||1);){var d=a.getValue();this.isVisible(d)&&d.setVisible(!0)}});c(c$,"setPlotColors",function(a){var b=a;if(b.length>this.nSpectra)a=Array(this.nSpectra),System.arraycopy(b,0,a,0,this.nSpectra),b=a;else if(this.nSpectra>b.length){a=Array(this.nSpectra);var d=this.nSpectra-b.length;System.arraycopy(b,
0,a,0,b.length);for(var c=0,b=b.length;c<d;c++,b++)a[b]=this.generateRandomColor();b=a}this.plotColors=b},"~O");c(c$,"disposeImage",function(){null!=this.image2D&&this.image2D.parentNode.removeChild(this.image2D);this.plotColors=this.highlights=this.pd=this.jsvp=this.image2D=null});c(c$,"generateRandomColor",function(){for(;;){var a=n(255*Math.random()),b=n(255*Math.random()),d=n(255*Math.random()),a=this.g2d.getColor3(a,b,d);if(0!=a.getRGB())return a}});c(c$,"setPlotColor0",function(a){this.plotColors[0]=
a},"~O");c(c$,"getPlotColor",function(a){return a>=this.plotColors.length?null:this.plotColors[a]},"~N");c(c$,"setColorFromToken",function(a,b){null!=b&&this.g2d.setGraphicsColor(a,b===JSV.common.ScriptToken.PLOTCOLOR?this.plotColors[0]:this.pd.getColor(b))},"~O,JSV.common.ScriptToken");c(c$,"setPlotColor",function(a,b){var d;switch(b){case -3:d=JSV.common.GraphSet.veryLightGrey;break;case -2:d=this.pd.BLACK;break;case -1:d=this.pd.getColor(JSV.common.ScriptToken.INTEGRALPLOTCOLOR);break;default:d=
this.plotColors[b]}this.g2d.setGraphicsColor(a,d)},"~O,~N");c(c$,"draw2DImage",function(){null!=this.imageView&&this.g2d.drawGrayScaleImage(this.gMain,this.image2D,this.imageView.xPixel0,this.imageView.yPixel0,this.imageView.xPixel0+this.imageView.xPixels-1,this.imageView.yPixel0+this.imageView.yPixels-1,this.imageView.xView1,this.imageView.yView1,this.imageView.xView2,this.imageView.yView2)});c(c$,"get2DImage",function(){this.imageView=new JSV.common.ImageView;this.imageView.set(this.viewList.get(0).getScale());
if(!this.update2dImage(!0))return!1;this.imageView.resetZoom();return this.sticky2Dcursor=!0});c(c$,"update2dImage",function(a){this.imageView.set(this.viewData.getScale());var b=this.getSpectrumAt(0),d=this.imageView.get2dBuffer(b,!a);if(null==d)return this.imageView=this.image2D=null,!1;a&&(d=this.imageView.adjustView(b,this.viewData),this.imageView.resetView());this.image2D=this.g2d.newGrayScaleImage(this.gMain,this.image2D,this.imageView.imageWidth,this.imageView.imageHeight,d);this.setImageWindow();
return!0},"~B");c(c$,"getAnnotation",function(a,b,d,c,f,e,j){return(new JSV.common.ColoredAnnotation).setCA(a,b,this.getSpectrum(),d,this.pd.BLACK,c,f,e,j)},"~N,~N,~S,~B,~B,~N,~N");c(c$,"getAnnotation",function(a,b){return JSV.common.Annotation.getColoredAnnotation(this.g2d,this.getSpectrum(),a,b)},"JU.List,JSV.common.Annotation");c(c$,"fillBox",function(a,b,d,c,f,e){this.setColorFromToken(a,e);this.g2d.fillRect(a,Math.min(b,c),Math.min(d,f),Math.abs(b-c),Math.abs(d-f))},"~O,~N,~N,~N,~N,JSV.common.ScriptToken");
c(c$,"drawHandle",function(a,b,d,c){c?this.g2d.drawRect(a,b-2,d-2,4,4):this.g2d.fillRect(a,b-2,d-2,5,5)},"~O,~N,~N,~B");c(c$,"setCurrentBoxColor",function(a){this.g2d.setGraphicsColor(a,this.pd.BLACK)},"~O");c(c$,"fillArrow",function(a,b,d,c,f){var e=1;switch(b){case JSV.common.GraphSet.ArrowType.LEFT:case JSV.common.GraphSet.ArrowType.UP:e=-1}d=[d-5,d-5,d+5,d+5,d+8,d,d-8];c=[c+5*e,c-e,c-e,c+5*e,c+5*e,c+10*e,c+5*e];switch(b){case JSV.common.GraphSet.ArrowType.LEFT:case JSV.common.GraphSet.ArrowType.RIGHT:f?
this.g2d.fillPolygon(a,c,d,7):this.g2d.drawPolygon(a,c,d,7);break;case JSV.common.GraphSet.ArrowType.UP:case JSV.common.GraphSet.ArrowType.DOWN:f?this.g2d.fillPolygon(a,d,c,7):this.g2d.drawPolygon(a,d,c,7)}},"~O,JSV.common.GraphSet.ArrowType,~N,~N,~B");c(c$,"fillCircle",function(a,b,d,c){c?this.g2d.fillCircle(a,b-4,d-4,8):this.g2d.drawCircle(a,b-4,d-4,8)},"~O,~N,~N,~B");c(c$,"setAnnotationColor",function(a,b,d){null!=d?this.setColorFromToken(a,d):(d=null,y(b,JSV.common.ColoredAnnotation)&&(d=b.getColor()),
null==d&&(d=this.pd.BLACK),this.g2d.setGraphicsColor(a,d))},"~O,JSV.common.Annotation,JSV.common.ScriptToken");c$.$GraphSet$Highlight$=function(){R();c$=q(function(){oa(this,arguments);this.x2=this.x1=0;this.spectrum=this.color=null;s(this,arguments)},JSV.common.GraphSet,"Highlight");e(c$,"toString",function(){return"highlight "+this.x1+" "+this.x2+" "+this.spectrum});w(c$,function(a,b,d,c){this.x1=a;this.x2=b;this.color=c;this.spectrum=d},"~N,~N,JSV.common.JDXSpectrum,javajs.api.GenericColor");e(c$,
"equals",function(a){return!y(a,JSV.common.GraphSet.Highlight)?!1:a.x1==this.x1&&a.x2==this.x2},"~O");c$=Q()};R();c$=A(JSV.common.GraphSet,"ArrowType",Enum);k(c$,"LEFT",0,[]);k(c$,"RIGHT",1,[]);k(c$,"UP",2,[]);k(c$,"DOWN",3,[]);k(c$,"RESET",4,[]);k(c$,"HOME",5,[]);c$=Q();c$.RT2=c$.prototype.RT2=Math.sqrt(2);B(c$,"veryLightGrey",null,"minNumOfPointsForZoom",3,"MIN_DRAG_PIXELS",5,"ONLINE_CUTOFF",2)}),m("JSV.api"),F(JSV.api,"AnnotationData"),m("JSV.common"),u(["JU.List","JSV.api.AnnotationData"],"JSV.common.MeasurementData",
["JU.AU","$.DF","JSV.common.Annotation","$.Parameters"],function(){c$=q(function(){this.units=this.spec=this.type=null;this.precision=0;this.myParams=null;this.isON=!0;this.key=null;s(this,arguments)},JSV.common,"MeasurementData",JU.List,JSV.api.AnnotationData);w(c$,function(a,b){I(this,JSV.common.MeasurementData,[]);this.type=a;this.spec=b;this.myParams=(new JSV.common.Parameters).setName("MeasurementData")},"JSV.common.Annotation.AType,JSV.common.JDXSpectrum");c(c$,"getMeasurements",function(){return this});
e(c$,"getAType",function(){return this.type});e(c$,"getState",function(){return this.isON});e(c$,"setState",function(a){this.isON=a},"~B");c(c$,"setMeasurements",function(){},"JU.List");e(c$,"getParameters",function(){return this.myParams});c(c$,"getDataHeader",function(){return JSV.common.MeasurementData.HEADER});c(c$,"getMeasurementListArray",function(a){this.units=a;var b=this.getMeasurementListArrayReal(a),d=this.spec.isNMR()?4:2;a=this.spec.isHNMR()&&a.equals("ppm")?4:2;for(var c=Array(this.size()),
f=this.size();0<=--f;)c[f]=[""+(f+1),JU.DF.formatDecimalDbl(b[f][0],d),JU.DF.formatDecimalDbl(b[f][1],d),JU.DF.formatDecimalDbl(b[f][2],a)];return c},"~S");c(c$,"getMeasurementListArrayReal",function(a){a=this.spec.isNMR()&&a.equalsIgnoreCase("HZ");for(var b=JU.AU.newDouble2(this.size()),d=0,c=this.size();0<=--c;){var f=this.get(c).getValue();a&&(f*=this.spec.observedFreq);b[d++]=[this.get(c).getXVal(),this.get(c).getXVal2(),f]}return b},"~S");c$.checkParameters=c(c$,"checkParameters",function(a,
b){if(0==a.size())return!1;var d=a.getParameters();switch(a.getAType()){case JSV.common.Annotation.AType.PeakList:return b.peakListInterpolation.equals(d.peakListInterpolation)&&b.peakListThreshold==d.peakListThreshold}return!1},"JSV.common.MeasurementData,JSV.common.ColorParameters");e(c$,"getSpectrum",function(){return this.spec});e(c$,"getData",function(){return this});c(c$,"clear",function(a,b){for(var d=this.size();0<=--d;){var c=this.get(d);(0==c.text.length||c.overlaps(a,b))&&this.remove(d)}},
"~N,~N");e(c$,"setSpecShift",function(a){for(var b=this.size();0<=--b;){var d=this.get(b),c=d.getXVal()+a;d.setXVal(c);d.setValue(c);d.text=JU.DF.formatDecimalDbl(c,this.precision)}},"~N");e(c$,"getGraphSetKey",function(){return this.key});e(c$,"setGraphSetKey",function(a){this.key=a},"~S");e(c$,"isVisible",function(){return!0});c(c$,"getInfo",function(a){a.put("header",this.getDataHeader());a.put("table",this.getMeasurementListArrayReal("ppm"));null!=this.units&&a.put("units",this.units)},"java.util.Map");
c$.HEADER=c$.prototype.HEADER=["","start","end","value"]}),m("JSV.common"),u(["java.util.EventObject"],"JSV.common.PeakPickEvent",null,function(){c$=q(function(){this.peakInfo=this.coord=null;s(this,arguments)},JSV.common,"PeakPickEvent",java.util.EventObject);w(c$,function(a,b,d){I(this,JSV.common.PeakPickEvent,[a]);this.coord=b;this.peakInfo=null==d?null:d},"~O,JSV.common.Coordinate,JSV.common.PeakInfo");c(c$,"getCoord",function(){return this.coord});c(c$,"getPeakInfo",function(){return this.peakInfo});
e(c$,"toString",function(){return null==this.peakInfo?null:this.peakInfo.toString()})}),m("JSV.common"),c$=q(function(){this.isub=0;this.title=null;s(this,arguments)},JSV.common,"SubSpecChangeEvent"),w(c$,function(a,b){this.isub=a;this.title=b},"~N,~S"),c(c$,"isValid",function(){return null!=this.title}),c(c$,"getSubIndex",function(){return this.isub}),e(c$,"toString",function(){return this.title}),m("JSV.common"),c$=q(function(){this.y2=this.x2=this.y1=this.x1=0;s(this,arguments)},JSV.common,"ZoomEvent"),
w(c$,function(a,b,d,c){this.x1=a;this.y1=b;this.x2=d;this.y2=c},"~N,~N,~N,~N"),m("JSV.common"),u(["JSV.common.Parameters"],"JSV.common.ColorParameters",["java.util.Hashtable","$.StringTokenizer","JU.CU","$.List","JSV.common.ScriptToken"],function(){c$=q(function(){this.plotColors=this.elementColors=this.displayFontName=this.titleFontName=null;this.isDefault=!1;s(this,arguments)},JSV.common,"ColorParameters",JSV.common.Parameters);w(c$,function(){I(this,JSV.common.ColorParameters,[]);JSV.common.ColorParameters.BLACK=
this.getColor3(0,0,0);JSV.common.ColorParameters.RED=this.getColor3(255,0,0);JSV.common.ColorParameters.LIGHT_GRAY=this.getColor3(200,200,200);JSV.common.ColorParameters.DARK_GRAY=this.getColor3(80,80,80);JSV.common.ColorParameters.BLUE=this.getColor3(0,0,255);JSV.common.ColorParameters.WHITE=this.getColor3(255,255,255);this.elementColors=new java.util.Hashtable;this.setColor(JSV.common.ScriptToken.TITLECOLOR,JSV.common.ColorParameters.BLACK);this.setColor(JSV.common.ScriptToken.UNITSCOLOR,JSV.common.ColorParameters.RED);
this.setColor(JSV.common.ScriptToken.SCALECOLOR,JSV.common.ColorParameters.BLACK);this.setColor(JSV.common.ScriptToken.COORDINATESCOLOR,JSV.common.ColorParameters.RED);this.setColor(JSV.common.ScriptToken.GRIDCOLOR,JSV.common.ColorParameters.LIGHT_GRAY);this.setColor(JSV.common.ScriptToken.PLOTCOLOR,JSV.common.ColorParameters.BLUE);this.setColor(JSV.common.ScriptToken.PLOTAREACOLOR,JSV.common.ColorParameters.WHITE);this.setColor(JSV.common.ScriptToken.BACKGROUNDCOLOR,this.getColor3(192,192,192));
this.setColor(JSV.common.ScriptToken.INTEGRALPLOTCOLOR,JSV.common.ColorParameters.RED);this.setColor(JSV.common.ScriptToken.PEAKTABCOLOR,JSV.common.ColorParameters.RED);this.setColor(JSV.common.ScriptToken.HIGHLIGHTCOLOR,JSV.common.ColorParameters.DARK_GRAY);for(var a=0;8>a;a++)JSV.common.ColorParameters.defaultPlotColors[a]=this.getColorFromString(JSV.common.ColorParameters.defaultPlotColorNames[a]);this.plotColors=Array(8);System.arraycopy(JSV.common.ColorParameters.defaultPlotColors,0,this.plotColors,
0,8)});c(c$,"setFor",function(a,b,d){null==b&&(b=this);d&&a.getPanelData().setBooleans(b,null);a=a.getPanelData();null!=a.getCurrentPlotColor(1)&&a.setPlotColors(this.plotColors);a.setColorOrFont(b,null)},"JSV.api.JSVPanel,JSV.common.ColorParameters,~B");c(c$,"set",function(a,b,d){var c=null;switch(b){default:this.setP(a,b,d);return;case JSV.common.ScriptToken.PLOTCOLORS:null==a?this.getPlotColors(d):a.setPlotColors(this.getPlotColors(d));return;case JSV.common.ScriptToken.BACKGROUNDCOLOR:case JSV.common.ScriptToken.COORDINATESCOLOR:case JSV.common.ScriptToken.GRIDCOLOR:case JSV.common.ScriptToken.HIGHLIGHTCOLOR:case JSV.common.ScriptToken.INTEGRALPLOTCOLOR:case JSV.common.ScriptToken.PEAKTABCOLOR:case JSV.common.ScriptToken.PLOTAREACOLOR:case JSV.common.ScriptToken.PLOTCOLOR:case JSV.common.ScriptToken.SCALECOLOR:case JSV.common.ScriptToken.TITLECOLOR:case JSV.common.ScriptToken.UNITSCOLOR:c=
this.setColorFromString(b,d);break;case JSV.common.ScriptToken.TITLEFONTNAME:case JSV.common.ScriptToken.DISPLAYFONTNAME:c=this.getFontName(b,d)}null!=a&&null!=c&&a.setColorOrFont(this,b)},"JSV.common.PanelData,JSV.common.ScriptToken,~S");c(c$,"getElementColor",function(a){return this.elementColors.get(a)},"JSV.common.ScriptToken");c(c$,"setColor",function(a,b){null!=b&&this.elementColors.put(a,b);return b},"JSV.common.ScriptToken,javajs.api.GenericColor");c(c$,"copy",function(){return this.copy(this.name)});
c(c$,"setElementColors",function(a){this.displayFontName=a.displayFontName;var b;for(a=a.elementColors.entrySet().iterator();a.hasNext()&&((b=a.next())||1);)this.setColor(b.getKey(),b.getValue());return this},"JSV.common.ColorParameters");c(c$,"getColorFromString",function(a){return this.getColor1(JU.CU.getArgbFromString(a))},"~S");c(c$,"getPlotColors",function(a){if(null==a)return this.plotColors[0]=this.getElementColor(JSV.common.ScriptToken.PLOTCOLOR),this.plotColors;a=new java.util.StringTokenizer(a,
",;.- ");var b=new JU.List;try{for(;a.hasMoreTokens();)b.addLast(this.getColorFromString(a.nextToken()))}catch(d){if(v(d,Exception))return null;throw d;}return b.toArray(Array(b.size()))},"~S");c(c$,"setColorFromString",function(a,b){return this.setColor(a,this.getColorFromString(b))},"JSV.common.ScriptToken,~S");c(c$,"getFontName",function(a,b){var d=this.isValidFontName(b);switch(a){case JSV.common.ScriptToken.TITLEFONTNAME:return d?this.titleFontName=b:this.titleFontName;case JSV.common.ScriptToken.DISPLAYFONTNAME:return d?
this.displayFontName=b:this.displayFontName}return null},"JSV.common.ScriptToken,~S");B(c$,"BLACK",null,"RED",null,"LIGHT_GRAY",null,"DARK_GRAY",null,"BLUE",null,"WHITE",null);c$.defaultPlotColors=c$.prototype.defaultPlotColors=Array(8);c$.defaultPlotColorNames=c$.prototype.defaultPlotColorNames="black darkGreen darkred orange magenta cyan maroon darkGray".split(" ")}),m("JSV.common"),u(["JSV.common.Annotation"],"JSV.common.ColoredAnnotation",null,function(){c$=q(function(){this.color=null;s(this,
arguments)},JSV.common,"ColoredAnnotation",JSV.common.Annotation);c(c$,"getColor",function(){return this.color});w(c$,function(){I(this,JSV.common.ColoredAnnotation,[])});c(c$,"setCA",function(a,b,d,c,f,e,j,p,l){this.setA(a,b,d,c,e,j,p,l);this.color=f;return this},"~N,~N,JSV.common.JDXSpectrum,~S,javajs.api.GenericColor,~B,~B,~N,~N")}),m("JSV.common"),u(["JSV.api.XYScaleConverter"],"JSV.common.ImageView",["java.lang.Double","JSV.common.Coordinate","$.ScaleData"],function(){c$=q(function(){this.buf2d=
null;this.yView2=this.xView2=this.yView1=this.xView1=this.yPixelZoom2=this.xPixelZoom2=this.yPixelZoom1=this.xPixelZoom1=this.yPixels=this.xPixels=this.imageHeight=this.imageWidth=this.yPixel1=this.xPixel1=this.yPixel0=this.xPixel0=this.averageGray=this.grayFactorLast=0;this.minX=NaN;this.maxZ=this.minZ=this.maxY=this.minY=this.maxX=0;this.scaleData=null;s(this,arguments)},JSV.common,"ImageView",null,JSV.api.XYScaleConverter);c(c$,"set",function(a){Double.isNaN(this.minX)&&(this.minX=a.minX,this.maxX=
a.maxX);this.minZ=a.minY;this.maxZ=a.maxY;this.scaleData=new JSV.common.ScaleData},"JSV.common.ScaleData");c(c$,"setZoom",function(a,b,d,c){this.xPixelZoom1=Math.min(a,d);this.yPixelZoom1=Math.min(b,c);this.xPixelZoom2=Math.max(a,d);this.yPixelZoom2=Math.max(b,c);this.setView()},"~N,~N,~N,~N");c(c$,"setXY0",function(a,b,d){this.xPixel0=b;this.yPixel0=d;this.xPixel1=this.xPixel0+this.xPixels-1;this.yPixel1=this.yPixel0+this.yPixels-1;this.setMinMaxY(a)},"JSV.common.JDXSpectrum,~N,~N");c(c$,"setPixelWidthHeight",
function(a,b){this.xPixels=a;this.yPixels=b},"~N,~N");c(c$,"resetView",function(){this.yView1=this.xView1=0;this.xView2=this.imageWidth-1;this.yView2=this.imageHeight-1});c(c$,"setView",function(){0==this.xPixelZoom1&&this.resetZoom();var a=this.toImageX(this.xPixelZoom1),b=this.toImageY(this.yPixelZoom1),d=this.toImageX(this.xPixelZoom2),c=this.toImageY(this.yPixelZoom2);this.xView1=Math.min(a,d);this.yView1=Math.min(b,c);this.xView2=Math.max(a,d);this.yView2=Math.max(b,c);this.setScaleData();this.resetZoom()});
c(c$,"resetZoom",function(){this.xPixelZoom1=this.xPixel0;this.yPixelZoom1=this.yPixel0;this.xPixelZoom2=this.xPixel1;this.yPixelZoom2=this.yPixel1});c(c$,"toImageX",function(a){return this.xView1+n(Math.floor((a-this.xPixel0)/(this.xPixels-1)*(this.xView2-this.xView1)))},"~N");c(c$,"toImageY",function(a){return this.yView1+n(Math.floor((a-this.yPixel0)/(this.yPixels-1)*(this.yView2-this.yView1)))},"~N");c(c$,"toImageX0",function(a){return JSV.common.Coordinate.intoRange(n((1*a-this.xPixel0)/(this.xPixels-
1)*(this.imageWidth-1)),0,this.imageWidth-1)},"~N");c(c$,"toImageY0",function(a){return JSV.common.Coordinate.intoRange(n((1*a-this.yPixel0)/(this.yPixels-1)*(this.imageHeight-1)),0,this.imageHeight-1)},"~N");c(c$,"isXWithinRange",function(a){return a>=this.xPixel0-5&&a<this.xPixel0+this.xPixels+5},"~N");c(c$,"toSubspectrumIndex",function(a){return JSV.common.Coordinate.intoRange(this.imageHeight-1-this.toImageY(a),0,this.imageHeight-1)},"~N");c(c$,"toX0",function(a){return this.maxX+(this.minX-this.maxX)*
(this.fixX(a)-this.xPixel0)/(this.xPixels-1)},"~N");c(c$,"toPixelX0",function(a){return this.xPixel1-n((a-this.minX)/(this.maxX-this.minX)*(this.xPixels-1))},"~N");c(c$,"toPixelY0",function(a){return this.yPixel1-n(a/(this.imageHeight-1)*(this.yPixels-1))},"~N");c(c$,"subIndexToPixelY",function(a){return this.yPixel0+n(1*(this.imageHeight-1-a-this.yView1)/(this.yView2-this.yView1)*(this.yPixels-1))},"~N");c(c$,"fixSubIndex",function(a){return JSV.common.Coordinate.intoRange(a,this.imageHeight-1-this.yView2,
this.imageHeight-1-this.yView1)},"~N");e(c$,"fixX",function(a){return a<this.xPixel0?this.xPixel0:a>this.xPixel1?this.xPixel1:a},"~N");e(c$,"toX",function(a){return this.maxX+(this.minX-this.maxX)*this.toImageX(this.fixX(a))/(this.imageWidth-1)},"~N");e(c$,"toPixelX",function(a){var b=this.toX(this.xPixel0),d=this.toX(this.xPixel1);return this.xPixel0+n((a-b)/(d-b)*(this.xPixels-1))},"~N");c(c$,"setView0",function(a,b,d,c){a=this.toImageX0(a);b=this.toImageY0(b);d=this.toImageX0(d);c=this.toImageY0(c);
this.xView1=Math.min(a,d);this.yView1=Math.min(b,c);this.xView2=Math.max(a,d);this.yView2=Math.max(b,c);this.resetZoom()},"~N,~N,~N,~N");c(c$,"get2dBuffer",function(a,b){var d=a.getSubSpectra();if(null==d||!d.get(0).isContinuous())return null;var c=a.getXYCoords(),f=d.size();this.imageWidth=c.length;this.imageHeight=f;var e=255/(this.maxZ-this.minZ);if(!b&&null!=this.buf2d&&e==this.grayFactorLast)return this.buf2d;this.grayFactorLast=e;for(var j=this.imageWidth*this.imageHeight,p=H(j,0),l=0,k=0;k<
f;k++){var m=d.get(k).xyCoords;if(m.length!=c.length)return null;for(var q=d.get(k).getUserYFactor(),t=0;t<c.length;t++){var r=m[t].getYVal(),r=255-JSV.common.Coordinate.intoRange(n((r*q-this.minZ)*e),0,255);p[--j]=r;l+=r}}this.averageGray=1-l/(this.imageWidth*this.imageHeight)/255;System.out.println("Average gray = "+this.averageGray);return this.buf2d=p},"JSV.common.JDXSpectrum,~B");c(c$,"adjustView",function(a,b){for(var d=0,c=!1;((c=0.05>this.averageGray)||0.3<this.averageGray)&&10>d++;)b.scaleSpectrum(-2,
c?2:0.5),this.set(b.getScale()),this.get2dBuffer(a,!1);return this.buf2d},"JSV.common.JDXSpectrum,JSV.common.ViewData");c(c$,"getBuffer",function(){return this.buf2d});c(c$,"setMinMaxY",function(a){a=a.getSubSpectra();var b=a.get(0);this.maxY=b.getY2D();this.minY=a.get(a.size()-1).getY2D();b.y2DUnits.equalsIgnoreCase("Hz")&&(this.maxY/=b.freq2dY,this.minY/=b.freq2dY);this.setScaleData()},"JSV.common.JDXSpectrum");c(c$,"setScaleData",function(){this.scaleData.minY=this.minY;this.scaleData.maxY=this.maxY;
this.scaleData.setYScale(this.toY(this.yPixel0),this.toY(this.yPixel1),!1,!1)});e(c$,"getScale",function(){return this.scaleData});e(c$,"getYPixels",function(){return this.yPixels});e(c$,"getXPixels",function(){return this.xPixels});e(c$,"getXPixel0",function(){return this.xPixel0});e(c$,"toY",function(a){a=this.toSubspectrumIndex(a);return this.maxY+(this.minY-this.maxY)*a/(this.imageWidth-1)},"~N");e(c$,"fixY",function(a){return JSV.common.Coordinate.intoRange(a,this.yPixel0,this.yPixel1)},"~N");
e(c$,"toPixelY",function(a){return n(this.yPixel0+(a-this.scaleData.minYOnScale)/(this.scaleData.maxYOnScale-this.scaleData.minYOnScale)*this.yPixels)},"~N");B(c$,"DEFAULT_MIN_GRAY",0.05,"DEFAULT_MAX_GRAY",0.3)}),m("JSV.common"),c$=A(JSV.common,"IntegralComparator",null,java.util.Comparator),e(c$,"compare",function(a,b){return a.getXVal()<b.getXVal()?-1:a.getXVal()>b.getXVal()?1:0},"JSV.common.Measurement,JSV.common.Measurement"),m("JSV.common"),u(["java.lang.Enum","JSV.common.MeasurementData","$.IntegralComparator"],
"JSV.common.IntegralData","java.lang.Double java.util.Collections $.StringTokenizer JU.AU $.BS $.DF $.List $.PT JSV.common.Annotation $.Coordinate $.Integral $.ScriptToken".split(" "),function(){c$=q(function(){this.intRange=this.percentOffset=this.percentMinY=0;this.normalizationFactor=1;this.integralTotal=this.offset=this.percentRange=0;this.haveRegions=!1;this.xyCoords=null;s(this,arguments)},JSV.common,"IntegralData",JSV.common.MeasurementData);c(c$,"getPercentMinimumY",function(){return this.percentMinY});
c(c$,"getPercentOffset",function(){return this.percentOffset});c(c$,"getIntegralFactor",function(){return this.intRange});w(c$,function(a,b,d,c){I(this,JSV.common.IntegralData,[JSV.common.Annotation.AType.Integration,c]);this.percentMinY=a;this.percentOffset=b;this.percentRange=d;this.calculateIntegral()},"~N,~N,~N,JSV.common.JDXSpectrum");w(c$,function(a,b){I(this,JSV.common.IntegralData,[JSV.common.Annotation.AType.Integration,a]);null==b?this.autoIntegrate():(this.percentOffset=b.integralOffset,
this.percentRange=b.integralRange,this.calculateIntegral())},"JSV.common.JDXSpectrum,JSV.common.Parameters");c(c$,"update",function(a){this.update(a.integralMinY,a.integralOffset,a.integralRange)},"JSV.common.Parameters");c(c$,"update",function(a,b,d){var c=this.percentRange;if(!(0>=d||d==this.percentRange&&b==this.percentOffset)){this.percentOffset=b;this.percentRange=d;this.checkRange();a=d/100/this.integralTotal;b/=100;for(var f=0;f<this.xyCoords.length;f++){var e=this.xyCoords[f].getYVal(),e=
(e-this.offset)/this.intRange;this.xyCoords[f].setYVal(e*a+b)}1!=this.normalizationFactor&&(this.normalizationFactor*=c/d);if(this.haveRegions)for(f=this.size();0<=--f;)d=this.get(f),c=this.getYValueAt(d.getXVal()),e=this.getYValueAt(d.getXVal2()),d.setYVal(c),d.setYVal2(e),d.setValue(100*Math.abs(e-c)*this.normalizationFactor);this.intRange=a;this.offset=b}},"~N,~N,~N");c(c$,"getYValueAt",function(a){return JSV.common.Coordinate.getYValueAt(this.xyCoords,a)},"~N");c(c$,"addIntegralRegion",function(a,
b){if(Double.isNaN(a))return this.haveRegions=!1,this.clear(),null;if(a==b)return null;var d=this.getYValueAt(a),c=this.getYValueAt(b);this.haveRegions=!0;d=(new JSV.common.Integral).setInt(a,d,this.spec,100*Math.abs(c-d)*this.normalizationFactor,b,c);this.clear(a,b);this.addLast(d);java.util.Collections.sort(this,JSV.common.IntegralData.c);return d},"~N,~N");e(c$,"setSpecShift",function(a){JSV.common.Coordinate.shiftX(this.xyCoords,a);for(var b=this.size();1<=--b;)this.get(b).addSpecShift(a)},"~N");
c(c$,"addMarks",function(a){a=JU.PT.simpleReplace(" "+a,","," ");a=JU.PT.simpleReplace(a," -"," #");a=JU.PT.simpleReplace(a,"--","-#");a=a.$replace("-","^");a=a.$replace("#","-");a=JSV.common.ScriptToken.getTokens(a);for(var b=0;b<a.size();b++)try{var d=a.get(b),c=0,f=d.indexOf("^");if(!(0>f)){var e=d.indexOf(":");e>f&&(c=Double.$valueOf(d.substring(e+1).trim()).doubleValue(),d=d.substring(0,e).trim());var j=Double.$valueOf(d.substring(0,f).trim()).doubleValue(),p=Double.$valueOf(d.substring(f+1).trim()).doubleValue();
0==p&&0==j&&this.clear();if(p!=j){var l=this.addIntegralRegion(Math.max(p,j),Math.min(p,j));null!=l&&0<c&&this.setSelectedIntegral(l,c)}}}catch(k){if(!v(k,Exception))throw k;}},"~S");c(c$,"calculateIntegral",function(){var a=this.spec.getXYCoords();this.xyCoords=Array(a.length);this.integralTotal=0;this.checkRange();for(var b=1E100,d=0;d<a.length;d++){var c=a[d].getYVal();c<b&&0<=c&&(b=c)}for(d=0;d<a.length;d++)c=a[d].getYVal(),-1.7976931348623157E308<c&&(this.integralTotal+=c-b);this.intRange=this.percentRange/
100/this.integralTotal;this.offset=this.percentOffset/100;for(var f=0,d=a.length;0<=--d;)c=a[d].getYVal(),-1.7976931348623157E308<c&&(f+=c-b),this.xyCoords[d]=(new JSV.common.Coordinate).set(a[d].getXVal(),f*this.intRange+this.offset);return this.xyCoords});c(c$,"checkRange",function(){this.percentOffset=Math.max(5,this.percentOffset);this.percentRange=Math.max(10,this.percentRange)});c$.getIntegrationRatiosFromString=c(c$,"getIntegrationRatiosFromString",function(a,b){for(var d=new JU.List,c=new java.util.StringTokenizer(b,
",");c.hasMoreTokens();){var f=c.nextToken(),f=new java.util.StringTokenizer(f,":"),f=(new JSV.common.Annotation).setA(Double.parseDouble(f.nextToken()),0,a,f.nextToken(),!0,!1,0,0);d.addLast(f)}return d},"JSV.common.JDXSpectrum,~S");c(c$,"getXYCoords",function(){return this.xyCoords});c(c$,"getPercentYValueAt",function(a){return 100*this.getYValueAt(a)},"~N");c(c$,"dispose",function(){this.xyCoords=this.spec=null});c(c$,"setSelectedIntegral",function(a,b){var d=a.getValue();this.factorAllIntegrals(0>=
b?1/this.normalizationFactor:b/d,0>=b)},"JSV.common.Measurement,~N");c(c$,"factorAllIntegrals",function(a,b){for(var d=0;d<this.size();d++){var c=this.get(d);c.setValue(a*c.getValue())}this.normalizationFactor=b?1:this.normalizationFactor*a},"~N,~B");c(c$,"getBitSet",function(){var a=JU.BS.newN(this.xyCoords.length);if(0==this.size())return a.setBits(0,this.xyCoords.length),a;for(var b=this.size();0<=--b;){var d=this.get(b),c=JSV.common.Coordinate.getNearestIndexForX(this.xyCoords,d.getXVal()),d=
JSV.common.Coordinate.getNearestIndexForX(this.xyCoords,d.getXVal2());a.setBits(Math.min(c,d),Math.max(c,d))}return a});e(c$,"getMeasurementListArray",function(){for(var a=Array(this.size()),b=0,d=this.size();0<=--d;)a[b++]=[""+b,JU.DF.formatDecimalDbl(this.get(d).getXVal(),2),JU.DF.formatDecimalDbl(this.get(d).getXVal2(),2),this.get(d).text];return a},"~S");e(c$,"getMeasurementListArrayReal",function(){for(var a=JU.AU.newDouble2(this.size()),b=0,d=this.size();0<=--d;b++)a[b]=[this.get(d).getXVal(),
this.get(d).getXVal2(),this.get(d).getValue()];return a},"~S");e(c$,"getDataHeader",function(){return JSV.common.IntegralData.$HEADER});c(c$,"shiftY",function(a,b,d,c){b=n(100*(d+c-b)/c);0>a&&(b-=this.percentOffset);0>a?this.update(0,this.percentOffset,b):this.update(0,b,this.percentRange)},"~N,~N,~N,~N");c(c$,"autoIntegrate",function(){null==this.xyCoords&&this.calculateIntegral();if(0!=this.xyCoords.length){this.clear();for(var a=-1,b=0,d=this.xyCoords[this.xyCoords.length-1].getYVal(),c=this.xyCoords.length-
1;0<=--c;){var f=this.xyCoords[c].getYVal();b++;1E-4>f-d&&0>a?f<d&&(d=f,b=0):0>a?(a=c+Math.min(b,20),d=f,b=0):1E-4>f-d?(1==b&&(d=f),20<=b&&(this.addIntegralRegion(this.xyCoords[a].getXVal(),this.xyCoords[c].getXVal()),a=-1,d=f,b=0)):(b=0,d=f)}0<this.spec.nH&&this.factorAllIntegrals(this.spec.nH/this.percentRange,!1)}});c(c$,"getInfo",function(a){a.put("offset",Double.$valueOf(this.myParams.integralOffset));a.put("range",Double.$valueOf(this.myParams.integralRange));a.put("normalizationFactor",Double.$valueOf(this.normalizationFactor));
a.put("integralTotal",Double.$valueOf(this.integralTotal));aa(this,JSV.common.IntegralData,"getInfo",[a])},"java.util.Map");c(c$,"setMinimumIntegral",function(a){for(var b=this.size();0<=--b;)this.get(b).getValue()<a&&this.remove(b)},"~N");R();c$=A(JSV.common.IntegralData,"IntMode",Enum);c$.getMode=c(c$,"getMode",function(a){for(var b,d=0,c=JSV.common.IntegralData.IntMode.values();d<c.length&&((b=c[d])||1);d++)if(a.startsWith(b.name()))return b;return JSV.common.IntegralData.IntMode.ON},"~S");k(c$,
"OFF",0,[]);k(c$,"ON",1,[]);k(c$,"TOGGLE",2,[]);k(c$,"AUTO",3,[]);k(c$,"LIST",4,[]);k(c$,"MARK",5,[]);k(c$,"MIN",6,[]);k(c$,"UPDATE",7,[]);c$=Q();B(c$,"DEFAULT_OFFSET",30,"DEFAULT_RANGE",50,"DEFAULT_MINY",0.1);c$.c=c$.prototype.c=new JSV.common.IntegralComparator;c$.$HEADER=c$.prototype.$HEADER=["peak","start/ppm","end/ppm","value"]}),m("JSV.common"),u(["JSV.common.MeasurementData"],"JSV.common.PeakData",["java.lang.Double","JU.DF","JSV.common.Coordinate","$.PeakPick"],function(){c$=q(function(){this.maxY=
this.minY=this.thresh=0;s(this,arguments)},JSV.common,"PeakData",JSV.common.MeasurementData);c(c$,"getThresh",function(){return this.thresh});e(c$,"getDataHeader",function(){return this.spec.isHNMR()?JSV.common.PeakData.HNMR_HEADER:["peak",this.spec.getXUnits(),this.spec.getYUnits()]});e(c$,"getMeasurementListArray",function(){for(var a=Array(this.size()),b=[-1E100,1E100,1E100],d,c=0,f=this.size();0<=--f;c++)d=this.spec.getPeakListArray(this.get(f),b,this.maxY),a[c]=2==d.length?[""+(c+1),JU.DF.formatDecimalDbl(d[0],
2),JU.DF.formatDecimalDbl(d[1],4)]:[""+(c+1),JU.DF.formatDecimalDbl(d[0],4),JU.DF.formatDecimalDbl(d[1],4),JU.DF.formatDecimalDbl(d[2],2),0==d[3]?"":JU.DF.formatDecimalDbl(d[3],2),0==d[4]?"":JU.DF.formatDecimalDbl(d[4],2),0==d[5]?"":JU.DF.formatDecimalDbl(d[5],2)];return a},"~S");e(c$,"getMeasurementListArrayReal",function(){for(var a=ca(this.size(),0),b=[-1E100,1E100,1E100],d=0,c=this.size();0<=--c;d++)a[d]=this.spec.getPeakListArray(this.get(c),b,this.maxY);return a},"~S");c(c$,"getInfo",function(a){a.put("interpolation",
this.myParams.peakListInterpolation);a.put("threshold",Double.$valueOf(this.myParams.peakListThreshold));aa(this,JSV.common.PeakData,"getInfo",[a])},"java.util.Map");c(c$,"setPeakList",function(a,b,d){this.precision=-2147483648==b?this.spec.getDefaultUnitPrecision():b;var c=this.spec.getXYCoords();if(!(3>c.length)){this.clear();null!=a&&(this.myParams.peakListInterpolation=a.peakListInterpolation,this.myParams.peakListThreshold=a.peakListThreshold);a=this.myParams.peakListInterpolation.equals("parabolic");
var f=this.spec.isInverted();this.minY=d.minYOnScale;this.maxY=d.maxYOnScale;var e=d.minXOnScale;d=d.maxXOnScale;this.thresh=this.myParams.peakListThreshold;Double.isNaN(this.thresh)&&(this.thresh=this.myParams.peakListThreshold=(this.minY+this.maxY)/2);var j=0,p=[c[0].getYVal(),j=c[1].getYVal(),0],l=0;if(f)for(f=2;f<c.length;f++){var k=p[f%3]=c[f].getYVal();if(j<this.thresh&&(p[(f-2)%3]>j&&j<k)&&(j=a?JSV.common.Coordinate.parabolicInterpolation(c,f-1):c[f-1].getXVal(),j>=e||j<=d))if(j=(new JSV.common.PeakPick).setValue(j,
k,this.spec,null,0),this.addLast(j),100==++l)break;j=k}else for(f=2;f<c.length;f++){k=p[f%3]=c[f].getYVal();if(j>this.thresh&&(p[(f-2)%3]<j&&j>k)&&(j=a?JSV.common.Coordinate.parabolicInterpolation(c,f-1):c[f-1].getXVal(),j>=e&&j<=d&&(j=(new JSV.common.PeakPick).setValue(j,k,this.spec,JU.DF.formatDecimalDbl(j,b),j),this.addLast(j),100==++l)))break;j=k}}},"JSV.common.Parameters,~N,JSV.common.ScaleData");c$.HNMR_HEADER=c$.prototype.HNMR_HEADER="peak shift/ppm intens shift/hz diff/hz 2-diff 3-diff".split(" ")}),
m("JSV.common"),u(["JSV.common.Coordinate","$.ScriptToken"],"JSV.common.PlotWidget",null,function(){c$=q(function(){this.yPixel1=this.xPixel1=this.yPixel0=this.xPixel0=0;this.is2Donly=this.is2D=this.isXtype=this.isPinOrCursor=this.isPin=!1;this.isEnabled=!0;this.isVisible=!1;this.color=this.name=null;s(this,arguments)},JSV.common,"PlotWidget",JSV.common.Coordinate);M(c$,function(){this.color=JSV.common.ScriptToken.PLOTCOLOR});e(c$,"toString",function(){return this.name+(!this.isPinOrCursor?""+this.xPixel0+
" "+this.yPixel0+" / "+this.xPixel1+" "+this.yPixel1:" x="+this.getXVal()+"/"+this.xPixel0+" y="+this.getYVal()+"/"+this.yPixel0)});w(c$,function(a){I(this,JSV.common.PlotWidget,[]);this.name=a;this.isPin="p"==a.charAt(0);this.isPinOrCursor="z"!=a.charAt(0);this.isXtype=0<=a.indexOf("x");this.is2Donly=(this.is2D=0<=a.indexOf("2D"))&&"p"==a.charAt(0)},"~S");c(c$,"selected",function(a,b){return this.isVisible&&5>Math.abs(a-this.xPixel0)&&5>Math.abs(b-this.yPixel0)},"~N,~N");c(c$,"setX",function(a,b){this.setXVal(a);
this.xPixel0=this.xPixel1=b},"~N,~N");c(c$,"setY",function(a,b){this.setYVal(a);this.yPixel0=this.yPixel1=b},"~N,~N");c(c$,"getValue",function(){return this.isXtype?this.getXVal():this.getYVal()});c(c$,"setEnabled",function(a){this.isEnabled=a},"~B")}),m("JSV.common"),u(null,"JSV.common.ScaleData",["java.lang.Double","JSV.common.Coordinate"],function(){c$=q(function(){this.maxX=this.minX=this.pointCount=this.endDataPointIndex=this.startDataPointIndex=this.initMaxY=this.initMinY=this.initMaxYOnScale=
this.initMinYOnScale=0;this.firstX=NaN;this.specShift=this.maxXOnScale=this.minXOnScale=0;this.minorTickCounts=this.steps=this.exportPrecision=this.precision=null;this.maxY=this.minY=this.maxYOnScale=this.minYOnScale=0;this.isShiftZoomedY=!1;this.spectrumScaleFactor=1;this.spectrumYRef=0;this.userYFactor=1;this.yFactorForScale=this.xFactorForScale=this.maxY2D=this.minY2D=this.firstY=0;s(this,arguments)},JSV.common,"ScaleData");M(c$,function(){this.precision=H(2,0);this.exportPrecision=H(2,0);this.steps=
ca(2,0);this.minorTickCounts=H(2,0)});w(c$,function(){});w(c$,function(a,b){this.startDataPointIndex=a;this.endDataPointIndex=b;this.pointCount=this.endDataPointIndex-this.startDataPointIndex+1},"~N,~N");w(c$,function(a,b,d,c,f){this.minX=JSV.common.Coordinate.getMinX(a,b,d);this.maxX=JSV.common.Coordinate.getMaxX(a,b,d);this.minY=JSV.common.Coordinate.getMinY(a,b,d);0<this.minY&&!c&&(this.minY=0);this.maxY=JSV.common.Coordinate.getMaxY(a,b,d);this.setScale(c,f)},"~A,~N,~N,~B,~B");c(c$,"setScale",
function(a,b){this.setXScale();a||(this.maxXOnScale+=this.steps[0]/2);this.setYScale(this.minY,this.maxY,!0,b)},"~B,~B");c(c$,"setXScale",function(){var a=this.setScaleParams(this.minX,this.maxX,0);this.firstX=Math.floor(this.minX/a)*a;1E-4<Math.abs((this.minX-this.firstX)/a)&&(this.firstX+=a);this.minXOnScale=this.minX;this.maxXOnScale=this.maxX});c(c$,"isYZeroOnScale",function(){return this.minYOnScale<this.spectrumYRef&&this.maxYOnScale>this.spectrumYRef});c(c$,"setYScale",function(a,b,d,c){0==
a&&0==b&&(b=1);this.isShiftZoomedY&&(a=this.minYOnScale,b=this.maxYOnScale);var f=this.setScaleParams(a,b,1),e=c?f/2:f/4;c=c?f/4:f/2;this.isShiftZoomedY||(this.minYOnScale=0==a?0:d?e*Math.floor(a/e):a,this.maxYOnScale=d?c*Math.ceil(1.05*b/c):b);this.firstY=0==a?0:Math.floor(a/e)*e;if(0>this.minYOnScale&&0<this.maxYOnScale)for(this.firstY=0;this.firstY-f>this.minYOnScale;)this.firstY-=f;else 0!=this.minYOnScale&&1E-4<Math.abs((a-this.firstY)/e)&&(this.firstY+=e);d&&(this.initMinYOnScale=this.minYOnScale,
this.initMaxYOnScale=this.maxYOnScale,this.initMinY=a,this.initMaxY=b)},"~N,~N,~B,~B");c(c$,"scale2D",function(a){var b=this.maxY-this.minY;1==a?(this.maxY=this.initMaxY,this.minY=this.initMinY):this.maxY=this.minY+b/a},"~N");c(c$,"setXRange",function(a,b){this.minX=a;this.maxX=b;this.setXScale()},"~N,~N");c$.getXRange=c(c$,"getXRange",function(a,b,d,c,f,e,j,k){for(var l=0,m=0,l=f;l<=e;l++)if(f=b[l].getXVal(),f>=d){j[a]=l;break}for(;l<=e&&!(f=b[l].getXVal(),m++,f>=c);l++);k[a]=l-1;return m},"~N,~A,~N,~N,~N,~N,~A,~A");
c(c$,"setScaleParams",function(a,b,d){a=b==a?1:Math.abs(b-a)/14;var c=Math.log10(Math.abs(a));b=n(Math.floor(c));this.exportPrecision[d]=b;this.precision[d]=0>=b?Math.min(8,1-b):3<b?-2:0;a=0;for(c=Math.pow(10,c-b);c>JSV.common.ScaleData.NTICKS[a];)a++;this.steps[d]=Math.pow(10,b)*JSV.common.ScaleData.NTICKS[a];c=Math.log10(Math.abs(100010*this.steps[d]));b=c-Math.floor(c);for(a=c=0;a<JSV.common.ScaleData.NTICKS.length;a++)if(0.001>Math.abs(b-JSV.common.ScaleData.LOGTICKS[a])){c=JSV.common.ScaleData.NTICKS[a];
break}this.minorTickCounts[d]=c;return this.steps[d]},"~N,~N,~N");c(c$,"isInRangeX",function(a){return a>=this.minX&&a<=this.maxX},"~N");c(c$,"addSpecShift",function(a){this.specShift+=a;this.minX+=a;this.maxX+=a;this.minXOnScale+=a;this.maxXOnScale+=a;this.firstX+=a},"~N");c(c$,"getInfo",function(a){a.put("specShift",Double.$valueOf(this.specShift));a.put("minX",Double.$valueOf(this.minX));a.put("maxX",Double.$valueOf(this.maxX));a.put("minXOnScale",Double.$valueOf(this.minXOnScale));a.put("maxXOnScale",
Double.$valueOf(this.maxXOnScale));a.put("minY",Double.$valueOf(this.minY));a.put("maxY",Double.$valueOf(this.maxY));a.put("minYOnScale",Double.$valueOf(this.minYOnScale));a.put("maxYOnScale",Double.$valueOf(this.maxYOnScale));a.put("minorTickCountX",Integer.$valueOf(this.minorTickCounts[0]));a.put("xStep",Double.$valueOf(this.steps[0]));return a},"java.util.Map");c(c$,"setMinMax",function(a,b,d,c){this.minX=a;this.maxX=b;this.minY=d;this.maxY=c},"~N,~N,~N,~N");c(c$,"toX",function(a,b,d){return this.toXScaled(a,
b,d,this.xFactorForScale)},"~N,~N,~B");c(c$,"toX0",function(a,b,d,c){return this.toXScaled(a,d,c,(this.maxXOnScale-this.minXOnScale)/(d-b))},"~N,~N,~N,~B");c(c$,"toXScaled",function(a,b,d,c){return d?this.maxXOnScale-(b-a)*c:this.minXOnScale+(b-a)*c},"~N,~N,~B,~N");c(c$,"toPixelX",function(a,b,d,c){return this.toPixelXScaled(a,b,d,c,this.xFactorForScale)},"~N,~N,~N,~B");c(c$,"toPixelX0",function(a,b,d,c){return this.toPixelXScaled(a,b,d,c,(this.maxXOnScale-this.minXOnScale)/(d-b))},"~N,~N,~N,~B");
c(c$,"toPixelXScaled",function(a,b,d,c,f){a=n((a-this.minXOnScale)/f);return c?b+a:d-a},"~N,~N,~N,~B,~N");c(c$,"toY",function(a,b){return this.maxYOnScale+(b-a)*this.yFactorForScale},"~N,~N");c(c$,"toY0",function(a,b,d){return Math.max(this.minYOnScale,Math.min(this.maxYOnScale+(b-a)*((this.maxYOnScale-this.minYOnScale)/(d-b)),this.maxYOnScale))},"~N,~N,~N");c(c$,"toPixelY",function(a,b){return Double.isNaN(a)?-2147483648:b-n(((a-this.spectrumYRef)*this.userYFactor+this.spectrumYRef-this.minYOnScale)/
this.yFactorForScale)},"~N,~N");c(c$,"toPixelY0",function(a,b,d){return n(b+(this.maxYOnScale-a)/((this.maxYOnScale-this.minYOnScale)/(d-b)))},"~N,~N,~N");c(c$,"setXYScale",function(a,b,d){var c=this.spectrumYRef,f=this.spectrumScaleFactor,e=1!=f||this.isShiftZoomedY,j=e?this.initMinYOnScale:this.minY,k=e?this.initMaxYOnScale:this.maxY;e&&c<j&&(c=j);e&&c>k&&(c=k);this.setYScale((j-c)/f+c,(k-c)/f+c,1==f,d);this.xFactorForScale=(this.maxXOnScale-this.minXOnScale)/(a-1);this.yFactorForScale=(this.maxYOnScale-
this.minYOnScale)/(b-1)},"~N,~N,~B");c$.copyScaleFactors=c(c$,"copyScaleFactors",function(a,b){for(var d=0;d<a.length;d++)b[d].spectrumScaleFactor=a[d].spectrumScaleFactor,b[d].spectrumYRef=a[d].spectrumYRef,b[d].userYFactor=a[d].userYFactor,b[d].specShift=a[d].specShift,b[d].isShiftZoomedY=a[d].isShiftZoomedY},"~A,~A");c$.copyYScales=c(c$,"copyYScales",function(a,b){for(var d=0;d<a.length;d++)b[d].initMinYOnScale=a[d].initMinYOnScale,b[d].initMaxYOnScale=a[d].initMaxYOnScale,b[d].minY=a[d].minY,
b[d].maxY=a[d].maxY,a[d].isShiftZoomedY&&(b[d].isShiftZoomedY=!0,b[d].minYOnScale=a[d].minYOnScale,b[d].maxYOnScale=a[d].maxYOnScale)},"~A,~A");c$.setDataPointIndices=c(c$,"setDataPointIndices",function(a,b,d,c,f,e){for(var j=0,k=a.size(),l=0;l<k;l++){var m=a.get(l).getXYCoords();JSV.common.ScaleData.getXRange(l,m,b,d,0,m.length-1,f,e)>=c&&j++}return j==k},"JU.List,~N,~N,~N,~A,~A");c$.fixScale=c(c$,"fixScale",function(a){if(!a.isEmpty())for(;;){for(var b,d=a.entrySet().iterator();d.hasNext()&&((b=
d.next())||1);){var c=b.getValue(),f=c.indexOf("E");0<=f&&(c=c.substring(0,f));if(0>c.indexOf(".")||!c.endsWith("0")&&!c.endsWith("."))return}for(d=a.entrySet().iterator();d.hasNext()&&((b=d.next())||1);)c=b.getValue(),f=c.indexOf("E"),0<=f?b.setValue(c.substring(0,f-1)+c.substring(f)):b.setValue(c.substring(0,c.length-1))}},"java.util.Map");c(c$,"scaleBy",function(a){if(this.isShiftZoomedY){var b=this.isYZeroOnScale()?this.spectrumYRef:(this.minYOnScale+this.maxYOnScale)/2;this.minYOnScale=b-(b-
this.minYOnScale)/a;this.maxYOnScale=b-(b-this.maxYOnScale)/a}else this.spectrumScaleFactor*=a},"~N");B(c$,"NTICKS",[2,5,10,10]);c$.LOGTICKS=c$.prototype.LOGTICKS=[Math.log10(2),Math.log10(5),0,1]}),m("JSV.common"),u(null,"JSV.common.ViewData",["JSV.common.Coordinate","$.ScaleData"],function(){c$=q(function(){this.thisScale=this.scaleData=null;this.iThisScale=this.nSpectra=0;s(this,arguments)},JSV.common,"ViewData");c(c$,"getScaleData",function(){return this.scaleData});c(c$,"getScale",function(){return this.thisScale});
w(c$,function(a,b,d,c,f,e,j){this.nSpectra=j?1:a.size();this.scaleData=Array(this.nSpectra);for(j=0;j<this.nSpectra;j++)this.scaleData[j]=new JSV.common.ScaleData(c[j],f[j]);this.init(a,b,d,e)},"JU.List,~N,~N,~A,~A,~B,~B");w(c$,function(a,b,d,c){this.nSpectra=a.size();var f=a.get(0).getXYCoords().length;this.scaleData=Array(1);this.scaleData[0]=new JSV.common.ScaleData(0,f-1);this.init(a,b,d,c)},"JU.List,~N,~N,~B");c(c$,"init",function(a,b,d,c){this.thisScale=this.scaleData[this.iThisScale=0];for(var f=
0;f<this.scaleData.length;f++)this.scaleData[f].userYFactor=a.get(f).getUserYFactor(),this.scaleData[f].spectrumYRef=a.get(f).getYRef();this.resetScaleFactors();var e=JSV.common.Coordinate.getMinX(a,this),j=JSV.common.Coordinate.getMaxX(a,this),k=JSV.common.Coordinate.getMinYUser(a,this),l=JSV.common.Coordinate.getMaxYUser(a,this);b!=d&&(k=b,l=d,k>l&&(f=k,k=l,l=f));a=a.get(0).isInverted();for(f=0;f<this.scaleData.length;f++)this.scaleData[f].setMinMax(e,j,k,l),this.scaleData[f].setScale(c,a)},"JU.List,~N,~N,~B");
c(c$,"newSpectrum",function(a){this.init(a,0,0,!1)},"JU.List");c(c$,"setXRangeForSubSpectrum",function(a){this.setXRange(0,a,this.scaleData[0].minX,this.scaleData[0].maxX,0,a.length-1)},"~A");c(c$,"setXRange",function(a,b,d,c,f,e){for(var j=0,k=0,j=f;j<=e;j++)if(f=b[j].getXVal(),f>=d){this.scaleData[a%this.scaleData.length].startDataPointIndex=j;break}for(;j<=e&&!(f=b[j].getXVal(),k++,f>=c);j++);this.scaleData[a%this.scaleData.length].endDataPointIndex=j-1;return k},"~N,~A,~N,~N,~N,~N");c(c$,"getStartingPointIndex",
function(a){return this.scaleData[a%this.scaleData.length].startDataPointIndex},"~N");c(c$,"getEndingPointIndex",function(a){return this.scaleData[a%this.scaleData.length].endDataPointIndex},"~N");c(c$,"areYScalesSame",function(a,b){a%=this.scaleData.length;b%=this.scaleData.length;return this.scaleData[a].minYOnScale==this.scaleData[b].minYOnScale&&this.scaleData[a].maxYOnScale==this.scaleData[b].maxYOnScale},"~N,~N");c(c$,"setScale",function(a,b,d,c){this.iThisScale=a%this.scaleData.length;this.thisScale=
this.scaleData[this.iThisScale];this.thisScale.setXYScale(b,d,c)},"~N,~N,~N,~B");c(c$,"resetScaleFactors",function(){for(var a=0;a<this.scaleData.length;a++)this.scaleData[a].spectrumScaleFactor=1});c(c$,"scaleSpectrum",function(a,b){if(!(0>=b||a>=this.nSpectra))if(-2==a)this.thisScale.scale2D(b);else if(0>a)for(a=0;a<this.scaleData.length;a++)this.scaleData[a].scaleBy(b);else this.scaleData[a%this.scaleData.length].scaleBy(b)},"~N,~N");c(c$,"getNewScales",function(a,b,d,c){if(b)return this.scaleData;
a%=this.scaleData.length;b=(d-this.thisScale.minYOnScale)/(this.thisScale.maxYOnScale-this.thisScale.minYOnScale);c=(c-this.thisScale.minYOnScale)/(this.thisScale.maxYOnScale-this.thisScale.minYOnScale);d=Array(this.scaleData.length);for(var f=0;f<this.scaleData.length;f++)d[f]=0<=a&&f!=a?this.scaleData[f]:new JSV.common.ScaleData;JSV.common.ScaleData.copyScaleFactors(this.scaleData,d);JSV.common.ScaleData.copyYScales(this.scaleData,d);for(f=0;f<this.scaleData.length;f++)0<=a&&f!=a||(d[f].isShiftZoomedY=
!0,d[f].minYOnScale=this.scaleData[f].minYOnScale*(1-b)+b*this.scaleData[f].maxYOnScale,d[f].maxYOnScale=this.scaleData[f].minYOnScale*(1-c)+c*this.scaleData[f].maxYOnScale);return d},"~N,~B,~N,~N")}),m("JSV.common"),c$=q(function(){this.imageableWidth=this.imageableHeight=this.paperWidth=this.paperHeight=this.imageableY=this.imageableX=0;this.layout="landscape";this.position="fit to page";this.showTitle=this.showYScale=this.showXScale=this.showGrid=!0;this.font="Helvetica";this.paper=null;this.asPDF=
!0;this.date=this.title=null;s(this,arguments)},JSV.common,"PrintLayout"),M(c$,function(){this.paperHeight=S(72*Math.min(11,11.69));this.paperWidth=S(72*Math.min(8.5,8.27));this.imageableHeight=this.paperHeight;this.imageableWidth=this.paperWidth}),m("JSV.common"),u(["JSV.common.Measurement"],"JSV.common.PeakPick",null,function(){c$=A(JSV.common,"PeakPick",JSV.common.Measurement);c(c$,"setValue",function(a,b,d,c,f){null==c?(this.set(a,b),this.setPt2(d,!1)):(this.setA(a,b,d,c,!1,!1,0,6),this.value=
f,this.setPt2(this.getXVal(),this.getYVal()));return this},"~N,~N,JSV.common.JDXSpectrum,~S,~N")}),m("JSV.common"),c$=q(function(){this.repaintPending=!1;this.viewer=null;this.n=0;s(this,arguments)},JSV.common,"RepaintManager"),w(c$,function(a){this.viewer=a},"JSV.common.JSViewer"),c(c$,"refresh",function(){this.n++;if(this.repaintPending)return System.out.println("Repaint "+this.n+" skipped"),!1;this.repaintPending=!0;this.viewer.selectedPanel.getPanelData().taintedAll=!0;"undefined"!=typeof Jmol&&
(Jmol._repaint&&this.viewer.applet)&&Jmol._repaint(this.viewer.applet,!1);this.repaintDone();return!0}),c(c$,"repaintDone",function(){this.repaintPending=!1;this.notify()}),m("JSV.source"),u(["JSV.source.JDXHeader"],"JSV.source.JDXSource",["JU.List"],function(){c$=q(function(){this.type=0;this.isCompoundSource=!1;this.jdxSpectra=null;this.errors="";this.filePath=null;this.peakCount=0;this.isView=!1;s(this,arguments)},JSV.source,"JDXSource",JSV.source.JDXHeader);c(c$,"dispose",function(){this.jdxSpectra=
this.headerTable=null});w(c$,function(a,b){I(this,JSV.source.JDXSource,[]);this.type=a;this.setFilePath(b);this.headerTable=new JU.List;this.jdxSpectra=new JU.List;this.isCompoundSource=0!=a},"~N,~S");c(c$,"getJDXSpectrum",function(a){return this.jdxSpectra.size()<=a?null:this.jdxSpectra.get(a)},"~N");c(c$,"addJDXSpectrum",function(a,b,d){null==a&&(a=this.filePath);b.setFilePath(a);a=this.jdxSpectra.size();(0==a||!this.jdxSpectra.get(a-1).addSubSpectrum(b,d))&&this.jdxSpectra.addLast(b)},"~S,JSV.common.JDXSpectrum,~B");
c(c$,"getNumberOfSpectra",function(){return this.jdxSpectra.size()});c(c$,"getSpectra",function(){return this.jdxSpectra});c(c$,"getSpectraAsArray",function(){return null==this.jdxSpectra?null:this.jdxSpectra.toArray()});c(c$,"getErrorLog",function(){return this.errors});c(c$,"setErrorLog",function(a){this.errors=a},"~S");c(c$,"setFilePath",function(a){this.filePath=a},"~S");c(c$,"getFilePath",function(){return this.filePath});c$.createView=c(c$,"createView",function(a){var b=new JSV.source.JDXSource(-2,
"view");b.isView=!0;for(var d=0;d<a.size();d++)b.addJDXSpectrum(a.get(d).getFilePath(),a.get(d),!1);return b},"JU.List");c(c$,"getHeaderRowDataAsArray",function(a,b){null==b&&(b=pa(0,0,null));for(var d=this.getHeaderRowDataAsArray(a,b.length),c=b.length;0<=--c;)d[d.length-b.length+c]=b[c];return d},"~B,~A");B(c$,"TYPE_VIEW",-2,"TYPE_UNKNOWN",-1,"TYPE_SIMPLE",0,"TYPE_BLOCK",1,"TYPE_NTUPLE",2)}),m("JSV.api"),F(JSV.api,"JSVTree"),m("JSV.tree"),u(["JSV.api.JSVTree"],"JSV.tree.SimpleTree",["JSV.common.JSVFileManager",
"$.PanelNode","JSV.tree.SimpleTreeModel","$.SimpleTreeNode","$.SimpleTreePath"],function(){c$=q(function(){this.selectedPath=this.viewer=this.spectraTreeModel=this.rootNode=this.si=null;s(this,arguments)},JSV.tree,"SimpleTree",null,JSV.api.JSVTree);e(c$,"getRootNode",function(){return this.rootNode});w(c$,function(a){this.viewer=a;this.rootNode=new JSV.tree.SimpleTreeNode("Spectra",null);this.spectraTreeModel=new JSV.tree.SimpleTreeModel(this.rootNode)},"JSV.common.JSViewer");c(c$,"valueChanged",
function(){this.viewer.selectedTreeNode(this.getLastSelectedPathComponent())});c(c$,"getLastSelectedPathComponent",function(){return null==this.selectedPath?null:this.selectedPath.getLastPathComponent()});e(c$,"setSelectedPanel",function(a,b){if(null!=b){var d=JSV.common.PanelNode.findNode(b,this.viewer.panelNodes).treeNode;this.setSelectionPath(this.viewer.spectraTree.newTreePath(d.getPath()))}},"JSV.api.ScriptInterface,JSV.api.JSVPanel");c(c$,"setSelectionPath",function(a){this.selectedPath=a;this.valueChanged()},
"JSV.api.JSVTreePath");e(c$,"createTree",function(a,b,d){var c=this.viewer.spectraTree,f=c.getRootNode(),e=this.viewer.panelNodes,j=JSV.common.JSVFileManager.getName(b.getFilePath()),k=new JSV.common.PanelNode(null,j,b,null),l=new JSV.tree.SimpleTreeNode(j,k);k.setTreeNode(l);c.spectraTreeModel.insertNodeInto(l,f,f.getChildCount());f=a.siGetFileCount()+1;a.siSetFileCount(f);for(var m=0;m<d.length;m++){var k=a.siGetNewPanelNode(f+"."+(m+1),j,b,d[m]),n=new JSV.tree.SimpleTreeNode(k.toString(),k);k.setTreeNode(n);
e.addLast(k);c.spectraTreeModel.insertNodeInto(n,l,l.getChildCount())}this.viewer.selectFrameNode(d[0]);return l},"JSV.api.ScriptInterface,JSV.source.JDXSource,~A");e(c$,"setPath",function(a){this.setSelectionPath(a)},"JSV.api.JSVTreePath");c(c$,"newTreePath",function(a){return new JSV.tree.SimpleTreePath(a)},"~A");e(c$,"deleteNodes",function(a){for(var b=0;b<a.size();b++)this.spectraTreeModel.removeNodeFromParent(a.get(b))},"JU.List")}),m("JSV.source"),u(null,"JSV.source.FileReader","java.io.BufferedReader $.StringReader java.lang.Character $.Double $.Exception $.Float java.util.Arrays $.Hashtable $.StringTokenizer JU.BS $.List $.PT $.SB JSV.api.JSVZipReader JSV.common.Coordinate $.JDXSpectrum $.JSVFileManager $.JSViewer $.PeakInfo JSV.exception.JDXSourceException $.JSpecViewException JSV.source.JDXDecompressor $.JDXSource $.JDXSourceStreamTokenizer JSV.util.JSVEscape J.util.Logger".split(" "),
function(){c$=q(function(){this.errorLog=this.t=this.source=null;this.isZipFile=this.done=this.obscure=!1;this.filePath=null;this.loadImaginary=!0;this.blockID=this.nSpec=this.lastSpec=this.firstSpec=0;this.thisModelID=this.piUnitsY=this.piUnitsX=null;this.peakIndex=0;s(this,arguments)},JSV.source,"FileReader");w(c$,function(a,b,d,c,f){System.out.println("FileReader filePath="+a+"<<");a=JU.PT.trimQuotes(a);this.filePath=null!=a&&a.startsWith("http://SIMULATION/MOL=")?"http://SIMULATION/MOL="+Math.abs(a.hashCode()):
a;this.obscure=b;this.firstSpec=c;this.lastSpec=f;this.loadImaginary=d},"~S,~B,~B,~N,~N");c$.createJDXSourceFromStream=c(c$,"createJDXSourceFromStream",function(a,b,d){return JSV.source.FileReader.createJDXSource(JSV.common.JSVFileManager.getBufferedReaderForInputStream(a),"stream",b,d,-1,-1)},"java.io.InputStream,~B,~B");c$.createJDXSource=c(c$,"createJDXSource",function(a,b,d,c,f,e){try{null==a&&(a=JSV.common.JSVFileManager.getBufferedReaderFromName(b,"##TITLE"));a.mark(400);var j=ha(400,"\x00");
a.read(j,0,400);a.reset();var k=String.instantialize(j),l=k.indexOf("#"),m=k.indexOf("<");if(0>l||0<=m&&m<l){var n=k.toLowerCase();n.contains("404")&&System.out.println(n);var n=n.contains("<animl")||n.contains("<!doctype technique")?"AnIML":n.contains("xml-cml")?"CML":null,q=JSV.common.JSViewer.getInterface("JSV.source."+n+"Reader").getSource(b,a);a.close();if(null==q)throw new JSV.exception.JSpecViewException("File type not recognized");return q}return(new JSV.source.FileReader(b,d,c,f,e)).getJDXSource(a)}catch(t){if(v(t,
JSV.exception.JSpecViewException))throw a.close(),new Exception("Error reading JDX format: "+t);throw t;}},"java.io.BufferedReader,~S,~B,~B,~N,~N");c(c$,"getJDXSource",function(a){this.source=new JSV.source.JDXSource(0,this.filePath);this.isZipFile=y(a,JSV.api.JSVZipReader);this.t=new JSV.source.JDXSourceStreamTokenizer(a);this.errorLog=new JU.SB;for(a=null;!this.done&&"##TITLE".equals(this.t.peakLabel());){null!=a&&!this.isZipFile&&this.errorLog.append("Warning - file is a concatenation without LINK record -- does not conform to IUPAC standards!\n");
for(var b=new JSV.common.JDXSpectrum,d=new JU.List;!this.done&&null!=(a=this.t.getLabel())&&!this.isEnd(a);)if(a.equals("##DATATYPE")&&this.t.getValue().toUpperCase().equals("LINK"))this.getBlockSpectra(d),b=null;else if(a.equals("##NTUPLES")||a.equals("##VARNAME"))this.getNTupleSpectra(d,b,a),b=null;else if(0<java.util.Arrays.binarySearch(JSV.source.FileReader.TABULAR_DATA_LABELS,a)){this.setTabularDataType(b,a);if(!this.processTabularData(b,d))throw new JSV.exception.JDXSourceException("Unable to read JDX file");
this.addSpectrum(b,!1);b=null}else if(null==b&&(b=new JSV.common.JDXSpectrum),!JSV.source.FileReader.readDataLabel(b,a,this.t,this.errorLog,this.obscure)){var c=this.t.getValue();JSV.source.FileReader.addHeader(d,this.t.getRawLabel(),c);this.checkCustomTags(b,a,c)}}this.source.setErrorLog(this.errorLog.toString());return this.source},"~O");c(c$,"isEnd",function(a){if(!a.equals("##END"))return!1;this.t.getValue();return!0},"~S");c(c$,"addSpectrum",function(a,b){if(!this.loadImaginary&&a.isImaginary())return J.util.Logger.info("FileReader skipping imaginary spectrum -- use LOADIMAGINARY TRUE to load this spectrum."),
!0;this.nSpec++;if(0<this.firstSpec&&this.nSpec<this.firstSpec)return!0;if(0<this.lastSpec&&this.nSpec>this.lastSpec)return!(this.done=!0);a.setBlockID(this.blockID);this.source.addJDXSpectrum(null,a,b);return!0},"JSV.common.JDXSpectrum,~B");c(c$,"getBlockSpectra",function(a){J.util.Logger.debug("--JDX block start--");for(var b="",d=0==this.source.type,c=!1;null!=(b=this.t.getLabel())&&!b.equals("##TITLE");)d?JSV.source.FileReader.readHeaderLabel(this.source,b,this.t,this.errorLog,this.obscure)||
JSV.source.FileReader.addHeader(a,this.t.getRawLabel(),this.t.getValue()):this.t.getValue(),b.equals("##BLOCKS")&&100<JU.PT.parseInt(this.t.getValue())&&0>=this.firstSpec&&(c=!0);if(!"##TITLE".equals(b))throw new JSV.exception.JSpecViewException("Unable to read block source");d&&this.source.setHeaderTable(a);this.source.type=1;this.source.isCompoundSource=!0;d=new JSV.common.JDXSpectrum;a=new JU.List;JSV.source.FileReader.readDataLabel(d,b,this.t,this.errorLog,this.obscure);try{for(var f;null!=(f=
this.t.getLabel());){if("##END".equals(b)&&this.isEnd(f)){J.util.Logger.debug("##END= "+this.t.getValue());break}b=f;if(0<java.util.Arrays.binarySearch(JSV.source.FileReader.TABULAR_DATA_LABELS,b)){if(this.setTabularDataType(d,b),!this.processTabularData(d,a))throw new JSV.exception.JDXSourceException("Unable to read Block Source");}else{if(b.equals("##DATATYPE")&&this.t.getValue().toUpperCase().equals("LINK"))this.getBlockSpectra(a),b=d=null;else if(b.equals("##NTUPLES")||b.equals("##VARNAME"))this.getNTupleSpectra(a,
d,b),d=null,b="";else if(b.equals("##JCAMPCS")){for(;!(b=this.t.getLabel()).equals("##TITLE");)this.t.getValue();d=null}else this.t.getValue();if(this.done)break;if(null==d){d=new JSV.common.JDXSpectrum;a=new JU.List;if(""===b)continue;if(null==b){b="##END";continue}}if(!JSV.source.FileReader.readDataLabel(d,b,this.t,this.errorLog,this.obscure))if(this.isEnd(b)){if(0<d.getXYCoords().length&&!this.addSpectrum(d,c))return this.source;d=new JSV.common.JDXSpectrum;a=new JU.List;this.t.getValue()}else{var e=
this.t.getValue();JSV.source.FileReader.addHeader(a,this.t.getRawLabel(),e);this.checkCustomTags(d,b,e)}}}}catch(j){if(v(j,java.util.NoSuchElementException))throw new JSV.exception.JSpecViewException("Unable to Read Block Source");v(j,JSV.exception.JSpecViewException);throw j;}this.addErrorLogSeparator();this.source.setErrorLog(this.errorLog.toString());J.util.Logger.debug("--JDX block end--");return this.source},"JU.List");c(c$,"checkCustomTags",function(a,b,d){b="##$MODELS ##$PEAKS  ##$SIGNALS".indexOf(b);
switch(b){default:return!1;case 0:return this.thisModelID=JU.PT.getQuotedAttribute(d,"id"),!0;case 10:case 20:return this.peakIndex=this.source.peakCount,this.source.peakCount+=this.readPeaks(a,d,20==b),!0}},"JSV.common.JDXSpectrum,~S,~S");c(c$,"addErrorLogSeparator",function(){0<this.errorLog.length()&&this.errorLog.lastIndexOf("=====================\n")!=this.errorLog.length()-22&&this.errorLog.append("=====================\n")});c(c$,"getNTupleSpectra",function(a,b,d){var c=[1.7976931348623157E308,
4.9E-324];this.blockID=Math.random();0<this.firstSpec&&(b.numDim=1);var f=d.equals("##VARNAME");f||(d="",this.t.getValue());var e=new java.util.Hashtable,j=Array(2);0==this.source.type&&(this.source.type=2,this.source.isCompoundSource=!0,this.source.setHeaderTable(a));for(;!(d=f?d:this.t.getLabel()).equals("##PAGE");){for(var f=!1,k=new java.util.StringTokenizer(this.t.getValue(),","),l=new JU.List;k.hasMoreTokens();)l.addLast(k.nextToken().trim());e.put(d,l)}f=e.get("##SYMBOL");if(!d.equals("##PAGE"))throw new JSV.exception.JSpecViewException("Error Reading NTuple Source");
for(var k=this.t.getValue(),l=null,m=!0;!this.done;){if((d=this.t.getLabel()).equals("##ENDNTUPLES")){this.t.getValue();break}if(d.equals("##PAGE"))k=this.t.getValue();else{if(null==l&&(l=new JSV.common.JDXSpectrum,b.copyTo(l),l.setTitle(b.getTitle()),!l.is1D())){var n=k.indexOf("=");if(0<=n)try{l.setY2D(Double.parseDouble(k.substring(n+1).trim()));var q=k.substring(0,n).trim(),t=f.indexOf(q);0<=t&&l.setY2DUnits(e.get("##UNITS").get(t))}catch(r){if(!v(r,Exception))throw r;}}n=new JU.List;for(l.setHeaderTable(n);!d.equals("##DATATABLE");)JSV.source.FileReader.addHeader(n,
this.t.getRawLabel(),this.t.getValue()),d=this.t.getLabel();d=!0;t=this.t.flushLine();0<t.trim().indexOf("PEAKS")&&(d=!1);var s=t.indexOf("("),u=t.lastIndexOf(")");if(-1==s||-1==u)throw new JSV.exception.JDXSourceException("Variable List not Found");s=t.substring(s,u+1);for(t=u=0;t<f.size();t++){var w=f.get(t).trim();-1!=s.indexOf(w)&&(j[u++]=w);if(2==u)break}this.setTabularDataType(l,"##"+(d?"XYDATA":"PEAKTABLE"));if(!this.readNTUPLECoords(l,e,j,c))throw new JSV.exception.JDXSourceException("Unable to read Ntuple Source");
l.nucleusX.equals("?")||(b.nucleusX=l.nucleusX);b.nucleusY=l.nucleusY;b.freq2dX=l.freq2dX;b.freq2dY=l.freq2dY;b.y2DUnits=l.y2DUnits;for(t=0;t<a.size();t++)d=a.get(t),s=JSV.source.JDXSourceStreamTokenizer.cleanLabel(d[0]),!s.equals("##TITLE")&&(!s.equals("##DATACLASS")&&!s.equals("##NTUPLES"))&&n.addLast(d);this.addSpectrum(l,!m);m=!1;l=null}}this.addErrorLogSeparator();this.source.setErrorLog(this.errorLog.toString());J.util.Logger.info("NTUPLE MIN/MAX Y = "+c[0]+" "+c[1]);return this.source},"JU.List,JSV.source.JDXDataObject,~S");
c(c$,"readPeaks",function(a,b,d){var c=new JU.List,f=new java.io.BufferedReader(new java.io.StringReader(b));try{b=d?1:0;System.out.println("offset is "+b+" isSignals="+d);var e=d?"Signals":"Peaks";d=d?"<Signal":"<PeakData";var j=this.discardUntil(f,e);0>j.indexOf("<"+e)&&(j=this.discardUntil(f,"<"+e));if(0>j.indexOf("<"+e))return 0;var k=this.getPeakFilePath(),l=this.getQuotedAttribute(j,"model"),l=" model="+this.escape(null==l?this.thisModelID:l),m=this.getQuotedAttribute(j,"type");"HNMR".equals(m)?
m="1HNMR":"CNMR".equals(m)&&(m="13CNMR");m=null==m?"":" type="+this.escape(m);this.piUnitsX=this.getQuotedAttribute(j,"xLabel");this.piUnitsY=this.getQuotedAttribute(j,"yLabel");for(var n=new java.util.Hashtable,q=new JU.List;null!=(j=f.readLine())&&!(j=j.trim()).startsWith("</"+e);)if(j.startsWith(d)){this.info(j);var r=this.getQuotedAttribute(j,"title");null==r?(r="1HNMR"===m?"atom%S%: %ATOMS%; integration: %NATOMS%":"",r=" title="+this.escape(r)):r="";var s="<PeakData "+k+' index="%INDEX%"'+r+
m+(null==this.getQuotedAttribute(j,"model")?l:"")+" "+j.substring(d.length).trim(),u=this.getQuotedAttribute(s,"atoms");null!=u&&(s=this.simpleReplace(s,'atoms="'+u+'"','atoms="%ATOMS%"'));var w=S(100*this.parseFloatStr(this.getQuotedAttribute(j,"xMin")))+"_"+S(100*this.parseFloatStr(this.getQuotedAttribute(j,"xMax"))),x=n.get(w);null==x&&(x=[s,null==u?null:new JU.BS],n.put(w,x),q.addLast(x));var y=x[1];null!=u&&null!=y&&(u=u.$replace(","," "),y.or(this.unescapeBitSet("({"+u+"})")),System.out.println("bs is  "+
y))}for(var j=0,z=q.size(),k=0;k<z;k++){x=q.get(k);s=x[0];s=this.simpleReplace(s,"%INDEX%",""+this.getPeakIndex());y=x[1];if(null!=y){System.out.println("bs "+k+" is "+y);for(var l="",A=y.nextSetBit(0);0<=A;A=y.nextSetBit(A+1))l+=","+(A+b);var B=y.cardinality(),j=j+B,s=this.simpleReplace(s,"%ATOMS%",l.substring(1)),s=this.simpleReplace(s,"%S%",1==B?"":"s"),s=this.simpleReplace(s,"%NATOMS%",""+B)}this.info("JSpecView using "+s);this.add(c,s)}this.setSpectrumPeaks(a,c,j);return z}catch(C){if(v(C,Exception))return 0;
throw C;}},"JSV.common.JDXSpectrum,~S,~B");c(c$,"add",function(a,b){a.addLast(new JSV.common.PeakInfo(b))},"JU.List,~S");c(c$,"info",function(a){J.util.Logger.info(a)},"~S");c(c$,"unescapeBitSet",function(a){var b,d;if(null==a||4>(d=(a=a.trim()).length)||a.equalsIgnoreCase("({null})")||"("!=(b=a.charAt(0))&&"["!=b||a.charAt(d-1)!=("("==b?")":"]")||"{"!=a.charAt(1)||a.indexOf("}")!=d-2)return null;for(var c=d-=2;2<=--c;)if(!Character.isDigit(b=a.charAt(c))&&" "!=b&&"\t"!=b&&":"!=b)return null;for(var f=
d;Character.isDigit(a.charAt(--f)););if(++f==d)f=0;else try{f=Integer.parseInt(a.substring(f,d))}catch(e){if(v(e,NumberFormatException))return null;throw e;}for(var j=JU.BS.newN(f),k=f=-1,l=-2,c=2;c<=d;c++)switch(b=a.charAt(c)){case "\t":case " ":case "}":if(0>l)break;if(l<f)return null;f=l;0>k&&(k=l);j.setBits(k,l+1);k=-1;l=-2;break;case ":":k=f=l;l=-2;break;default:Character.isDigit(b)&&(0>l&&(l=0),l=10*l+(b.charCodeAt(0)-48))}return 0<=k?null:j},"~S");c(c$,"parseFloatStr",function(a){return JU.PT.parseFloat(a)},
"~S");c(c$,"simpleReplace",function(a,b,d){return JU.PT.simpleReplace(a,b,d)},"~S,~S,~S");c(c$,"escape",function(a){return JSV.util.JSVEscape.eS(a)},"~S");c(c$,"getQuotedAttribute",function(a,b){return JU.PT.getQuotedAttribute(a,b)},"~S,~S");c(c$,"getPeakFilePath",function(){return" file="+JSV.util.JSVEscape.eS(JU.PT.trimQuotes(this.filePath).$replace("\\","/"))});c(c$,"setSpectrumPeaks",function(a,b,d){a.setPeakList(b,this.piUnitsX,this.piUnitsY);a.setNHydrogens(d)},"JSV.common.JDXSpectrum,JU.List,~N");
c(c$,"discardUntil",function(a,b){for(var d;null!=(d=a.readLine())&&0>d.indexOf("<"+b)&&0>d.indexOf("##"););return d},"java.io.BufferedReader,~S");c(c$,"getPeakIndex",function(){return++this.peakIndex});c$.readDataLabel=c(c$,"readDataLabel",function(a,b,d,c,f){if(JSV.source.FileReader.readHeaderLabel(a,b,d,c,f))return!0;if(b.equals("##MINX")||b.equals("##MINY")||b.equals("##MAXX")||b.equals("##MAXY")||b.equals("##FIRSTY")||b.equals("##DELTAX")||b.equals("##DATACLASS"))return d.getValue(),!0;if(b.equals("##FIRSTX"))return a.fileFirstX=
Double.parseDouble(d.getValue()),!0;if(b.equals("##LASTX"))return a.fileLastX=Double.parseDouble(d.getValue()),!0;if(b.equals("##NPOINTS"))return a.nPointsFile=Integer.parseInt(d.getValue()),!0;if(b.equals("##XFACTOR"))return a.xFactor=Double.parseDouble(d.getValue()),!0;if(b.equals("##YFACTOR"))return a.yFactor=Double.parseDouble(d.getValue()),!0;if(b.equals("##XUNITS"))return a.setXUnits(d.getValue()),!0;if(b.equals("##YUNITS"))return a.setYUnits(d.getValue()),!0;if(b.equals("##XLABEL"))return a.setXLabel(d.getValue()),
!1;if(b.equals("##YLABEL"))return a.setYLabel(d.getValue()),!1;if(b.equals("##NUMDIM"))return a.numDim=Integer.parseInt(d.getValue()),!0;if(b.equals("##.OBSERVEFREQUENCY"))return a.observedFreq=Double.parseDouble(d.getValue()),!0;if(b.equals("##.OBSERVENUCLEUS"))return a.setObservedNucleus(d.getValue()),!0;if(b.equals("##$OFFSET")&&0!=a.shiftRefType)return 1.7976931348623157E308==a.offset&&(a.offset=Double.parseDouble(d.getValue())),a.dataPointNum=1,a.shiftRefType=1,!1;if(b.equals("##$REFERENCEPOINT")&&
0!=a.shiftRefType)return a.offset=Double.parseDouble(d.getValue()),a.dataPointNum=1,a.shiftRefType=2,!1;if(b.equals("##.SHIFTREFERENCE")){b=d.getValue();if(!a.dataType.toUpperCase().contains("SPECTRUM"))return!0;b=new java.util.StringTokenizer(b,",");if(4!=b.countTokens())return!0;try{b.nextToken(),b.nextToken(),a.dataPointNum=Integer.parseInt(b.nextToken().trim()),a.offset=Double.parseDouble(b.nextToken().trim())}catch(e){if(v(e,NumberFormatException)||v(e,java.util.NoSuchElementException))return!0;
throw e;}0>=a.dataPointNum&&(a.dataPointNum=1);a.shiftRefType=0;return!0}return!1},"JSV.source.JDXDataObject,~S,JSV.source.JDXSourceStreamTokenizer,JU.SB,~B");c$.readHeaderLabel=c(c$,"readHeaderLabel",function(a,b,d,c,f){return b.equals("##TITLE")?(b=d.getValue(),a.setTitle(f||null==b||b.equals("")?"Unknown":b),!0):b.equals("##JCAMPDX")?(b=d.getValue(),a.jcampdx=b,a=JU.PT.parseFloat(b),(6<=a||Float.isNaN(a))&&null!=c&&c.append("Warning: JCAMP-DX version may not be fully supported: "+b+"\n"),!0):b.equals("##ORIGIN")?
(b=d.getValue(),a.origin=null!=b&&!b.equals("")?b:"Unknown",!0):b.equals("##OWNER")?(b=d.getValue(),a.owner=null!=b&&!b.equals("")?b:"Unknown",!0):b.equals("##DATATYPE")?(a.dataType=d.getValue(),!0):b.equals("##LONGDATE")?(a.longDate=d.getValue(),!0):b.equals("##DATE")?(a.date=d.getValue(),!0):b.equals("##TIME")?(a.time=d.getValue(),!0):!1},"JSV.source.JDXHeader,~S,JSV.source.JDXSourceStreamTokenizer,JU.SB,~B");c(c$,"setTabularDataType",function(a,b){b.equals("##PEAKASSIGNMENTS")?a.setDataClass("PEAKASSIGNMENTS"):
b.equals("##PEAKTABLE")?a.setDataClass("PEAKTABLE"):b.equals("##XYDATA")?a.setDataClass("XYDATA"):b.equals("##XYPOINTS")&&a.setDataClass("XYPOINTS")},"JSV.source.JDXDataObject,~S");c(c$,"processTabularData",function(a,b){if(a.dataClass.equals("PEAKASSIGNMENTS"))return!0;a.setHeaderTable(b);if(a.dataClass.equals("XYDATA"))return a.checkRequiredTokens(),this.decompressData(a,null),!0;if(a.dataClass.equals("PEAKTABLE")||a.dataClass.equals("XYPOINTS")){a.setContinuous(a.dataClass.equals("XYPOINTS"));
try{this.t.readLineTrimmed()}catch(d){if(v(d,java.io.IOException))d.printStackTrace();else throw d;}var c;c=1.7976931348623157E308!=a.xFactor&&1.7976931348623157E308!=a.yFactor?JSV.common.Coordinate.parseDSV(this.t.getValue(),a.xFactor,a.yFactor):JSV.common.Coordinate.parseDSV(this.t.getValue(),1,1);a.setXYCoords(c);c=JSV.common.Coordinate.deltaX(c[c.length-1].getXVal(),c[0].getXVal(),c.length);a.setIncreasing(0<c);return!0}return!1},"JSV.source.JDXDataObject,JU.List");c(c$,"readNTUPLECoords",function(a,
b,d,c){var f;if(a.dataClass.equals("XYDATA")){f=b.get("##SYMBOL");var e=f.indexOf(d[0]);d=f.indexOf(d[1]);f=b.get("##VARNAME");a.varName=f.get(d).toUpperCase();f=b.get("##FACTOR");a.xFactor=Double.parseDouble(f.get(e));a.yFactor=Double.parseDouble(f.get(d));f=b.get("##LAST");a.fileLastX=Double.parseDouble(f.get(e));f=b.get("##FIRST");a.fileFirstX=Double.parseDouble(f.get(e));f=b.get("##VARDIM");a.nPointsFile=Integer.parseInt(f.get(e));f=b.get("##UNITS");a.setXUnits(f.get(e));a.setYUnits(f.get(d));
null==a.nucleusX&&null!=(f=b.get("##.NUCLEUS"))?(a.setNucleus(f.get(0),!1),a.setNucleus(f.get(e),!0)):null==a.nucleusX&&(a.nucleusX="?");this.decompressData(a,c);return!0}return a.dataClass.equals("PEAKTABLE")||a.dataClass.equals("XYPOINTS")?(a.setContinuous(a.dataClass.equals("XYPOINTS")),f=b.get("##SYMBOL"),e=f.indexOf(d[0]),d=f.indexOf(d[1]),f=b.get("##UNITS"),a.setXUnits(f.get(e)),a.setYUnits(f.get(d)),a.setXYCoords(JSV.common.Coordinate.parseDSV(this.t.getValue(),a.xFactor,a.yFactor)),!0):!1},
"JSV.source.JDXDataObject,java.util.Map,~A,~A");c(c$,"decompressData",function(a,b){var d=this.errorLog.length(),c=JSV.common.Coordinate.deltaX(a.fileLastX,a.fileFirstX,a.nPointsFile);a.setIncreasing(0<c);a.setContinuous(!0);var e=new JSV.source.JDXDecompressor(this.t,a.fileFirstX,a.xFactor,a.yFactor,c,a.nPointsFile),h=ca(2,0),j=System.currentTimeMillis(),k=e.decompressData(this.errorLog,h);System.out.println("decompression time = "+(System.currentTimeMillis()-j)+" ms");a.setXYCoords(k);j=e.getMinY();
null!=b&&(j<b[0]&&(b[0]=j),j=e.getMaxY(),j>b[1]&&(b[1]=j));e=Double.isNaN(a.freq2dX)?a.observedFreq:a.freq2dX;1.7976931348623157E308!=a.offset&&(1.7976931348623157E308!=e&&a.dataType.toUpperCase().contains("SPECTRUM"))&&JSV.common.Coordinate.applyShiftReference(k,a.dataPointNum,a.fileFirstX,a.fileLastX,a.offset,e,a.shiftRefType);1.7976931348623157E308!=e&&a.getXUnits().toUpperCase().equals("HZ")&&(JSV.common.Coordinate.applyScale(k,1/e,1),a.setXUnits("PPM"),a.setHZtoPPM(!0));this.errorLog.length()!=
d&&(this.errorLog.append(a.getTitle()).append("\n"),this.errorLog.append("firstX: "+a.fileFirstX+" Found "+h[0]+"\n"),this.errorLog.append("lastX from Header "+a.fileLastX+" Found "+h[1]+"\n"),this.errorLog.append("deltaX from Header "+c+"\n"),this.errorLog.append("Number of points in Header "+a.nPointsFile+" Found "+k.length+"\n"));J.util.Logger.debugging&&System.err.println(this.errorLog.toString())},"JSV.source.JDXDataObject,~A");c$.addHeader=c(c$,"addHeader",function(a,b,d){for(var c,e=0;e<a.size();e++)if((c=
a.get(e))[0].equals(b)){c[1]=d;return}a.addLast([b,d,JSV.source.JDXSourceStreamTokenizer.cleanLabel(b)])},"JU.List,~S,~S");B(c$,"VAR_LIST_TABLE",[["PEAKTABLE","XYDATA","XYPOINTS"],["(XY..XY)","(X++(Y..Y))","(XY..XY)"]],"ERROR_SEPARATOR","=====================\n","TABULAR_DATA_LABELS",["##XYDATA","##XYPOINTS","##PEAKTABLE","##DATATABLE","##PEAKASSIGNMENTS"]);java.util.Arrays.sort(JSV.source.FileReader.TABULAR_DATA_LABELS)}),m("JSV.common"),u(["JSV.api.JSVGraphics"],"JSV.common.PDFWriter",["java.util.Hashtable",
"javajs.export.PDFCreator","JU.CU","JSV.common.JSVersion"],function(){c$=q(function(){this.pdf=this.date=this.g2d=null;this.inPath=!1;this.rgb=null;s(this,arguments)},JSV.common,"PDFWriter",null,JSV.api.JSVGraphics);M(c$,function(){this.rgb=la(3,0)});w(c$,function(){this.pdf=new javajs["export"].PDFCreator});c(c$,"createPdfDocument",function(a,b,d){var c=b.layout.equals("landscape");this.date=b.date;this.pdf.setOutputStream(d);this.g2d=a.getPanelData().g2d;try{this.pdf.newDocument(b.paperWidth,b.paperHeight,
c);var e=new java.util.Hashtable;e.put("Producer",JSV.common.JSVersion.VERSION);e.put("Creator","JSpecView "+JSV.common.JSVersion.VERSION);e.put("Author","JSpecView");null!=this.date&&e.put("CreationDate",this.date);this.pdf.addInfo(e);a.getPanelData().printPdf(this,b);this.pdf.closeDocument()}catch(h){if(v(h,Exception))h.printStackTrace(),a.showMessage(h.toString(),"PDF Creation Error");else throw h;}},"JSV.api.JSVPanel,JSV.common.PrintLayout,java.io.OutputStream");e(c$,"canDoLineTo",function(){return!0});
e(c$,"doStroke",function(a,b){(this.inPath=b)||this.pdf.stroke()},"~O,~B");e(c$,"drawCircle",function(a,b,d,c){this.pdf.doCircle(b,d,n(c/2),!1)},"~O,~N,~N,~N");e(c$,"drawLine",function(a,b,d,c,e){this.pdf.moveto(b,d);this.pdf.lineto(c,e);this.inPath||this.pdf.stroke()},"~O,~N,~N,~N,~N");e(c$,"drawPolygon",function(a,b,d,c){this.pdf.doPolygon(b,d,c,!1)},"~O,~A,~A,~N");e(c$,"drawRect",function(a,b,d,c,e){this.pdf.doRect(b,d,c,e,!1)},"~O,~N,~N,~N,~N");e(c$,"drawString",function(a,b,d,c){this.pdf.drawStringRotated(b,
d,c,0)},"~O,~S,~N,~N");e(c$,"drawStringRotated",function(a,b,d,c,e){this.pdf.drawStringRotated(b,d,c,n(e))},"~O,~S,~N,~N,~N");e(c$,"fillBackground",function(){},"~O,javajs.api.GenericColor");e(c$,"fillCircle",function(a,b,c,e){this.pdf.doCircle(b,c,n(e/2),!0)},"~O,~N,~N,~N");e(c$,"fillPolygon",function(a,b,c,e){this.pdf.doPolygon(c,b,e,!0)},"~O,~A,~A,~N");e(c$,"fillRect",function(a,b,c,e,f){this.pdf.doRect(b,c,e,f,!0)},"~O,~N,~N,~N,~N");e(c$,"lineTo",function(a,b,c){this.pdf.lineto(b,c)},"~O,~N,~N");
e(c$,"setGraphicsColor",function(a,b){JU.CU.toRGB3f(b.getRGB(),this.rgb);this.pdf.setColor(this.rgb,!0);this.pdf.setColor(this.rgb,!1)},"~O,javajs.api.GenericColor");e(c$,"setFont",function(a,b){var c="/Helvetica";switch(b.idFontStyle){case 1:c+="-Bold";break;case 3:c+="-BoldOblique";break;case 2:c+="-Oblique"}this.pdf.setFont(c,b.fontSizeNominal);return b},"~O,javajs.awt.Font");e(c$,"setStrokeBold",function(a,b){this.pdf.setLineWidth(b?2:1)},"~O,~B");e(c$,"translateScale",function(a,b,c,e){this.pdf.translateScale(b,
c,e)},"~O,~N,~N,~N");e(c$,"newGrayScaleImage",function(a,b,c,e,f){this.pdf.addImageResource(b,c,e,f,!1);return b},"~O,~O,~N,~N,~A");e(c$,"drawGrayScaleImage",function(a,b,c,e,f,h,j,k,l,m){this.pdf.drawImage(b,c,e,f,h,j,k,l,m)},"~O,~O,~N,~N,~N,~N,~N,~N,~N,~N");e(c$,"setWindowParameters",function(){},"~N,~N");c(c$,"getColor1",function(a){return this.g2d.getColor1(a)},"~N");c(c$,"getColor3",function(a,b,c){return this.g2d.getColor3(a,b,c)},"~N,~N,~N");c(c$,"getColor4",function(a,b,c,e){return this.g2d.getColor4(a,
b,c,e)},"~N,~N,~N,~N")}),m("JSV.tree"),c$=q(function(){this.rootNode=null;s(this,arguments)},JSV.tree,"SimpleTreeModel"),w(c$,function(a){this.rootNode=a},"JSV.api.JSVTreeNode"),c(c$,"insertNodeInto",function(a,b,c){b.$children.add(c,a);a.prevNode=b},"JSV.api.JSVTreeNode,JSV.api.JSVTreeNode,~N"),c(c$,"removeNodeFromParent",function(a){a.prevNode.$children.removeObj(a)},"JSV.api.JSVTreeNode"),m("JSV.api"),F(JSV.api,"JSVTreeNode"),m("JSV.tree"),u(["JSV.api.JSVTreeNode"],"JSV.tree.SimpleTreeNode",["JU.List",
"JSV.tree.SimpleTreeEnumeration"],function(){c$=q(function(){this.panelNode=null;this.index=0;this.text=this.$children=this.prevNode=null;s(this,arguments)},JSV.tree,"SimpleTreeNode",null,JSV.api.JSVTreeNode);w(c$,function(a,b){this.text=a;this.panelNode=b;this.$children=new JU.List},"~S,JSV.common.PanelNode");e(c$,"getPanelNode",function(){return this.panelNode});e(c$,"getIndex",function(){return this.index});e(c$,"setIndex",function(a){this.index=a},"~N");e(c$,"children",function(){return new JSV.tree.SimpleTreeEnumeration(this)});
e(c$,"getChildCount",function(){return this.$children.size()});e(c$,"getPath",function(){var a=new JU.List,b=this;for(a.addLast(b);null!=(b=b.prevNode);)a.add(0,b);return a.toArray()});e(c$,"isLeaf",function(){return null!=this.prevNode&&null!=this.prevNode.prevNode});e(c$,"toString",function(){return this.text})}),m("JSV.api"),F(JSV.api,"JSVTreePath"),m("JSV.tree"),u(["JSV.api.JSVTreePath"],"JSV.tree.SimpleTreePath",null,function(){c$=q(function(){this.path=null;s(this,arguments)},JSV.tree,"SimpleTreePath",
null,JSV.api.JSVTreePath);w(c$,function(a){this.path=a},"~A");e(c$,"getLastPathComponent",function(){return null==this.path||0==this.path.length?null:this.path[this.path.length-1]})}),m("JSV.api"),F(JSV.api,"JSVZipReader"),m("JSV.exception"),u(["JSV.exception.JSpecViewException"],"JSV.exception.JDXSourceException",null,function(){c$=A(JSV.exception,"JDXSourceException",JSV.exception.JSpecViewException)}),m("JSV.source"),u(null,"JSV.source.JDXDecompressor",["java.lang.Double","JSV.common.Coordinate",
"J.util.Logger"],function(){c$=q(function(){this.lineNumber=this.ich=this.nPoints=this.deltaX=this.yFactor=this.xFactor=0;this.t=null;this.dx=this.firstX=0;this.maxY=4.9E-324;this.minY=1.7976931348623157E308;this.debugging=!1;this.xyCoords=null;this.ipt=0;this.lastLine=this.line=null;this.lineLen=0;this.errorLog=null;this.lastDif=this.difVal=-2147483648;this.yval=this.xval=this.dupCount=0;this.firstLastX=null;s(this,arguments)},JSV.source,"JDXDecompressor");c(c$,"getMinY",function(){return this.minY});
c(c$,"getMaxY",function(){return this.maxY});w(c$,function(a,b,c,e,f,h){this.t=a;this.firstX=b;this.xFactor=c;this.yFactor=e;this.deltaX=f;this.nPoints=h;this.lineNumber=a.getLabelLineNo();this.debugging=J.util.Logger.isActiveLevel(6)},"JSV.source.JDXSourceStreamTokenizer,~N,~N,~N,~N,~N");c(c$,"addPoint",function(a){if(this.ipt==this.xyCoords.length){var b=Array(2*this.ipt);System.arraycopy(this.xyCoords,0,b,0,this.ipt);this.xyCoords=b}b=a.getYVal();b>this.maxY?this.maxY=b:b<this.minY&&(this.minY=
b);this.debugging&&this.logError("Coord: "+this.ipt+a);this.xyCoords[this.ipt++]=a;this.firstLastX[1]=a.getXVal()},"JSV.common.Coordinate");c(c$,"decompressData",function(a,b){this.errorLog=a;this.firstLastX=b;this.debugging&&this.logError("firstX="+this.firstX+" xFactor="+this.xFactor+" yFactor="+this.yFactor+" deltaX="+this.deltaX+" nPoints="+this.nPoints);this.testAlgorithm();this.xyCoords=Array(this.nPoints);var c=Math.abs(0.35*this.deltaX),e=Math.abs(1.4*this.deltaX),f=Math.abs(0.6*this.deltaX);
try{for(;null!=(this.line=this.t.readLineTrimmed())&&0>this.line.indexOf("##");)if(this.lineNumber++,this.debugging&&this.logError(this.lineNumber+"\t"+this.line),0!=(this.lineLen=this.line.length)){this.ich=0;var h=-2147483648!=this.lastDif;this.xval=this.getValueDelim()*this.xFactor;0==this.ipt&&(b[0]=this.xval,this.dx=this.firstX-this.xval);this.xval+=this.dx;var j=(new JSV.common.Coordinate).set(this.xval,(this.yval=this.getYValue())*this.yFactor);if(0==this.ipt)this.addPoint(j);else{var k=this.xyCoords[this.ipt-
1],l=Math.abs(k.getXVal()-j.getXVal());if(h&&l<c){this.xyCoords[this.ipt-1]=j;var m=k.getYVal(),n=j.getYVal();n!=m&&this.logError(this.lastLine+"\n"+this.line+"\nY-value Checkpoint Error! Line "+this.lineNumber+" for y1="+n+" y0="+m)}else this.addPoint(j),(l<f||l>e)&&this.logError(this.lastLine+"\n"+this.line+"\nX-sequence Checkpoint Error! Line "+this.lineNumber+" |x1-x0|="+l+" instead of "+Math.abs(this.deltaX)+" for x1="+j.getXVal()+" x0="+k.getXVal())}for(;this.ich<this.lineLen||-2147483648!=
this.difVal||0<this.dupCount;)this.xval+=this.deltaX,Double.isNaN(this.yval=this.getYValue())||this.addPoint((new JSV.common.Coordinate).set(this.xval,this.yval*this.yFactor));this.lastLine=this.line}}catch(q){if(!v(q,java.io.IOException))throw q;}this.nPoints!=this.ipt&&(this.logError("Decompressor did not find "+this.nPoints+" points -- instead "+this.ipt),c=Array(this.ipt),System.arraycopy(this.xyCoords,0,c,0,this.ipt),this.xyCoords=c);return 0<this.deltaX?this.xyCoords:JSV.common.Coordinate.reverse(this.xyCoords)},
"JU.SB,~A");c(c$,"logError",function(a){this.debugging&&J.util.Logger.debug(a);this.errorLog.append(a).appendC("\n")},"~S");c(c$,"getYValue",function(){if(0<this.dupCount)return--this.dupCount,this.yval=-2147483648==this.lastDif?this.yval:this.yval+this.lastDif;if(-2147483648!=this.difVal)return this.yval+=this.difVal,this.lastDif=this.difVal,this.difVal=-2147483648,this.yval;if(this.ich==this.lineLen)return NaN;var a=this.line.charAt(this.ich);this.debugging&&J.util.Logger.info(""+a);switch(a){case "%":this.difVal=
0;break;case "J":case "K":case "L":case "M":case "N":case "O":case "P":case "Q":case "R":this.difVal=a.charCodeAt(0)-73;break;case "j":case "k":case "l":case "m":case "n":case "o":case "p":case "q":case "r":this.difVal=105-a.charCodeAt(0);break;case "S":case "T":case "U":case "V":case "W":case "X":case "Y":case "Z":this.dupCount=a.charCodeAt(0)-82;break;case "s":this.dupCount=9;break;case "+":case "-":case ".":case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "@":case "A":case "B":case "C":case "D":case "E":case "F":case "G":case "H":case "I":case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":case "i":return this.lastDif=
-2147483648,this.getValue();case "?":return this.lastDif=-2147483648,NaN;default:return this.ich++,this.lastDif=-2147483648,this.getYValue()}this.ich++;-2147483648!=this.difVal?this.difVal=this.getDifDup(this.difVal):this.dupCount=this.getDifDup(this.dupCount)-1;return this.getYValue()});c(c$,"getDifDup",function(a){var b=this.ich;this.next();var c=a+this.line.substring(b,this.ich);return b==this.ich?a:Integer.$valueOf(c).intValue()},"~N");c(c$,"getValue",function(){var a=this.ich;if(this.ich==this.lineLen)return NaN;
var a=this.line.charAt(this.ich),b=0;switch(a){case "+":case "-":case ".":case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":return this.getValueDelim();case "@":case "A":case "B":case "C":case "D":case "E":case "F":case "G":case "H":case "I":b=a.charCodeAt(0)-64;a=++this.ich;break;case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":case "i":b=96-a.charCodeAt(0);a=++this.ich;break;default:return this.ich++,this.getValue()}this.next();return Double.$valueOf(b+
this.line.substring(a,this.ich)).doubleValue()});c(c$,"getValueDelim",function(){for(var a=this.ich,b="\x00";this.ich<this.lineLen&&0<=" ,\t\n".indexOf(b=this.line.charAt(this.ich));)this.ich++;var c=1;switch(b){case "-":c=-1;case "+":a=++this.ich}b=this.next();if("E"==b&&this.ich+3<this.lineLen)switch(this.line.charAt(this.ich+1)){case "-":case "+":this.ich+=4,this.ich<this.lineLen&&("0"<=(b=this.line.charAt(this.ich))&&"9">=b)&&this.ich++}return c*Double.$valueOf(this.line.substring(a,this.ich)).doubleValue()});
c(c$,"next",function(){for(;this.ich<this.lineLen&&0>"+-%@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrs? ,\t\n".indexOf(this.line.charAt(this.ich));)this.ich++;return this.ich==this.lineLen?"\x00":this.line.charAt(this.ich)});c(c$,"testAlgorithm",function(){});B(c$,"allDelim","+-%@ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrs? ,\t\n","WHITE_SPACE"," ,\t\n")}),m("javajs.export"),u(null,"javajs.export.PDFCreator",["java.lang.Double","java.util.Hashtable","javajs.export.PDFObject","JU.List","$.SB"],
function(){c$=q(function(){this.graphics=this.root=this.indirectObjects=this.os=null;this.width=this.height=this.count=this.xrefPt=this.pt=0;this.images=this.fonts=null;s(this,arguments)},javajs["export"],"PDFCreator");w(c$,function(){});c(c$,"setOutputStream",function(a){this.os=a},"java.io.OutputStream");c(c$,"newDocument",function(a,b,c){this.width=c?b:a;this.height=c?a:b;System.out.println("Creating PDF with width="+this.width+" and height="+this.height);this.fonts=new java.util.Hashtable;this.indirectObjects=
new JU.List;this.root=this.newObject("Catalog");var e=this.newObject("Pages"),f=this.newObject("Page"),h=this.newObject(null);this.graphics=this.newObject("XObject");this.root.addDef("Pages",e.getRef());e.addDef("Count","1");e.addDef("Kids","[ "+f.getRef()+" ]");f.addDef("Parent",e.getRef());f.addDef("MediaBox","[ 0 0 "+a+" "+b+" ]");c&&f.addDef("Rotate","90");h.addDef("Length","?");h.append((c?"q 0 1 1 0 0 0 ":"q 1 0 0 -1 0 "+b)+" cm /"+this.graphics.getID()+" Do Q");f.addDef("Contents",h.getRef());
this.addProcSet(f);this.addProcSet(this.graphics);this.graphics.addDef("Subtype","/Form");this.graphics.addDef("FormType","1");this.graphics.addDef("BBox","[0 0 "+this.width+" "+this.height+"]");this.graphics.addDef("Matrix","[1 0 0 1 0 0]");this.graphics.addDef("Length","?");f.addResource("XObject",this.graphics.getID(),this.graphics.getRef());this.g("q 1 w 1 J 1 j 10 M []0 d q ");this.clip(0,0,this.width,this.height)},"~N,~N,~B");c(c$,"addProcSet",function(a){a.addResource(null,"ProcSet","[/PDF /Text /ImageB /ImageC /ImageI]")},
"javajs.export.PDFObject");c(c$,"clip",function(a,b,c,e){this.moveto(a,b);this.lineto(c,b);this.lineto(c,e);this.lineto(a,e);this.g("h W n")},"~N,~N,~N,~N");c(c$,"moveto",function(a,b){this.g(a+" "+b+" m")},"~N,~N");c(c$,"lineto",function(a,b){this.g(a+" "+b+" l")},"~N,~N");c(c$,"newObject",function(a){var b=new javajs["export"].PDFObject(++this.count);null!=a&&b.addDef("Type","/"+a);this.indirectObjects.addLast(b);return b},"~S");c(c$,"addInfo",function(a){var b=new java.util.Hashtable,c;for(a=a.entrySet().iterator();a.hasNext()&&
((c=a.next())||1);){var e="("+c.getValue().$replace(")","_").$replace("(","_")+")";b.put(c.getKey(),e)}this.root.addDef("Info",b)},"java.util.Map");c(c$,"addFontResource",function(a){var b=this.newObject("Font");this.fonts.put(a,b);b.addDef("BaseFont",a);b.addDef("Encoding","/WinAnsiEncoding");b.addDef("Subtype","/Type1");this.graphics.addResource("Font",b.getID(),b.getRef());return b},"~S");c(c$,"addImageResource",function(a,b,c,e,f){var h=this.newObject("XObject");null==this.images&&(this.images=
new java.util.Hashtable);this.images.put(a,h);h.addDef("Subtype","/Image");h.addDef("Length","?");h.addDef("ColorSpace",f?"/DeviceRGB":"/DeviceGray");h.addDef("BitsPerComponent","8");h.addDef("Width",""+b);h.addDef("Height",""+c);this.graphics.addResource("XObject",h.getID(),h.getRef());a=e.length;b=O(a*(f?3:1),0);if(f)for(c=f=0;f<a;f++)b[c++]=e[f]>>16&255,b[c++]=e[f]>>8&255,b[c++]=e[f]&255;else for(f=0;f<a;f++)b[f]=e[f];h.setStream(b);this.graphics.addResource("XObject",h.getID(),h.getRef())},"~O,~N,~N,~A,~B");
c(c$,"g",function(a){this.graphics.append(a).appendC("\n")},"~S");c(c$,"output",function(a){a=a.getBytes();this.os.write(a,0,a.length);this.pt+=a.length},"~S");c(c$,"closeDocument",function(){this.g("Q Q");this.outputHeader();this.writeObjects();this.writeXRefTable();this.writeTrailer();this.os.flush();this.os.close()});c(c$,"outputHeader",function(){this.output("%PDF-1.3\n%");var a=[-1,-1,-1,-1];this.os.write(a,0,a.length);this.pt+=4;this.output("\n")});c(c$,"writeTrailer",function(){var a=new javajs["export"].PDFObject(-2);
this.output("trailer");a.addDef("Size",""+this.indirectObjects.size());a.addDef("Root",this.root.getRef());a.output(this.os);this.output("startxref\n");this.output(""+this.xrefPt+"\n");this.output("%%EOF\n")});c(c$,"writeObjects",function(){for(var a=this.indirectObjects.size(),b=0;b<a;b++){var c=this.indirectObjects.get(b);c.isFont()&&(c.pt=this.pt,this.pt+=c.output(this.os))}for(b=0;b<a;b++)c=this.indirectObjects.get(b),c.isFont()||(c.pt=this.pt,this.pt+=c.output(this.os))});c(c$,"writeXRefTable",
function(){this.xrefPt=this.pt;var a=this.indirectObjects.size(),b=new JU.SB;b.append("xref\n0 "+(a+1)+"\n0000000000 65535 f\r\n");for(var c=0;c<a;c++){var e="0000000000"+this.indirectObjects.get(c).pt;b.append(e.substring(e.length-10));b.append(" 00000 n\r\n")}this.output(b.toString())});c(c$,"canDoLineTo",function(){return!0});c(c$,"fill",function(){this.g("f")});c(c$,"stroke",function(){this.g("S")});c(c$,"doCircle",function(a,b,c,e){var f=4*c*(Math.sqrt(2)-1)/3;this.g(a+c+" "+b+" m");this.g(a+
c+" "+(b+f)+" "+(a+f)+" "+(b+c)+" "+a+" "+(b+c)+"  c");this.g(a-f+" "+(b+c)+" "+(a-c)+" "+(b+f)+" "+(a-c)+" "+b+" c");this.g(a-c+" "+(b-f)+" "+(a-f)+" "+(b-c)+" "+a+" "+(b-c)+" c");this.g(a+f+" "+(b-c)+" "+(a+c)+" "+(b-f)+" "+(a+c)+" "+b+" c");this.g(e?"f":"s")},"~N,~N,~N,~B");c(c$,"doPolygon",function(a,b,c,e){this.moveto(a[0],b[0]);for(var f=1;f<c;f++)this.lineto(a[f],b[f]);this.g(e?"f":"s")},"~A,~A,~N,~B");c(c$,"doRect",function(a,b,c,e,f){this.g(a+" "+b+" "+c+" "+e+" re "+(f?"f":"s"))},"~N,~N,~N,~N,~B");
c(c$,"drawImage",function(a,b,c,e,f,h,j,k,l){a=this.images.get(a);if(null!=a){this.g("q");this.clip(b,c,e,f);var m=Double.parseDouble(a.getDef("Width")),n=Double.parseDouble(a.getDef("Height"));e=(e-b+1)/(k-h+1);f=(f-c+1)/(l-j+1);this.g(e*m+" 0 0 "+-f*n+" "+(b-h*e)+" "+(c+(n-j)*f)+" cm");this.g("/"+a.getID()+" Do");this.g("Q")}},"~O,~N,~N,~N,~N,~N,~N,~N,~N");c(c$,"drawStringRotated",function(a,b,c,e){this.g("q "+this.getRotation(e)+" "+b+" "+c+" cm BT("+a+")Tj ET Q")},"~S,~N,~N,~N");c(c$,"getRotation",
function(a){var b=0,c=0;switch(a){case 0:b=1;break;case 90:c=1;break;case -90:c=-1;break;case 180:b=-1;break;default:a=3.141592653589793*(a/180),b=Math.cos(a),c=Math.sin(a),1E-4>Math.abs(b)&&(b=0),1E-4>Math.abs(c)&&(c=0)}return b+" "+c+" "+c+" "+-b},"~N");c(c$,"setColor",function(a,b){this.g(a[0]+" "+a[1]+" "+a[2]+(b?" rg":" RG"))},"~A,~B");c(c$,"setFont",function(a,b){var c=this.fonts.get(a);null==c&&(c=this.addFontResource(a));this.g("/"+c.getID()+" "+b+" Tf")},"~S,~N");c(c$,"setLineWidth",function(a){this.g(a+
" w")},"~N");c(c$,"translateScale",function(a,b,c){this.g(c+" 0 0 "+c+" "+a+" "+b+" cm")},"~N,~N,~N")}),m("JSV.tree"),u(["java.util.Enumeration"],"JSV.tree.SimpleTreeEnumeration",null,function(){c$=q(function(){this.node=null;this.pt=0;s(this,arguments)},JSV.tree,"SimpleTreeEnumeration",null,java.util.Enumeration);w(c$,function(a){this.node=a},"JSV.tree.SimpleTreeNode");e(c$,"hasMoreElements",function(){return this.pt<this.node.$children.size()});e(c$,"nextElement",function(){return this.node.$children.get(this.pt++)})}),
m("javajs.export"),u(["JU.SB"],"javajs.export.PDFObject",["java.io.ByteArrayOutputStream","java.util.Hashtable","$.Map","java.util.zip.Deflater","$.DeflaterOutputStream"],function(){c$=q(function(){this.stream=this.dictionary=null;this.index=0;this.type=null;this.pt=this.len=0;s(this,arguments)},javajs["export"],"PDFObject",JU.SB);w(c$,function(a){I(this,javajs["export"].PDFObject,[]);this.index=a},"~N");c(c$,"getRef",function(){return this.index+" 0 R"});c(c$,"getID",function(){return this.type.substring(0,
1)+this.index});c(c$,"isFont",function(){return"Font".equals(this.type)});c(c$,"setStream",function(a){this.stream=a},"~A");c(c$,"getDef",function(a){return this.dictionary.get(a)},"~S");c(c$,"addDef",function(a,b){null==this.dictionary&&(this.dictionary=new java.util.Hashtable);this.dictionary.put(a,b);a.equals("Type")&&(this.type=b.substring(1))},"~S,~O");c(c$,"setAsStream",function(){this.stream=this.toBytes(0,-1);this.setLength(0)});c(c$,"output",function(a){0<this.index&&this.write(a,(this.index+
" 0 obj\n").getBytes(),0);var b=0;if(null!=this.dictionary){if(this.dictionary.containsKey("Length")){null==this.stream&&this.setAsStream();b=this.stream.length;if(1E3<b){var c=new java.util.zip.Deflater(9),e=new java.io.ByteArrayOutputStream(1024),c=new java.util.zip.DeflaterOutputStream(e,c);c.write(this.stream,0,b);c.finish();this.stream=e.toByteArray();this.dictionary.put("Filter","/FlateDecode");b=this.stream.length}this.dictionary.put("Length",""+b)}this.write(a,this.getDictionaryText(this.dictionary,
"\n").getBytes(),0)}0<this.length()&&this.write(a,this.toString().getBytes(),0);null!=this.stream&&(this.write(a,"stream\r\n".getBytes(),0),this.write(a,this.stream,b),this.write(a,"\r\nendstream\r\n".getBytes(),0));0<this.index&&this.write(a,"endobj\n".getBytes(),0);return this.len},"java.io.OutputStream");c(c$,"write",function(a,b,c){0==c&&(c=b.length);this.len+=c;a.write(b,0,c)},"java.io.OutputStream,~A,~N");c(c$,"getDictionaryText",function(a,b){var c=new JU.SB;c.append("<<");a.containsKey("Type")&&
c.append("/Type").appendO(a.get("Type"));for(var e,f=a.entrySet().iterator();f.hasNext()&&((e=f.next())||1);){var h=e.getKey();!h.equals("Type")&&!h.startsWith("!")&&(c.append("/"+h),h=e.getValue(),y(h,java.util.Map)?c.append(this.getDictionaryText(h,"")):(h=e.getValue(),h.startsWith("/")||c.append(" "),c.appendO(h)))}return 3<c.length()?c.append(">>").append(b).toString():""},"java.util.Map,~S");c(c$,"createSubdict",function(a,b){var c=a.get(b);null==c&&a.put(b,c=new java.util.Hashtable);return c},
"java.util.Map,~S");c(c$,"addResource",function(a,b,c){var e=this.createSubdict(this.dictionary,"Resources");null!=a&&(e=this.createSubdict(e,a));e.put(b,c)},"~S,~S,~S")}),m("JZ"),u(["JZ.ZStream"],"JZ.Deflater",["JZ.Deflate"],function(){c$=q(function(){this.$finished=!1;s(this,arguments)},JZ,"Deflater",JZ.ZStream);c(c$,"init",function(a,b,c){0==b&&(b=15);this.$finished=!1;this.setAdler32();this.dstate=new JZ.Deflate(this);this.dstate.deflateInit2(a,c?-b:b);return this},"~N,~N,~B");e(c$,"deflate",
function(a){if(null==this.dstate)return-2;a=this.dstate.deflate(a);1==a&&(this.$finished=!0);return a},"~N");e(c$,"end",function(){this.$finished=!0;if(null==this.dstate)return-2;var a=this.dstate.deflateEnd();this.dstate=null;this.free();return a});c(c$,"params",function(a,b){return null==this.dstate?-2:this.dstate.deflateParams(a,b)},"~N,~N");c(c$,"setDictionary",function(a,b){return null==this.dstate?-2:this.dstate.deflateSetDictionary(a,b)},"~A,~N");e(c$,"finished",function(){return this.$finished});
c(c$,"finish",function(){});c(c$,"getBytesRead",function(){return this.dstate.getBytesRead()});c(c$,"getBytesWritten",function(){return this.dstate.getBytesWritten()});B(c$,"MAX_WBITS",15,"Z_STREAM_END",1,"$Z_STREAM_ERROR",-2)}),m("java.util.zip"),u(["JZ.Deflater"],"java.util.zip.Deflater",null,function(){c$=A(java.util.zip,"Deflater",JZ.Deflater);w(c$,function(a){2147483647!=a&&this.init(a,0,!1)},"~N");B(c$,"DEFAULT_COMPRESSION",-1)}),u(["java.io.OutputStream"],"java.io.FilterOutputStream",["java.lang.IndexOutOfBoundsException"],
function(){c$=q(function(){this.out=null;s(this,arguments)},java.io,"FilterOutputStream",java.io.OutputStream);c(c$,"jzSetFOS",function(a){this.out=a},"java.io.OutputStream");c(c$,"writeByteAsInt",function(a){this.out.writeByteAsInt(a)},"~N");c(c$,"write",function(a,b,c){if(0>(b|c|a.length-(c+b)|b+c))throw new IndexOutOfBoundsException;for(var e=0;e<c;e++)this.writeByteAsInt(a[b+e])},"~A,~N,~N");c(c$,"flush",function(){this.out.flush()});c(c$,"close",function(){try{this.flush()}catch(a){if(!v(a,java.io.IOException))throw a;
}this.out.close()})}),m("JZ"),u(["java.io.FilterOutputStream"],"JZ.DeflaterOutputStream",["java.io.IOException","java.lang.IndexOutOfBoundsException"],function(){c$=q(function(){this.buffer=this.deflater=null;this.syncFlush=this.closed=!1;this.buf1=null;this.mydeflater=!1;this.close_out=!0;s(this,arguments)},JZ,"DeflaterOutputStream",java.io.FilterOutputStream);M(c$,function(){this.buf1=O(1,0)});c(c$,"jzSetDOS",function(a,b,c,e){this.jzSetFOS(a);0==c&&(c=512);this.deflater=b;this.buffer=O(c,0);this.close_out=
e},"java.io.OutputStream,JZ.Deflater,~N,~B");e(c$,"writeByteAsInt",function(a){this.buf1[0]=a&255;this.write(this.buf1,0,1)},"~N");c(c$,"write",function(a,b,c){if(this.deflater.finished())throw new java.io.IOException("finished");if((new Boolean((new Boolean(0>b|0>c)).valueOf()|b+c>a.length)).valueOf())throw new IndexOutOfBoundsException;if(0!=c){var e=this.syncFlush?2:0;for(this.deflater.setInput(a,b,c,!0);0<this.deflater.avail_in&&1!=this.deflate(e););}},"~A,~N,~N");c(c$,"finish",function(){for(;!this.deflater.finished();)this.deflate(4)});
e(c$,"close",function(){this.closed||(this.finish(),this.mydeflater&&this.deflater.end(),this.close_out&&this.out.close(),this.closed=!0)});c(c$,"deflate",function(a){this.deflater.setOutput(this.buffer,0,this.buffer.length);var b=this.deflater.deflate(a);switch(b){case 0:case 1:break;case -5:if(0>=this.deflater.avail_in&&4!=a)break;default:throw new java.io.IOException("failed to deflate");}a=this.deflater.next_out_index;0<a&&this.out.write(this.buffer,0,a);return b},"~N");e(c$,"flush",function(){if(this.syncFlush&&
!this.deflater.finished())for(;;){var a=this.deflate(2);if(this.deflater.next_out_index<this.buffer.length)break;if(1==a)break}this.out.flush()});c(c$,"getTotalIn",function(){return this.deflater.getTotalIn()});c(c$,"getTotalOut",function(){return this.deflater.getTotalOut()});c(c$,"setSyncFlush",function(a){this.syncFlush=a},"~B");c(c$,"getSyncFlush",function(){return this.syncFlush});c(c$,"getDeflater",function(){return this.deflater});B(c$,"DEFAULT_BUFSIZE",512)}),m("java.util.zip"),u(["JZ.DeflaterOutputStream"],
"java.util.zip.DeflaterOutputStream",null,function(){c$=A(java.util.zip,"DeflaterOutputStream",JZ.DeflaterOutputStream);w(c$,function(){I(this,java.util.zip.DeflaterOutputStream,[])});w(c$,function(a,b){I(this,java.util.zip.DeflaterOutputStream,[]);this.setDOS(a,b)},"java.io.ByteArrayOutputStream,java.util.zip.Deflater");c(c$,"setDOS",function(a,b){this.jzSetDOS(a,b,0,!0)},"java.io.OutputStream,java.util.zip.Deflater")}),m("JZ"),u(["JZ.Tree"],"JZ.Deflate",["JZ.CRC32","$.GZIPHeader","$.StaticTree"],
function(){c$=q(function(){this.strm=null;this.status=0;this.pending_buf=null;this.pending=this.pending_out=this.pending_buf_size=0;this.wrap=1;this.w_mask=this.w_bits=this.w_size=this.last_flush=this.method=this.data_type=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=
this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.heap=this.bl_count=this.bl_desc=this.d_desc=this.l_desc=this.bl_tree=this.dyn_dtree=this.dyn_ltree=null;this.heap_max=this.heap_len=0;this.depth=null;this.bi_valid=this.bi_buf=this.last_eob_len=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0;this.gheader=null;s(this,arguments)},JZ,"Deflate");M(c$,function(){this.l_desc=new JZ.Tree;this.d_desc=new JZ.Tree;
this.bl_desc=new JZ.Tree;this.bl_count=U(16,0);this.heap=H(573,0);this.depth=O(573,0)});w(c$,function(a){this.strm=a;this.dyn_ltree=U(1146,0);this.dyn_dtree=U(122,0);this.bl_tree=U(78,0)},"JZ.ZStream");c(c$,"deflateInit",function(a){return this.deflateInit2(a,15)},"~N");c(c$,"deflateInit2",function(a,b){return this.deflateInit5(a,8,b,8,0)},"~N,~N");c(c$,"deflateInit3",function(a,b,c){return this.deflateInit5(a,8,b,c,0)},"~N,~N,~N");c(c$,"lm_init",function(){this.window_size=2*this.w_size;for(var a=
this.head[this.hash_size-1]=0;a<this.hash_size-1;a++)this.head[a]=0;this.max_lazy_match=JZ.Deflate.config_table[this.level].max_lazy;this.good_match=JZ.Deflate.config_table[this.level].good_length;this.nice_match=JZ.Deflate.config_table[this.level].nice_length;this.max_chain_length=JZ.Deflate.config_table[this.level].max_chain;this.lookahead=this.block_start=this.strstart=0;this.match_length=this.prev_length=2;this.ins_h=this.match_available=0});c(c$,"tr_init",function(){this.l_desc.dyn_tree=this.dyn_ltree;
this.l_desc.stat_desc=JZ.StaticTree.static_l_desc;this.d_desc.dyn_tree=this.dyn_dtree;this.d_desc.stat_desc=JZ.StaticTree.static_d_desc;this.bl_desc.dyn_tree=this.bl_tree;this.bl_desc.stat_desc=JZ.StaticTree.static_bl_desc;this.bi_valid=this.bi_buf=0;this.last_eob_len=8;this.init_block()});c(c$,"init_block",function(){for(var a=0;286>a;a++)this.dyn_ltree[2*a]=0;for(a=0;30>a;a++)this.dyn_dtree[2*a]=0;for(a=0;19>a;a++)this.bl_tree[2*a]=0;this.dyn_ltree[512]=1;this.last_lit=this.matches=this.opt_len=
this.static_len=0});c(c$,"pqdownheap",function(a,b){for(var c=this.heap[b],e=b<<1;e<=this.heap_len;){e<this.heap_len&&JZ.Deflate.smaller(a,this.heap[e+1],this.heap[e],this.depth)&&e++;if(JZ.Deflate.smaller(a,c,this.heap[e],this.depth))break;this.heap[b]=this.heap[e];b=e;e<<=1}this.heap[b]=c},"~A,~N");c$.smaller=c(c$,"smaller",function(a,b,c,e){var f=a[2*b];a=a[2*c];return f<a||f==a&&e[b]<=e[c]},"~A,~N,~N,~A");c(c$,"scan_tree",function(a,b){var c,e=-1,f,h=a[1],j=0,k=7,l=4;0==h&&(k=138,l=3);a[2*(b+
1)+1]=65535;for(c=0;c<=b;c++)f=h,h=a[2*(c+1)+1],++j<k&&f==h||(j<l?this.bl_tree[2*f]+=j:0!=f?(f!=e&&this.bl_tree[2*f]++,this.bl_tree[32]++):10>=j?this.bl_tree[34]++:this.bl_tree[36]++,j=0,e=f,0==h?(k=138,l=3):f==h?(k=6,l=3):(k=7,l=4))},"~A,~N");c(c$,"build_bl_tree",function(){var a;this.scan_tree(this.dyn_ltree,this.l_desc.max_code);this.scan_tree(this.dyn_dtree,this.d_desc.max_code);this.bl_desc.build_tree(this);for(a=18;3<=a&&0==this.bl_tree[2*JZ.Tree.bl_order[a]+1];a--);this.opt_len+=3*(a+1)+14;
return a});c(c$,"send_all_trees",function(a,b,c){var e;this.send_bits(a-257,5);this.send_bits(b-1,5);this.send_bits(c-4,4);for(e=0;e<c;e++)this.send_bits(this.bl_tree[2*JZ.Tree.bl_order[e]+1],3);this.send_tree(this.dyn_ltree,a-1);this.send_tree(this.dyn_dtree,b-1)},"~N,~N,~N");c(c$,"send_tree",function(a,b){var c,e=-1,f,h=a[1],j=0,k=7,l=4;0==h&&(k=138,l=3);for(c=0;c<=b;c++)if(f=h,h=a[2*(c+1)+1],!(++j<k&&f==h)){if(j<l){do this.send_code(f,this.bl_tree);while(0!=--j)}else 0!=f?(f!=e&&(this.send_code(f,
this.bl_tree),j--),this.send_code(16,this.bl_tree),this.send_bits(j-3,2)):10>=j?(this.send_code(17,this.bl_tree),this.send_bits(j-3,3)):(this.send_code(18,this.bl_tree),this.send_bits(j-11,7));j=0;e=f;0==h?(k=138,l=3):f==h?(k=6,l=3):(k=7,l=4)}},"~A,~N");c(c$,"put_byte",function(a,b,c){System.arraycopy(a,b,this.pending_buf,this.pending,c);this.pending+=c},"~A,~N,~N");c(c$,"put_byteB",function(a){this.pending_buf[this.pending++]=a&255},"~N");c(c$,"put_short",function(a){this.put_byteB(a);this.put_byteB(a>>>
8)},"~N");c(c$,"putShortMSB",function(a){this.put_byteB(a>>8);this.put_byteB(a)},"~N");c(c$,"send_code",function(a,b){var c=2*a;this.send_bits(b[c]&65535,b[c+1]&65535)},"~N,~A");c(c$,"send_bits",function(a,b){this.bi_valid>16-b?(this.bi_buf|=a<<this.bi_valid&65535,this.put_short(this.bi_buf),this.bi_buf=a>>>16-this.bi_valid&65535,this.bi_valid+=b-16):(this.bi_buf|=a<<this.bi_valid&65535,this.bi_valid+=b)},"~N,~N");c(c$,"_tr_align",function(){this.send_bits(2,3);this.send_code(256,JZ.StaticTree.static_ltree);
this.bi_flush();9>1+this.last_eob_len+10-this.bi_valid&&(this.send_bits(2,3),this.send_code(256,JZ.StaticTree.static_ltree),this.bi_flush());this.last_eob_len=7});c(c$,"_tr_tally",function(a,b){this.pending_buf[this.d_buf+2*this.last_lit]=a>>>8;this.pending_buf[this.d_buf+2*this.last_lit+1]=a;this.pending_buf[this.l_buf+this.last_lit]=b;this.last_lit++;0==a?this.dyn_ltree[2*b]++:(this.matches++,a--,this.dyn_ltree[2*(JZ.Tree._length_code[b]+256+1)]++,this.dyn_dtree[2*JZ.Tree.d_code(a)]++);if(0==(this.last_lit&
8191)&&2<this.level){var c=8*this.last_lit,e=this.strstart-this.block_start,f;for(f=0;30>f;f++)c+=this.dyn_dtree[2*f]*(5+JZ.Tree.extra_dbits[f]);c>>>=3;if(this.matches<n(this.last_lit/2)&&c<n(e/2))return!0}return this.last_lit==this.lit_bufsize-1},"~N,~N");c(c$,"compress_block",function(a,b){var c,e,f=0,h,j;if(0!=this.last_lit){do c=this.pending_buf[this.d_buf+2*f]<<8&65280|this.pending_buf[this.d_buf+2*f+1]&255,e=this.pending_buf[this.l_buf+f]&255,f++,0==c?this.send_code(e,a):(h=JZ.Tree._length_code[e],
this.send_code(h+256+1,a),j=JZ.Tree.extra_lbits[h],0!=j&&(e-=JZ.Tree.base_length[h],this.send_bits(e,j)),c--,h=JZ.Tree.d_code(c),this.send_code(h,b),j=JZ.Tree.extra_dbits[h],0!=j&&(c-=JZ.Tree.base_dist[h],this.send_bits(c,j)));while(f<this.last_lit)}this.send_code(256,a);this.last_eob_len=a[513]},"~A,~A");c(c$,"set_data_type",function(){for(var a=0,b=0,c=0;7>a;)c+=this.dyn_ltree[2*a],a++;for(;128>a;)b+=this.dyn_ltree[2*a],a++;for(;256>a;)c+=this.dyn_ltree[2*a],a++;this.data_type=c>b>>>2?0:1});c(c$,
"bi_flush",function(){16==this.bi_valid?(this.put_short(this.bi_buf),this.bi_valid=this.bi_buf=0):8<=this.bi_valid&&(this.put_byteB(this.bi_buf),this.bi_buf>>>=8,this.bi_valid-=8)});c(c$,"bi_windup",function(){8<this.bi_valid?this.put_short(this.bi_buf):0<this.bi_valid&&this.put_byteB(this.bi_buf);this.bi_valid=this.bi_buf=0});c(c$,"copy_block",function(a,b,c){this.bi_windup();this.last_eob_len=8;c&&(this.put_short(b),this.put_short(~b));this.put_byte(this.window,a,b)},"~N,~N,~B");c(c$,"flush_block_only",
function(a){this._tr_flush_block(0<=this.block_start?this.block_start:-1,this.strstart-this.block_start,a);this.block_start=this.strstart;this.strm.flush_pending()},"~B");c(c$,"deflate_stored",function(a){var b=65535,c;for(b>this.pending_buf_size-5&&(b=this.pending_buf_size-5);;){if(1>=this.lookahead){this.fill_window();if(0==this.lookahead&&0==a)return 0;if(0==this.lookahead)break}this.strstart+=this.lookahead;this.lookahead=0;c=this.block_start+b;if(0==this.strstart||this.strstart>=c)if(this.lookahead=
this.strstart-c,this.strstart=c,this.flush_block_only(!1),0==this.strm.avail_out)return 0;if(this.strstart-this.block_start>=this.w_size-262&&(this.flush_block_only(!1),0==this.strm.avail_out))return 0}this.flush_block_only(4==a);return 0==this.strm.avail_out?4==a?2:0:4==a?3:1},"~N");c(c$,"_tr_stored_block",function(a,b,c){this.send_bits(0+(c?1:0),3);this.copy_block(a,b,!0)},"~N,~N,~B");c(c$,"_tr_flush_block",function(a,b,c){var e,f,h=0;0<this.level?(2==this.data_type&&this.set_data_type(),this.l_desc.build_tree(this),
this.d_desc.build_tree(this),h=this.build_bl_tree(),e=this.opt_len+3+7>>>3,f=this.static_len+3+7>>>3,f<=e&&(e=f)):e=f=b+5;b+4<=e&&-1!=a?this._tr_stored_block(a,b,c):f==e?(this.send_bits(2+(c?1:0),3),this.compress_block(JZ.StaticTree.static_ltree,JZ.StaticTree.static_dtree)):(this.send_bits(4+(c?1:0),3),this.send_all_trees(this.l_desc.max_code+1,this.d_desc.max_code+1,h+1),this.compress_block(this.dyn_ltree,this.dyn_dtree));this.init_block();c&&this.bi_windup()},"~N,~N,~B");c(c$,"fill_window",function(){var a,
b,c,e;do{e=this.window_size-this.lookahead-this.strstart;if(0==e&&0==this.strstart&&0==this.lookahead)e=this.w_size;else if(-1==e)e--;else if(this.strstart>=this.w_size+this.w_size-262){System.arraycopy(this.window,this.w_size,this.window,0,this.w_size);this.match_start-=this.w_size;this.strstart-=this.w_size;this.block_start-=this.w_size;c=a=this.hash_size;do b=this.head[--c]&65535,this.head[c]=b>=this.w_size?b-this.w_size:0;while(0!=--a);c=a=this.w_size;do b=this.prev[--c]&65535,this.prev[c]=b>=
this.w_size?b-this.w_size:0;while(0!=--a);e+=this.w_size}if(0==this.strm.avail_in)break;a=this.strm.read_buf(this.window,this.strstart+this.lookahead,e);this.lookahead+=a;3<=this.lookahead&&(this.ins_h=this.window[this.strstart]&255,this.ins_h=(this.ins_h<<this.hash_shift^this.window[this.strstart+1]&255)&this.hash_mask)}while(262>this.lookahead&&0!=this.strm.avail_in)});c(c$,"deflate_fast",function(a){for(var b=0,c;;){if(262>this.lookahead){this.fill_window();if(262>this.lookahead&&0==a)return 0;
if(0==this.lookahead)break}3<=this.lookahead&&(this.ins_h=(this.ins_h<<this.hash_shift^this.window[this.strstart+2]&255)&this.hash_mask,b=this.head[this.ins_h]&65535,this.prev[this.strstart&this.w_mask]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart);0!=b&&(this.strstart-b&65535)<=this.w_size-262&&2!=this.strategy&&(this.match_length=this.longest_match(b));if(3<=this.match_length)if(c=this._tr_tally(this.strstart-this.match_start,this.match_length-3),this.lookahead-=this.match_length,this.match_length<=
this.max_lazy_match&&3<=this.lookahead){this.match_length--;do this.strstart++,this.ins_h=(this.ins_h<<this.hash_shift^this.window[this.strstart+2]&255)&this.hash_mask,b=this.head[this.ins_h]&65535,this.prev[this.strstart&this.w_mask]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart;while(0!=--this.match_length);this.strstart++}else this.strstart+=this.match_length,this.match_length=0,this.ins_h=this.window[this.strstart]&255,this.ins_h=(this.ins_h<<this.hash_shift^this.window[this.strstart+
1]&255)&this.hash_mask;else c=this._tr_tally(0,this.window[this.strstart]&255),this.lookahead--,this.strstart++;if(c&&(this.flush_block_only(!1),0==this.strm.avail_out))return 0}this.flush_block_only(4==a);return 0==this.strm.avail_out?4==a?2:0:4==a?3:1},"~N");c(c$,"deflate_slow",function(a){for(var b=0,c;;){if(262>this.lookahead){this.fill_window();if(262>this.lookahead&&0==a)return 0;if(0==this.lookahead)break}3<=this.lookahead&&(this.ins_h=(this.ins_h<<this.hash_shift^this.window[this.strstart+
2]&255)&this.hash_mask,b=this.head[this.ins_h]&65535,this.prev[this.strstart&this.w_mask]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart);this.prev_length=this.match_length;this.prev_match=this.match_start;this.match_length=2;if(0!=b&&(this.prev_length<this.max_lazy_match&&(this.strstart-b&65535)<=this.w_size-262)&&(2!=this.strategy&&(this.match_length=this.longest_match(b)),5>=this.match_length&&(1==this.strategy||3==this.match_length&&4096<this.strstart-this.match_start)))this.match_length=
2;if(3<=this.prev_length&&this.match_length<=this.prev_length){var e=this.strstart+this.lookahead-3;c=this._tr_tally(this.strstart-1-this.prev_match,this.prev_length-3);this.lookahead-=this.prev_length-1;this.prev_length-=2;do++this.strstart<=e&&(this.ins_h=(this.ins_h<<this.hash_shift^this.window[this.strstart+2]&255)&this.hash_mask,b=this.head[this.ins_h]&65535,this.prev[this.strstart&this.w_mask]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart);while(0!=--this.prev_length);this.match_available=
0;this.match_length=2;this.strstart++;if(c&&(this.flush_block_only(!1),0==this.strm.avail_out))return 0}else if(0!=this.match_available){if((c=this._tr_tally(0,this.window[this.strstart-1]&255))&&this.flush_block_only(!1),this.strstart++,this.lookahead--,0==this.strm.avail_out)return 0}else this.match_available=1,this.strstart++,this.lookahead--}0!=this.match_available&&(this._tr_tally(0,this.window[this.strstart-1]&255),this.match_available=0);this.flush_block_only(4==a);return 0==this.strm.avail_out?
4==a?2:0:4==a?3:1},"~N");c(c$,"longest_match",function(a){var b=this.max_chain_length,c=this.strstart,e,f=this.prev_length,h=this.strstart>this.w_size-262?this.strstart-(this.w_size-262):0,j=this.nice_match,k=this.w_mask,l=this.strstart+258,m=this.window[c+f-1],n=this.window[c+f];this.prev_length>=this.good_match&&(b>>=2);j>this.lookahead&&(j=this.lookahead);do if(e=a,!(this.window[e+f]!=n||this.window[e+f-1]!=m||this.window[e]!=this.window[c]||this.window[++e]!=this.window[c+1])){c+=2;e++;do;while(this.window[++c]==
this.window[++e]&&this.window[++c]==this.window[++e]&&this.window[++c]==this.window[++e]&&this.window[++c]==this.window[++e]&&this.window[++c]==this.window[++e]&&this.window[++c]==this.window[++e]&&this.window[++c]==this.window[++e]&&this.window[++c]==this.window[++e]&&c<l);e=258-(l-c);c=l-258;if(e>f){this.match_start=a;f=e;if(e>=j)break;m=this.window[c+f-1];n=this.window[c+f]}}while((a=this.prev[a&k]&65535)>h&&0!=--b);return f<=this.lookahead?f:this.lookahead},"~N");c(c$,"deflateInit5",function(a,
b,c,e,f){var h=1;this.strm.msg=null;-1==a&&(a=6);0>c?(h=0,c=-c):15<c&&(h=2,c-=16,this.strm.checksum=new JZ.CRC32);if(1>e||9<e||8!=b||9>c||15<c||0>a||9<a||0>f||2<f)return-2;this.strm.dstate=this;this.wrap=h;this.w_bits=c;this.w_size=1<<this.w_bits;this.w_mask=this.w_size-1;this.hash_bits=e+7;this.hash_size=1<<this.hash_bits;this.hash_mask=this.hash_size-1;this.hash_shift=n((this.hash_bits+3-1)/3);this.window=O(2*this.w_size,0);this.prev=U(this.w_size,0);this.head=U(this.hash_size,0);this.lit_bufsize=
1<<e+6;this.pending_buf=O(4*this.lit_bufsize,0);this.pending_buf_size=4*this.lit_bufsize;this.d_buf=n(this.lit_bufsize/2);this.l_buf=3*this.lit_bufsize;this.level=a;this.strategy=f;this.method=b;return this.deflateReset()},"~N,~N,~N,~N,~N");c(c$,"deflateReset",function(){this.strm.total_in=this.strm.total_out=0;this.strm.msg=null;this.strm.data_type=2;this.pending_out=this.pending=0;0>this.wrap&&(this.wrap=-this.wrap);this.status=0==this.wrap?113:42;this.strm.checksum.reset();this.last_flush=0;this.tr_init();
this.lm_init();return 0});c(c$,"deflateEnd",function(){if(42!=this.status&&113!=this.status&&666!=this.status)return-2;this.window=this.prev=this.head=this.pending_buf=null;return 113==this.status?-3:0});c(c$,"deflateParams",function(a,b){var c=0;-1==a&&(a=6);if(0>a||9<a||0>b||2<b)return-2;JZ.Deflate.config_table[this.level].func!=JZ.Deflate.config_table[a].func&&0!=this.strm.total_in&&(c=this.strm.deflate(1));this.level!=a&&(this.level=a,this.max_lazy_match=JZ.Deflate.config_table[this.level].max_lazy,
this.good_match=JZ.Deflate.config_table[this.level].good_length,this.nice_match=JZ.Deflate.config_table[this.level].nice_length,this.max_chain_length=JZ.Deflate.config_table[this.level].max_chain);this.strategy=b;return c},"~N,~N");c(c$,"deflateSetDictionary",function(a,b){var c=b,e=0;if(null==a||42!=this.status)return-2;this.strm.checksum.update(a,0,b);if(3>c)return 0;c>this.w_size-262&&(c=this.w_size-262,e=b-c);System.arraycopy(a,e,this.window,0,c);this.block_start=this.strstart=c;this.ins_h=this.window[0]&
255;this.ins_h=(this.ins_h<<this.hash_shift^this.window[1]&255)&this.hash_mask;for(e=0;e<=c-3;e++)this.ins_h=(this.ins_h<<this.hash_shift^this.window[e+2]&255)&this.hash_mask,this.prev[e&this.w_mask]=this.head[this.ins_h],this.head[this.ins_h]=e;return 0},"~A,~N");c(c$,"deflate",function(a){var b;if(4<a||0>a)return-2;if(null==this.strm.next_out||null==this.strm.next_in&&0!=this.strm.avail_in||666==this.status&&4!=a)return this.strm.msg=JZ.Deflate.z_errmsg[4],-2;if(0==this.strm.avail_out)return this.strm.msg=
JZ.Deflate.z_errmsg[7],-5;b=this.last_flush;this.last_flush=a;if(42==this.status){if(2==this.wrap)this.getGZIPHeader().put(this),this.status=113;else{var c=8+(this.w_bits-8<<4)<<8,e=(this.level-1&255)>>1;3<e&&(e=3);c|=e<<6;0!=this.strstart&&(c|=32);this.status=113;this.putShortMSB(c+(31-c%31));0!=this.strstart&&(c=this.strm.checksum.getValue(),this.putShortMSB(c>>>16),this.putShortMSB(c&65535))}this.strm.checksum.reset()}if(0!=this.pending){if(this.strm.flush_pending(),0==this.strm.avail_out)return this.last_flush=
-1,0}else if(0==this.strm.avail_in&&a<=b&&4!=a)return this.strm.msg=JZ.Deflate.z_errmsg[7],-5;if(666==this.status&&0!=this.strm.avail_in)return this.strm.msg=JZ.Deflate.z_errmsg[7],-5;if(0!=this.strm.avail_in||0!=this.lookahead||0!=a&&666!=this.status){b=-1;switch(JZ.Deflate.config_table[this.level].func){case 0:b=this.deflate_stored(a);break;case 1:b=this.deflate_fast(a);break;case 2:b=this.deflate_slow(a)}if(2==b||3==b)this.status=666;if(0==b||2==b)return 0==this.strm.avail_out&&(this.last_flush=
-1),0;if(1==b){if(1==a)this._tr_align();else if(this._tr_stored_block(0,0,!1),3==a)for(b=0;b<this.hash_size;b++)this.head[b]=0;this.strm.flush_pending();if(0==this.strm.avail_out)return this.last_flush=-1,0}}if(4!=a)return 0;if(0>=this.wrap)return 1;2==this.wrap?(c=this.strm.checksum.getValue(),this.put_byteB(c&255),this.put_byteB(c>>8&255),this.put_byteB(c>>16&255),this.put_byteB(c>>24&255),this.put_byteB(this.strm.total_in&255),this.put_byteB(this.strm.total_in>>8&255),this.put_byteB(this.strm.total_in>>
16&255),this.put_byteB(this.strm.total_in>>24&255),this.getGZIPHeader().setCRC(c)):(c=this.strm.checksum.getValue(),this.putShortMSB(c>>>16),this.putShortMSB(c&65535));this.strm.flush_pending();0<this.wrap&&(this.wrap=-this.wrap);return 0!=this.pending?0:1},"~N");c(c$,"getGZIPHeader",function(){null==this.gheader&&(this.gheader=new JZ.GZIPHeader);return this.gheader});c(c$,"getBytesRead",function(){return this.strm.total_in});c(c$,"getBytesWritten",function(){return this.strm.total_out});R();c$=q(function(){this.func=
this.max_chain=this.nice_length=this.max_lazy=this.good_length=0;s(this,arguments)},JZ.Deflate,"Config");w(c$,function(a,b,c,e,f){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=e;this.func=f},"~N,~N,~N,~N,~N");c$=Q();B(c$,"MAX_MEM_LEVEL",9,"Z_DEFAULT_COMPRESSION",-1,"MAX_WBITS",15,"DEF_MEM_LEVEL",8,"STORED",0,"FAST",1,"SLOW",2,"config_table",null);JZ.Deflate.config_table=Array(10);JZ.Deflate.config_table[0]=new JZ.Deflate.Config(0,0,0,0,0);JZ.Deflate.config_table[1]=new JZ.Deflate.Config(4,
4,8,4,1);JZ.Deflate.config_table[2]=new JZ.Deflate.Config(4,5,16,8,1);JZ.Deflate.config_table[3]=new JZ.Deflate.Config(4,6,32,32,1);JZ.Deflate.config_table[4]=new JZ.Deflate.Config(4,4,16,16,2);JZ.Deflate.config_table[5]=new JZ.Deflate.Config(8,16,32,32,2);JZ.Deflate.config_table[6]=new JZ.Deflate.Config(8,16,128,128,2);JZ.Deflate.config_table[7]=new JZ.Deflate.Config(8,32,128,256,2);JZ.Deflate.config_table[8]=new JZ.Deflate.Config(32,128,258,1024,2);JZ.Deflate.config_table[9]=new JZ.Deflate.Config(32,
258,258,4096,2);B(c$,"z_errmsg","need dictionary;stream end;;file error;stream error;data error;insufficient memory;buffer error;incompatible version;".split(";"),"NeedMore",0,"BlockDone",1,"FinishStarted",2,"FinishDone",3,"PRESET_DICT",32,"Z_FILTERED",1,"Z_HUFFMAN_ONLY",2,"Z_DEFAULT_STRATEGY",0,"Z_NO_FLUSH",0,"Z_PARTIAL_FLUSH",1,"Z_FULL_FLUSH",3,"Z_FINISH",4,"Z_OK",0,"Z_STREAM_END",1,"Z_NEED_DICT",2,"Z_STREAM_ERROR",-2,"Z_DATA_ERROR",-3,"Z_BUF_ERROR",-5,"INIT_STATE",42,"BUSY_STATE",113,"FINISH_STATE",
666,"Z_DEFLATED",8,"STORED_BLOCK",0,"STATIC_TREES",1,"DYN_TREES",2,"Z_BINARY",0,"Z_ASCII",1,"Z_UNKNOWN",2,"Buf_size",16,"REP_3_6",16,"REPZ_3_10",17,"REPZ_11_138",18,"MIN_MATCH",3,"MAX_MATCH",258,"MIN_LOOKAHEAD",262,"MAX_BITS",15,"D_CODES",30,"BL_CODES",19,"LENGTH_CODES",29,"LITERALS",256,"L_CODES",286,"HEAP_SIZE",573,"END_BLOCK",256)}),m("JSV.js2d"),u(["javajs.api.GenericPlatform"],"JSV.js2d.JsPlatform","java.net.URL JU.AjaxURLStreamHandlerFactory JSV.js2d.Display $.Image $.JsFile $.JsFont $.Mouse".split(" "),
function(){c$=q(function(){this.context=this.viewer=this.canvas=null;s(this,arguments)},JSV.js2d,"JsPlatform",null,javajs.api.GenericPlatform);e(c$,"setViewer",function(a,b){this.viewer=a;this.canvas=b;null!=b&&(this.context=b.getContext("2d"),b.imgdata=this.context.getImageData(0,0,b.width,b.height),b.buf8=b.imgdata.data);try{java.net.URL.setURLStreamHandlerFactory(new JU.AjaxURLStreamHandlerFactory)}catch(c){}},"javajs.api.PlatformViewer,~O");e(c$,"isSingleThreaded",function(){return!0});e(c$,"getJsObjectInfo",
function(a,b,c){return"localName"==b?a[0].nodeName:null==c?a[0][b]:a[0][b](c[0])},"~A,~S,~A");e(c$,"isHeadless",function(){return!1});c(c$,"getMouseManager",function(a,b){return new JSV.js2d.Mouse(b)},"~N,~O");e(c$,"convertPointFromScreen",function(a,b){JSV.js2d.Display.convertPointFromScreen(a,b)},"~O,JU.P3");e(c$,"getFullScreenDimensions",function(a,b){JSV.js2d.Display.getFullScreenDimensions(a,b)},"~O,~A");e(c$,"getMenuPopup",function(){return null},"~S,~S");e(c$,"hasFocus",function(a){return JSV.js2d.Display.hasFocus(a)},
"~O");e(c$,"prompt",function(a,b,c,e){return JSV.js2d.Display.prompt(a,b,c,e)},"~S,~S,~A,~B");e(c$,"renderScreenImage",function(a,b){JSV.js2d.Display.renderScreenImage(this.viewer,a,b)},"~O,~O");e(c$,"drawImage",function(a,b,c,e,f,h){JSV.js2d.Image.drawImage(a,b,c,e,f,h)},"~O,~O,~N,~N,~N,~N");e(c$,"requestFocusInWindow",function(a){JSV.js2d.Display.requestFocusInWindow(a)},"~O");e(c$,"repaint",function(a){JSV.js2d.Display.repaint(a)},"~O");e(c$,"setTransparentCursor",function(a){JSV.js2d.Display.setTransparentCursor(a)},
"~O");e(c$,"setCursor",function(a,b){JSV.js2d.Display.setCursor(a,b)},"~N,~O");e(c$,"allocateRgbImage",function(a,b,c,e,f,h){return JSV.js2d.Image.allocateRgbImage(a,b,c,e,f,h?null:this.canvas)},"~N,~N,~A,~N,~B,~B");e(c$,"notifyEndOfRendering",function(){});e(c$,"createImage",function(){return null},"~O");e(c$,"disposeGraphics",function(){},"~O");e(c$,"grabPixels",function(a,b,c){a.image&&(b!=a.width||c!=a.height)&&Jmol._setCanvasImage(a,b,c);if(a.buf32)return a.buf32;b=JSV.js2d.Image.grabPixels(JSV.js2d.Image.getGraphics(a),
b,c);return a.buf32=b},"~O,~N,~N,~A,~N,~N");e(c$,"drawImageToBuffer",function(a,b,c,e,f){return this.grabPixels(c,e,f,null,0,0)},"~O,~O,~O,~N,~N,~N");e(c$,"getTextPixels",function(a,b,c,e,f,h,j){return JSV.js2d.Image.getTextPixels(a,b,c,f,h,j)},"~S,javajs.awt.Font,~O,~O,~N,~N,~N");e(c$,"flushImage",function(){},"~O");e(c$,"getGraphics",function(a){return JSV.js2d.Image.getGraphics(a)},"~O");e(c$,"getImageHeight",function(a){return null==a?-1:JSV.js2d.Image.getHeight(a)},"~O");e(c$,"getImageWidth",
function(a){return null==a?-1:JSV.js2d.Image.getWidth(a)},"~O");e(c$,"getStaticGraphics",function(a,b){return JSV.js2d.Image.getStaticGraphics(a,b)},"~O,~B");e(c$,"newBufferedImage",function(a,b,c){return"undefined"!=typeof Jmol&&Jmol._getHiddenCanvas?Jmol._getHiddenCanvas(this.viewer.applet,"stereoImage",b,c):null},"~O,~N,~N");e(c$,"newOffScreenImage",function(a,b){return"undefined"!=typeof Jmol&&Jmol._getHiddenCanvas?Jmol._getHiddenCanvas(this.viewer.applet,"textImage",a,b):null},"~N,~N");e(c$,
"waitForDisplay",function(a,b){if("undefined"==typeof Jmol||!Jmol._getHiddenCanvas)return!1;var c=this.viewer,e=c.getEvalContextAndHoldQueue(c.eval),f=a[0];return Jmol._loadImage(this,a,b,function(a,b){c.loadImageData(a,b,f,e)})},"~O,~O");e(c$,"fontStringWidth",function(a,b){return JSV.js2d.JsFont.stringWidth(a,b)},"javajs.awt.Font,~S");e(c$,"getFontAscent",function(a){return JSV.js2d.JsFont.getAscent(a)},"~O");e(c$,"getFontDescent",function(a){return JSV.js2d.JsFont.getDescent(a)},"~O");e(c$,"getFontMetrics",
function(a,b){return JSV.js2d.JsFont.getFontMetrics(a,b)},"javajs.awt.Font,~O");e(c$,"newFont",function(a,b,c,e){return JSV.js2d.JsFont.newFont(a,b,c,e,"px")},"~S,~B,~B,~N");e(c$,"getDateFormat",function(a){if(a){var b=new Date;a=b.toString().split(" ");var c="0"+b.getMonth(),c=c.substring(c.length-2),b="0"+b.getDate(),b=b.substring(b.length-2);return a[3]+c+b+a[4].replace(/\:/g,"")+a[5].substring(3,6)+"'"+a[5].substring(6,8)+"'"}return(""+new Date).split(" (")[0]},"~B");e(c$,"newFile",function(a){return new JSV.js2d.JsFile(a)},
"~S");e(c$,"getBufferedFileInputStream",function(){return null},"~S");e(c$,"getBufferedURLInputStream",function(a,b,c){return JSV.js2d.JsFile.getBufferedURLInputStream(a,b,c)},"java.net.URL,~A,~S");c(c$,"getMouseManager",function(a){return new JSV.js2d.Mouse(a)},"JSV.api.JSVPanel");e(c$,"getLocalUrl",function(){return null},"~S")}),m("JSV.js2d"),c$=A(JSV.js2d,"Display"),c$.getFullScreenDimensions=c(c$,"getFullScreenDimensions",function(a,b){b[0]=a.width;b[1]=a.height},"~O,~A"),c$.hasFocus=c(c$,"hasFocus",
function(){return!0},"~O"),c$.requestFocusInWindow=c(c$,"requestFocusInWindow",function(){},"~O"),c$.repaint=c(c$,"repaint",function(){},"~O"),c$.renderScreenImage=c(c$,"renderScreenImage",function(){},"javajs.api.PlatformViewer,~O,~O"),c$.setTransparentCursor=c(c$,"setTransparentCursor",function(){},"~O"),c$.setCursor=c(c$,"setCursor",function(){},"~N,~O"),c$.prompt=c(c$,"prompt",function(a,b){var c=prompt(a,b);return null!=c?c:"null"},"~S,~S,~A,~B"),c$.convertPointFromScreen=c(c$,"convertPointFromScreen",
function(){},"~O,JU.P3"),m("JSV.js2d"),c$=A(JSV.js2d,"Image"),c$.getWidth=c(c$,"getWidth",function(a){return a.imageWidth?a.imageWidth:a.width},"~O"),c$.getHeight=c(c$,"getHeight",function(a){return a.imageHeight?a.imageHeight:a.height},"~O"),c$.grabPixels=c(c$,"grabPixels",function(a,b,c){if(a._buf32)return a._buf32;a=a.getImageData(0,0,b,c).data;return this.toIntARGB(a)},"~O,~N,~N"),c$.toIntARGB=c(c$,"toIntARGB",function(a){for(var b=n(a.length/4),c=H(b,0),e=0,f=0;e<b;f++)c[e++]=a[f++]<<16|a[f++]<<
8|a[f++]|4278190080;return c},"~A"),c$.fromIntARGB=c(c$,"fromIntARGB",function(a,b){for(var c=b.length>>2,e=0,f=0;e<c;e++)b[f++]=a[e]>>16&255,b[f++]=a[e]>>8&255,b[f++]=a[e]&255,b[f++]=255},"~A,~A"),c$.getTextPixels=c(c$,"getTextPixels",function(a,b,c,e,f,h){c.fillStyle="#000000";c.fillRect(0,0,e,f);c.fillStyle="#FFFFFF";c.font=b.font;c.fillText(a,0,h);return this.grabPixels(c,e,f)},"~S,javajs.awt.Font,~O,~N,~N,~N"),c$.allocateRgbImage=c(c$,"allocateRgbImage",function(a,b,c,e,f,h){null==h&&(h={width:a,
height:b});h.buf32=c;return h},"~N,~N,~A,~N,~B,~O"),c$.getStaticGraphics=c(c$,"getStaticGraphics",function(a){return this.getGraphics(a)},"~O,~B"),c$.getGraphics=c(c$,"getGraphics",function(a){return a.getContext("2d")},"~O"),c$.drawImage=c(c$,"drawImage",function(a,b,c,e){this.fromIntARGB(b.buf32,b.buf8);a.putImageData(b.imgdata,c,e)},"~O,~O,~N,~N,~N,~N"),m("JSV.js2d"),u(["javajs.api.GenericFileInterface"],"JSV.js2d.JsFile",["JU.PT","JSV.common.JSVFileManager"],function(){c$=q(function(){this.fullName=
this.name=null;s(this,arguments)},JSV.js2d,"JsFile",null,javajs.api.GenericFileInterface);c$.newFile=c(c$,"newFile",function(a){return new JSV.js2d.JsFile(a)},"~S");w(c$,function(a){this.name=a.$replace("\\","/");this.fullName=a;!this.fullName.startsWith("/")&&0>JSV.common.JSVFileManager.urlTypeIndex(a)&&(this.fullName=JSV.common.JSVFileManager.jsDocumentBase+"/"+this.fullName);this.fullName=JU.PT.simpleReplace(this.fullName,"/./","/");a.substring(a.lastIndexOf("/")+1)},"~S");e(c$,"getParentAsFile",
function(){var a=this.fullName.lastIndexOf("/");return 0>a?null:new JSV.js2d.JsFile(this.fullName.substring(0,a))});e(c$,"getFullPath",function(){return this.fullName});e(c$,"getName",function(){return this.name});e(c$,"isDirectory",function(){return this.fullName.endsWith("/")});e(c$,"length",function(){return 0});c$.getBufferedURLInputStream=c(c$,"getBufferedURLInputStream",function(a,b,c){try{var e=a.openConnection();null!=b?e.outputBytes(b):null!=c&&e.outputString(c);return e.getSB()}catch(f){if(v(f,
Exception))return f.toString();throw f;}},"java.net.URL,~A,~S")}),m("JSV.js2d"),c$=A(JSV.js2d,"JsFont"),c$.newFont=c(c$,"newFont",function(a,b,c,e,f){a=a.equals("Monospaced")?"Courier":a.startsWith("Sans")?"Sans-Serif":"Serif";return(b?"bold ":"")+(c?"italic ":"")+e+f+" "+a},"~S,~B,~B,~N,~S"),c$.getFontMetrics=c(c$,"getFontMetrics",function(a,b){b.font!=a.font&&(b.font=a.font,a.font=b.font,b._fontAscent=Math.ceil(a.fontSize),b._fontDescent=Math.ceil(0.25*a.fontSize));return b},"javajs.awt.Font,~O"),
c$.getAscent=c(c$,"getAscent",function(a){return Math.ceil(a._fontAscent)},"~O"),c$.getDescent=c(c$,"getDescent",function(a){return Math.ceil(a._fontDescent)},"~O"),c$.stringWidth=c(c$,"stringWidth",function(a,b){a.fontMetrics.font=a.font;return Math.ceil(a.fontMetrics.measureText(b).width)},"javajs.awt.Font,~S"),m("JSV.js2d"),u(["javajs.api.GenericMouseInterface","javajs.awt.event.Event"],"JSV.js2d.Mouse",["J.util.Logger"],function(){c$=q(function(){this.pd=null;this.modifiersWhenPressed10=this.yWhenPressed=
this.xWhenPressed=0;this.isMouseDown=!1;s(this,arguments)},JSV.js2d,"Mouse",null,javajs.api.GenericMouseInterface);w(c$,function(a){this.pd=a.getPanelData()},"JSV.api.JSVPanel");e(c$,"clear",function(){});e(c$,"dispose",function(){});e(c$,"processEvent",function(a,b,c,e,f){-1!=a&&(e=JSV.js2d.Mouse.applyLeftMouse(e));switch(a){case -1:this.wheeled(f,b,e|32);break;case 501:this.xWhenPressed=b;this.yWhenPressed=c;this.modifiersWhenPressed10=e;this.pressed(f,b,c,e,!1);break;case 506:this.dragged(f,b,
c,e);break;case 504:this.entered(f,b,c);break;case 505:this.exited(f,b,c);break;case 503:this.moved(f,b,c,e);break;case 502:this.released(f,b,c,e);b==this.xWhenPressed&&(c==this.yWhenPressed&&e==this.modifiersWhenPressed10)&&this.clicked(f,b,c,e,1);break;default:return!1}return!0},"~N,~N,~N,~N,~N");c(c$,"mouseClicked",function(a){this.clicked(a.getWhen(),a.getX(),a.getY(),a.getModifiers(),a.getClickCount())},"java.awt.event.MouseEvent");c(c$,"mouseEntered",function(a){this.entered(a.getWhen(),a.getX(),
a.getY())},"java.awt.event.MouseEvent");c(c$,"mouseExited",function(a){this.exited(a.getWhen(),a.getX(),a.getY())},"java.awt.event.MouseEvent");c(c$,"mousePressed",function(a){this.pressed(a.getWhen(),a.getX(),a.getY(),a.getModifiers(),a.isPopupTrigger())},"java.awt.event.MouseEvent");c(c$,"mouseReleased",function(a){this.released(a.getWhen(),a.getX(),a.getY(),a.getModifiers())},"java.awt.event.MouseEvent");c(c$,"mouseDragged",function(a){var b=a.getModifiers();0==(b&28)&&(b|=16);this.dragged(a.getWhen(),
a.getX(),a.getY(),b)},"java.awt.event.MouseEvent");c(c$,"mouseMoved",function(a){this.moved(a.getWhen(),a.getX(),a.getY(),a.getModifiers())},"java.awt.event.MouseEvent");c(c$,"mouseWheelMoved",function(a){a.consume();this.wheeled(a.getWhen(),a.getWheelRotation(),a.getModifiers()|32)},"java.awt.event.MouseWheelEvent");c(c$,"keyTyped",function(a){var b=a.getKeyChar(),c=a.getModifiers();J.util.Logger.info("MouseManager keyTyped: "+b+" "+(0+b.charCodeAt(0))+" "+c);this.pd.keyTyped(b.charCodeAt(0),c)&&
a.consume()},"java.awt.event.KeyEvent");c(c$,"keyPressed",function(a){this.pd.keyPressed(a.getKeyCode(),a.getModifiers())&&a.consume()},"java.awt.event.KeyEvent");c(c$,"keyReleased",function(a){this.pd.keyReleased(a.getKeyCode())},"java.awt.event.KeyEvent");c(c$,"entered",function(a,b,c){this.pd.mouseEnterExit(a,b,c,!1)},"~N,~N,~N");c(c$,"exited",function(a,b,c){this.pd.mouseEnterExit(a,b,c,!0)},"~N,~N,~N");c(c$,"clicked",function(a,b,c,e){this.pd.mouseAction(2,a,b,c,1,e)},"~N,~N,~N,~N,~N");c(c$,
"moved",function(a,b,c,e){this.isMouseDown?this.pd.mouseAction(1,a,b,c,0,JSV.js2d.Mouse.applyLeftMouse(e)):this.pd.mouseAction(0,a,b,c,0,e&-29)},"~N,~N,~N,~N");c(c$,"wheeled",function(a,b,c){this.pd.mouseAction(3,a,0,b,0,c)},"~N,~N,~N");c(c$,"pressed",function(a,b,c,e){this.isMouseDown=!0;this.pd.mouseAction(4,a,b,c,0,e)},"~N,~N,~N,~N,~B");c(c$,"released",function(a,b,c,e){this.isMouseDown=!1;this.pd.mouseAction(5,a,b,c,0,e)},"~N,~N,~N,~N");c(c$,"dragged",function(a,b,c,e){20==(e&20)&&(e=e&-5|2);
this.pd.mouseAction(1,a,b,c,0,e)},"~N,~N,~N,~N");c$.applyLeftMouse=c(c$,"applyLeftMouse",function(a){return 0==(a&28)?a|16:a},"~N");e(c$,"processTwoPointGesture",function(){},"~A")}),m("JSV.js2d"),u(["JSV.api.JSVGraphics"],"JSV.js2d.JsG2D",["javajs.awt.Color","JU.CU"],function(){c$=q(function(){this.windowHeight=this.windowWidth=0;this.inPath=this.isShifted=!1;s(this,arguments)},JSV.js2d,"JsG2D",null,JSV.api.JSVGraphics);w(c$,function(){});e(c$,"getColor4",function(a,b,c,e){return javajs.awt.Color.get4(a,
b,c,e)},"~N,~N,~N,~N");e(c$,"getColor3",function(a,b,c){return javajs.awt.Color.get3(a,b,c)},"~N,~N,~N");e(c$,"getColor1",function(a){return javajs.awt.Color.get1(a)},"~N");e(c$,"newGrayScaleImage",function(a,b,c,e,f){var h,j;null==b?(h=(""+Math.random()).substring(3),j=document.createElement("canvas"),j.id=h,j.style.width=c+"px",j.style.height=e+"px",j.width=c,j.height=e,h=a.canvas.applet._id,a=document.getElementById(h+"_imagelayer"),b=new Image,b.canvas=j,b.appId=h,b.id=h+"_image",b.layer=a,b.w=
c,b.h=e,b.onload=function(){try{URL.revokeObjectURL(b.src)}catch(a){}},h=document.createElement("div"),b.div=h,h.style.position="relative",a.appendChild(h),h.appendChild(b)):j=b.canvas;a=j.getContext("2d");c=a.getImageData(0,0,c,e);e=c.data;h=f.length;for(var k=0,l=0;l<h;l++)e[k++]=e[k++]=e[k++]=f[l],e[k++]=255;a.putImageData(c,0,0);j.toBlob(function(a){b.src=URL.createObjectURL(a)});return b},"~O,~O,~N,~N,~A");e(c$,"drawGrayScaleImage",function(a,b,c,e,f,h,j,k,l,m){a=f-c+1;h=h-e+1;l=l-j+1;m=m-k+
1;f=b.w*a/l;var n=b.h*h/m;b.width=f;b.height=n;var q=b.div;b=b.layer;b.style.left=c+"px";b.style.top=e+"px";b.style.width=a+"px";b.style.height=h+"px";q.style.left=-j*a/l+"px";q.style.top=-k*h/m+"px";q.style.width=f+"px";q.style.height=n+"px"},"~O,~O,~N,~N,~N,~N,~N,~N,~N,~N");e(c$,"drawLine",function(a,b,c,e,f){this.inPath||a.beginPath();a.moveTo(b,c);a.lineTo(e,f);this.inPath||a.stroke()},"~O,~N,~N,~N,~N");e(c$,"drawCircle",function(a,b,c,e){e/=2;a.beginPath();a.arc(b+e,c+e,e,0,2*Math.PI,!1);a.stroke()},
"~O,~N,~N,~N");e(c$,"drawPolygon",function(a,b,c,e){this.doPoly(a,b,c,e,!1)},"~O,~A,~A,~N");c(c$,"doPoly",function(a,b,c,e,f){a.beginPath();a.moveTo(b[0],c[0]);for(var h=1;h<e;h++)a.lineTo(b[h],c[h]);f?a.fill():a.stroke()},"~O,~A,~A,~N,~B");e(c$,"drawRect",function(a,b,c,e,f){a.beginPath();a.rect(b,c,e,f);a.stroke()},"~O,~N,~N,~N,~N");e(c$,"drawString",function(a,b,c,e){a.fillText(b,c,e)},"~O,~S,~N,~N");e(c$,"drawStringRotated",function(){},"~O,~S,~N,~N,~N");e(c$,"fillBackground",function(a,b){null==
b?(this.isShifted||(a.translate(-0.5,-0.5),this.isShifted=!0),a.clearRect(0,0,this.windowWidth,this.windowHeight)):(this.setGraphicsColor(a,b),this.fillRect(a,0,0,this.windowWidth,this.windowHeight))},"~O,javajs.api.GenericColor");e(c$,"fillCircle",function(a,b,c,e){e/=2;a.beginPath();a.arc(b+e,c+e,e,0,2*Math.PI,!1);a.fill()},"~O,~N,~N,~N");e(c$,"fillPolygon",function(a,b,c,e){this.doPoly(a,b,c,e,!0)},"~O,~A,~A,~N");e(c$,"fillRect",function(a,b,c,e,f){a.fillRect(b,c,e,f)},"~O,~N,~N,~N,~N");e(c$,"setGraphicsColor",
function(a,b){var c=JU.CU.toCSSString(b);a.fillStyle=a.strokeStyle=c},"~O,javajs.api.GenericColor");e(c$,"setFont",function(a,b){var c=b.getInfo(),e=c.indexOf(" "),c=c.substring(0,e)+"px"+c.substring(e);a.font=c;return b},"~O,javajs.awt.Font");e(c$,"setStrokeBold",function(a,b){a.lineWidth=b?2:1},"~O,~B");e(c$,"setWindowParameters",function(a,b){this.windowWidth=a;this.windowHeight=b},"~N,~N");e(c$,"translateScale",function(){},"~O,~N,~N,~N");e(c$,"canDoLineTo",function(){return!0});e(c$,"doStroke",
function(a,b){(this.inPath=b)?a.beginPath():a.stroke()},"~O,~B");e(c$,"lineTo",function(a,b,c){a.lineTo(b,c)},"~O,~N,~N")}),m("javajs.awt"),u(["javajs.api.GenericColor"],"javajs.awt.Color",null,function(){c$=q(function(){this.argb=0;s(this,arguments)},javajs.awt,"Color",null,javajs.api.GenericColor);e(c$,"getRGB",function(){return this.argb&16777215});e(c$,"getOpacity255",function(){return this.argb>>24&255});e(c$,"setOpacity255",function(a){this.argb=this.argb&16777215|(a&255)<<24},"~N");c$.get1=
c(c$,"get1",function(a){var b=new javajs.awt.Color;b.argb=a|4278190080;return b},"~N");c$.get3=c(c$,"get3",function(a,b,c){return(new javajs.awt.Color).set4(a,b,c,255)},"~N,~N,~N");c$.get4=c(c$,"get4",function(a,b,c,e){return(new javajs.awt.Color).set4(a,b,c,e)},"~N,~N,~N,~N");c(c$,"set4",function(a,b,c,e){this.argb=(e<<24|a<<16|b<<8|c)&4294967295;return this},"~N,~N,~N,~N")}),m("javajs.api"),F(javajs.api,"GenericColor"),m("JSV.js2d"),u(["JSV.common.ColorParameters"],"JSV.js2d.JsParameters",["javajs.awt.Color"],
function(){c$=A(JSV.js2d,"JsParameters",JSV.common.ColorParameters);w(c$,function(){I(this,JSV.js2d.JsParameters,[])});e(c$,"isValidFontName",function(){return!0},"~S");e(c$,"getColor1",function(a){return javajs.awt.Color.get1(a)},"~N");e(c$,"getColor3",function(a,b,c){return javajs.awt.Color.get3(a,b,c)},"~N,~N,~N");c(c$,"copy",function(a){return(new JSV.js2d.JsParameters).setName(a).setElementColors(this)},"~S")}),m("JSV.js2d"),u(["JSV.api.JSVFileHelper"],"JSV.js2d.JsFileHelper",["JSV.js2d.JsFile"],
function(){c$=A(JSV.js2d,"JsFileHelper",null,JSV.api.JSVFileHelper);w(c$,function(){});e(c$,"set",function(){return this},"JSV.common.JSViewer");e(c$,"getFile",function(a){var b=null,b=prompt("Enter a file name:",a);return null==b?null:new JSV.js2d.JsFile(b)},"~S,~O,~B");e(c$,"setDirLastExported",function(a){return a},"~S");e(c$,"setFileChooser",function(){},"JSV.common.ExportType")}),m("JSV.api"),F(JSV.api,"JSVFileHelper"));Clazz_coreLoaded=!0})(Clazz,Clazz.newArray,Clazz.newBooleanArray,Clazz.newByteArray,
Clazz.newCharArray,Clazz.newDoubleArray,Clazz.newFloatArray,Clazz.newIntArray,Clazz.newLongArray,Clazz.newShortArray,Clazz.prepareCallback,Clazz.decorateAsClass,Clazz.isClassDefined,Clazz.defineEnumConstant,Clazz.cloneFinals,Clazz.inheritArgs,Clazz.pu$h,Clazz.declareInterface,Clazz.declarePackage,Clazz.makeConstructor,Clazz.overrideConstructor,Clazz.load,Clazz.defineMethod,Clazz.innerTypeInstance,Clazz.instanceOf,Clazz.p0p,Clazz.makeFunction,Clazz.superConstructor,Clazz.defineStatics,Clazz.registerSerializableFields,
Clazz.declareType,Clazz.superCall,Clazz.overrideMethod,Clazz.declareAnonymous,Clazz.checkPrivateMethod,Clazz.prepareFields,Clazz.instantialize,Clazz.doubleToInt,Clazz.declarePackage,Clazz.instanceOf,Clazz.load,Clazz.instantialize,Clazz.decorateAsClass,Clazz.floatToInt,Clazz.makeConstructor,Clazz.defineEnumConstant,Clazz.exceptionOf,Clazz.newIntArray,Clazz.defineStatics,Clazz.newFloatArray,Clazz.declareType,Clazz.prepareFields,Clazz.superConstructor,Clazz.newByteArray,Clazz.declareInterface,Clazz.p0p,
Clazz.pu$h,Clazz.newShortArray,Clazz.innerTypeInstance,Clazz.isClassDefined,Clazz.prepareCallback,Clazz.newArray,Clazz.castNullAs,Clazz.floatToShort,Clazz.superCall,Clazz.decorateAsType,Clazz.newBooleanArray,Clazz.newCharArray,Clazz.implementOf,Clazz.newDoubleArray,Clazz.overrideConstructor,Clazz.supportsNativeObject,Clazz.extendedObjectMethods,Clazz.callingStackTraces,Clazz.clone,Clazz.doubleToShort,Clazz.innerFunctions,Clazz.getInheritedLevel,Clazz.getParamsType,Clazz.isAF,Clazz.isAI,Clazz.isAS,
Clazz.isASS,Clazz.isAP,Clazz.isAFloat,Clazz.isAII,Clazz.isAFF,Clazz.isAFFF,Clazz.tryToSearchAndExecute,Clazz.getStackTrace,Clazz.inheritArgs);
